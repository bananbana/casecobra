"use strict";(()=>{var e={};e.id=811,e.ids=[811],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},15833:(e,t,s)=>{let n,i,r,a,o,l,c,u,p,d,m,h,f,g,b,x;s.r(t),s.d(t,{originalPathname:()=>EL,patchFetch:()=>EP,requestAsyncStorage:()=>EC,routeModule:()=>EA,serverHooks:()=>EF,staticGenerationAsyncStorage:()=>EM});var y,v,_,w,S,k,O={};s.r(O),s.d(O,{GET:()=>EN,POST:()=>Ej});var E=s(47006),T=s(18774),R=s(4189);let I=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,s){return arguments.length>=2?t(e,s):function(s){return t(s,e)}};case 3:return function(e,s,n){return arguments.length>=3?t(e,s,n):function(n){return t(n,e,s)}};case 4:return function(e,s,n,i){return arguments.length>=4?t(e,s,n,i):function(i){return t(i,e,s,n)}};case 5:return function(e,s,n,i,r){return arguments.length>=5?t(e,s,n,i,r):function(r){return t(r,e,s,n,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let s=arguments;return function(e){return t(e,...s)}}}},N=e=>e,j=e=>()=>e,A=j(!0),C=j(!1),M=j(void 0);function F(e,t,s,n,i,r,a,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return o(a(r(i(n(s(t(e)))))));case 9:return l(o(a(r(i(n(s(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}let L=()=>"3.1.5",P=Symbol.for(`effect/GlobalValue/globalStoreId/${L()}`);P in globalThis||(globalThis[P]=new Map);let $=globalThis[P],U=(e,t)=>($.has(e)||$.set(e,t()),$.get(e)),D=e=>"string"==typeof e,z=e=>"number"==typeof e,B=e=>"boolean"==typeof e,Z=e=>"bigint"==typeof e,q=e=>"symbol"==typeof e,K=e=>"function"==typeof e,J=e=>void 0===e,V=e=>void 0!==e,G=e=>null!==e,W=e=>!1,H=e=>"object"==typeof e&&null!==e,Y=e=>H(e)||K(e),Q=I(2,(e,t)=>Y(e)&&t in e),X=I(2,(e,t)=>Q(e,"_tag")&&e._tag===t),ee=e=>null==e,et=e=>null!=e,es=e=>e instanceof Date,en=e=>Q(e,Symbol.iterator),ei=e=>H(e)&&!Array.isArray(e),er=e=>Q(e,"then")&&K(e.then),ea=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class eo{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new eo(this.self)}}class el{_state;constructor(e,t,s,n){return ee(t)&&ee(e)?(t=4294967295*Math.random()>>>0,e=0):ee(t)&&(t=e,e=0),ee(n)&&ee(s)?(n=this._state?this._state[3]:4150755663,s=this._state?this._state[2]:335903614):ee(n)&&(n=s,s=0),this._state=new Int32Array([0,0,s>>>0,(1|(n||0))>>>0]),this._next(),ec(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(((e>>>=0)&e-1)==0)return this._next()&e-1;let t=0,s=(-e>>>0)%e>>>0;for(t=this._next();t<s;t=this._next());return t%e}number(){return((67108863&this._next())*134217728+(134217727&this._next())*1)/9007199254740992}_next(){var e;let t,s,n,i;let r=this._state[0]>>>0,a=this._state[1]>>>0;e=this._state,t=(a>>>16)*32557>>>0,s=(65535&a)*19605>>>0,n=(65535&a)*32557>>>0,i=(a>>>16)*19605+((s>>>16)+(t>>>16))>>>0,(n=n+(s=s<<16>>>0)>>>0)>>>0<s>>>0&&(i=i+1>>>0),(n=n+(t=t<<16>>>0)>>>0)>>>0<t>>>0&&(i=i+1>>>0),i=(i=i+Math.imul(a,1481765933)>>>0)+Math.imul(r,1284865837)>>>0,e[0]=i,e[1]=n,ec(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=r>>>18,l=(a>>>18|r<<14)>>>0;o=(o^r)>>>0;let c=((l=(l^a)>>>0)>>>27|o<<5)>>>0,u=r>>>27;return(c>>>u|c<<((-u>>>0&31)>>>0))>>>0}}function ec(e,t,s,n,i){let r=t+n>>>0,a=s+i>>>0;a>>>0<s>>>0&&(r=r+1|0),e[0]=r,e[1]=a}let eu=Symbol.for("effect/Utils/YieldWrap");class ep{#e;constructor(e){this.#e=e}[eu](){return this.#e}}let ed=U("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),em=U(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),eh=U(Symbol.for("effect/Hash/pcgr"),()=>new el),ef=Symbol.for("effect/Hash"),eg=e=>{if(!0===ed.enabled)return 0;switch(typeof e){case"number":return e_(e);case"bigint":return ew(e.toString(10));case"boolean":case"symbol":return ew(String(e));case"string":return ew(e);case"undefined":return ew("undefined");case"function":case"object":if(null===e)return ew("null");if(ev(e))return e[ef]();return eb(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},eb=e=>(em.has(e)||em.set(e,e_(eh.integer(Number.MAX_SAFE_INTEGER))),em.get(e)),ex=e=>t=>53*t^e,ey=e=>3221225471&e|e>>>1&1073741824,ev=e=>Q(e,ef),e_=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return ey(e)},ew=e=>{let t=5381,s=e.length;for(;s;)t=33*t^e.charCodeAt(--s);return ey(t)},eS=(e,t)=>{let s=12289;for(let n=0;n<t.length;n++)s^=F(ew(t[n]),ex(eg(e[t[n]])));return ey(s)},ek=e=>eS(e,Object.keys(e)),eO=e=>{let t=6151;for(let s=0;s<e.length;s++)t=F(t,ex(eg(e[s])));return ey(t)},eE=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,ef,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,ef,{value:()=>t,enumerable:!1}),t},eT=Symbol.for("effect/Equal");function eR(){return 1==arguments.length?e=>eI(e,arguments[0]):eI(arguments[0],arguments[1])}function eI(e,t){if(e===t)return!0;let s=typeof e;if(s!==typeof t)return!1;if("object"===s||"function"===s){if(null!==e&&null!==t&&eN(e)&&eN(t))return!!(eg(e)===eg(t)&&e[eT](t))||!!ed.enabled&&!!ed.tester&&ed.tester(e,t);if(ed.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,s)=>eI(e,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let s=Object.keys(e),n=Object.keys(t);if(s.length===n.length){for(let n of s)if(!(n in t&&eI(e[n],t[n])))return!!ed.tester&&ed.tester(e,t);return!0}}return!!ed.tester&&ed.tester(e,t)}}return!!ed.enabled&&!!ed.tester&&ed.tester(e,t)}let eN=e=>Q(e,eT),ej=()=>eR,eA=Symbol.for("nodejs.util.inspect.custom"),eC=e=>Q(e,"toJSON")&&K(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(eC):e,eM=e=>JSON.stringify(e,null,2),eF=(e,t=2)=>{try{return"object"==typeof e?eL(e,t):String(e)}catch(t){return String(e)}},eL=(e,t)=>{let s=[],n=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?s.includes(t)?void 0:s.push(t)&&t:t,t);return s=void 0,n},eP=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let s=e;for(let e=0,n=t.length;e<n;e++)s=t[e](s);return s}}},e$="Async",eU="Commit",eD="Failure",ez="OnFailure",eB="OnSuccess",eZ="OnSuccessAndFailure",eq="Success",eK="Sync",eJ="UpdateRuntimeFlags",eV="While",eG="WithRuntime",eW="Yield",eH="RevertFlags",eY=Symbol.for("effect/Effect"),eQ=Symbol.for("effect/Stream"),eX=Symbol.for("effect/Sink"),e0=Symbol.for("effect/Channel"),e1={_R:e=>e,_E:e=>e,_A:e=>e,_V:L()},e2={[eY]:e1,[eQ]:e1,[eX]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[e0]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[eT](e){return this===e},[ef](){return eE(this,eb(this))},[Symbol.iterator](){return new eo(new ep(this))},pipe(){return eP(this,arguments)}},e5={[ef](){return eE(this,ek(this))},[eT](e){let t=Object.keys(this),s=Object.keys(e);if(t.length!==s.length)return!1;for(let s of t)if(!(s in e&&eR(this[s],e[s])))return!1;return!0}},e3={...{...e2,_op:eU},...e5},e4=Symbol.for("effect/Option"),e6={...e2,[e4]:{_A:e=>e},[eA](){return this.toJSON()},toString(){return eM(this.toJSON())}},e9=Object.assign(Object.create(e6),{_tag:"Some",_op:"Some",[eT](e){return te(e)&&ts(e)&&eR(this.value,e.value)},[ef](){return eE(this,ex(eg(this._tag))(eg(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:eC(this.value)}}}),e8=eg("None"),e7=Object.assign(Object.create(e6),{_tag:"None",_op:"None",[eT]:e=>te(e)&&tt(e),[ef]:()=>e8,toJSON(){return{_id:"Option",_tag:this._tag}}}),te=e=>Q(e,e4),tt=e=>"None"===e._tag,ts=e=>"Some"===e._tag,tn=Object.create(e7),ti=e=>{let t=Object.create(e9);return t.value=e,t},tr=Symbol.for("effect/Context/Tag"),ta=Symbol.for("effect/STM"),to={...e2,_tag:"Tag",_op:"Tag",[ta]:e1,[tr]:{_Service:e=>e,_Identifier:e=>e},toString(){return eM(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[eA](){return this.toJSON()},of:e=>e,context(e){return th(this,e)}},tl=Symbol.for("effect/Context"),tc={[tl]:{_Services:e=>e},[eT](e){if(td(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!eR(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[ef](){return eE(this,e_(this.unsafeMap.size))},pipe(){return eP(this,arguments)},toString(){return eM(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(eC)}},[eA](){return this.toJSON()}},tu=e=>{let t=Object.create(tc);return t.unsafeMap=e,t},tp=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let s=e.stack.split("\n");if(s.length>2){let e=s[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},td=e=>Q(e,tl),tm=tu(new Map),th=(e,t)=>tu(new Map([[e.key,t]])),tf=I(3,(e,t,s)=>{let n=new Map(e.unsafeMap);return n.set(t.key,s),tu(n)}),tg=I(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw tp(t);return e.unsafeMap.get(t.key)}),tb=I(2,(e,t)=>e.unsafeMap.has(t.key)?ti(e.unsafeMap.get(t.key)):tn),tx=I(2,(e,t)=>{let s=new Map(e.unsafeMap);for(let[e,n]of t.unsafeMap)s.set(e,n);return tu(s)}),ty=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();Error.stackTraceLimit=t;let n=Object.create(to);return Object.defineProperty(n,"stack",{get:()=>s.stack}),n.key=e,n},tv=e=>Q(e,tr),t_=()=>tm,tw=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();function n(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(n,to),n.key=e,Object.defineProperty(n,"stack",{get:()=>s.stack}),n},tS=e=>(t,s)=>t===s||e(t,s),tk=I(2,(e,t)=>tS((s,n)=>e(t(s),t(n)))),tO=(e=>e.getTime(),e=>tS((t,s)=>{if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],s[n]))return!1;return!0})),tE=e=>e.length>0,tT=Symbol.for("effect/Either"),tR={...e2,[tT]:{_R:e=>e},[eA](){return this.toJSON()},toString(){return eM(this.toJSON())}},tI=Object.assign(Object.create(tR),{_tag:"Right",_op:"Right",[eT](e){return tj(e)&&tC(e)&&eR(this.right,e.right)},[ef](){return ex(eg(this._tag))(eg(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:eC(this.right)}}}),tN=Object.assign(Object.create(tR),{_tag:"Left",_op:"Left",[eT](e){return tj(e)&&tA(e)&&eR(this.left,e.left)},[ef](){return ex(eg(this._tag))(eg(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:eC(this.left)}}}),tj=e=>Q(e,tT),tA=e=>"Left"===e._tag,tC=e=>"Right"===e._tag,tM=e=>{let t=Object.create(tN);return t.left=e,t},tF=e=>{let t=Object.create(tI);return t.right=e,t},tL=((e,t)=>tt(e)?tM(t()):tF(e.value),()=>tn),tP=I(2,(e,{onNone:t,onSome:s})=>tt(e)?t():s(e.value)),t$=I(2,(e,t)=>tt(e)?t():e.value),tU=I(2,(e,t)=>tt(e)?t():e),tD=I(2,(e,t)=>tt(e)?ti(t()):e),tz=e=>null==e?tL():ti(e),tB=t$(M),tZ=e=>(...t)=>{try{return ti(e(...t))}catch(e){return tL()}},tq=I(2,(e,t)=>{if(ts(e))return e.value;throw t()})(()=>Error("getOrThrow called on a None")),tK=I(2,(e,t)=>tt(e)?tL():ti(t(e.value))),tJ=I(2,(e,t)=>tt(e)?tL():t(e.value)),tV=I(2,(e,t)=>tt(e)?tL():t(e.value)),tG=I(2,(e,t)=>tV(e,e=>t(e)?ti(e):tn)),tW=e=>tS((t,s)=>t===s||(tt(t)?tt(s):!tt(s)&&e(t.value,s.value))),tH=(i=ej(),I(2,(e,t)=>!tt(e)&&i(e.value,t)));Symbol.iterator,()=>tY;let tY={next:()=>({done:!0,value:void 0})},tQ=e=>(t,s)=>t===s?0:e(t,s),tX=tQ((e,t)=>e<t?-1:1),t0=((e,t)=>e<t?-1:1,I(2,(e,t)=>tQ((s,n)=>e(t(s),t(n)))));Object.fromEntries,(e,t)=>{let s=[];for(let n of t1(e))s.push(t(n,e[n]));return s};let t1=e=>Object.keys(e),t2=(...e)=>e,t5=e=>Array(e),t3=e=>Array.isArray(e)?e:Array.from(e),t4=I(2,(e,{onEmpty:t,onNonEmpty:s})=>st(e)?s(so(e),su(e)):t()),t6=I(2,(e,t)=>[t,...e]),t9=I(2,(e,t)=>[...e,t]),t8=I(2,(e,t)=>t3(e).concat(t3(t))),t7=Array.isArray,se=e=>0===e.length,st=tE,ss=(e,t)=>e<0||e>=t.length,sn=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),si=I(2,(e,t)=>{let s=Math.floor(t);return ss(s,e)?tL():ti(e[s])}),sr=I(2,(e,t)=>{let s=Math.floor(t);if(ss(s,e))throw Error(`Index ${s} out of bounds`);return e[s]}),sa=si(0),so=sr(0),sl=e=>st(e)?ti(sc(e)):tL(),sc=e=>e[e.length-1],su=e=>e.slice(1),sp=(e,t)=>{let s=0;for(let n of e){if(!t(n,s))break;s++}return s},sd=I(2,(e,t)=>sy(e,sp(e,t))),sm=I(2,(e,t)=>{let s=t3(e);return s.slice(sn(t,s),s.length)}),sh=e=>Array.from(e).reverse(),sf=I(2,(e,t)=>{let s=Array.from(e);return s.sort(t),s}),sg=I(2,(e,t)=>sb(e,t,t2)),sb=I(3,(e,t,s)=>{let n=t3(e),i=t3(t);if(st(n)&&st(i)){let e=[s(so(n),so(i))],t=Math.min(n.length,i.length);for(let r=1;r<t;r++)e[r]=s(n[r],i[r]);return e}return[]}),sx=ej(),sy=I(2,(e,t)=>{let s=Array.from(e),n=Math.floor(t);return st(s)?n>=1?sv(s,n):[[],s]:[s,[]]}),sv=I(2,(e,t)=>{let s=Math.max(1,Math.floor(t));return s>=e.length?[s_(e),[]]:[t6(e.slice(1,s),so(e)),e.slice(s)]}),s_=e=>e.slice(),sw=I(3,(e,t,s)=>{let n=t3(e),i=t3(t);return st(n)?st(i)?sj(s)(t8(n,i)):n:i}),sS=I(2,(e,t)=>sw(e,t,sx)),sk=()=>[],sO=e=>[e],sE=I(2,(e,t)=>e.map(t)),sT=I(2,(e,t)=>{if(se(e))return[];let s=[];for(let n=0;n<e.length;n++){let i=t(e[n],n);for(let e=0;e<i.length;e++)s.push(i[e])}return s}),sR=sT(N),sI=I(3,(e,t,s)=>t3(e).reduce((e,t,n)=>s(e,t,n),t)),sN=((e,t,s)=>t3(e).reduceRight((e,t,n)=>s(e,t,n),t),(e,t)=>{let s;let n=[],i=e;for(;ts(s=t(i));){let[e,t]=s.value;n.push(e),i=t}return n}),sj=I(2,(e,t)=>{let s=t3(e);if(st(s)){let e=[so(s)];for(let n of su(s))e.every(e=>!t(n,e))&&e.push(n);return e}return[]}),sA=e=>sj(e,ej()),sC=I(2,(e,t)=>t3(e).join(t)),sM=Symbol.for("effect/Chunk"),sF=[],sL=tS((e,t)=>e.length===t.length&&sJ(e).every((e,s)=>eR(e,sY(t,s)))),sP={[sM]:{_A:e=>e},toString(){return eM(this.toJSON())},toJSON(){return{_id:"Chunk",values:sJ(this).map(eC)}},[eA](){return this.toJSON()},[eT](e){return sU(e)&&sL(this,e)},[ef](){return eE(this,eO(sJ(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return sF[Symbol.iterator]();default:return sJ(this)[Symbol.iterator]()}},pipe(){return eP(this,arguments)}},s$=e=>{let t=Object.create(sP);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=sD,t.right=sD;break;case"ISingleton":t.length=1,t.depth=0,t.left=sD,t.right=sD;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=sD,t.right=sD}return t},sU=e=>Q(e,sM),sD=s$({_tag:"IEmpty"}),sz=()=>sD,sB=(...e)=>1===e.length?sZ(e[0]):sH(e),sZ=e=>s$({_tag:"ISingleton",a:e}),sq=e=>sU(e)?e:s$({_tag:"IArray",array:t3(e)}),sK=(e,t,s)=>{switch(e.backing._tag){case"IArray":!function(e,t,s,n,i){for(let t=0;t<Math.min(e.length,0+i);t++)s[n+t-0]=e[t]}(e.backing.array,0,t,s,e.length);break;case"IConcat":sK(e.left,t,s),sK(e.right,t,s+e.left.length);break;case"ISingleton":t[s]=e.backing.a;break;case"ISlice":{let n=0,i=s;for(;n<e.length;)t[i]=sY(e,n),n+=1,i+=1}}},sJ=e=>{switch(e.backing._tag){case"IEmpty":return sF;case"IArray":return e.backing.array;default:{let t=Array(e.length);return sK(e,t,0),e.backing={_tag:"IArray",array:t},e.left=sD,e.right=sD,e.depth=0,t}}},sV=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return s$({_tag:"IArray",array:sh(e.backing.array)});case"IConcat":return s$({_tag:"IConcat",left:sV(e.backing.right),right:sV(e.backing.left)});case"ISlice":return sW(sh(sJ(e)))}},sG=I(2,(e,t)=>t<0||t>=e.length?tL():ti(sY(e,t))),sW=e=>s$({_tag:"IArray",array:e}),sH=e=>sW(e),sY=I(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw Error("Index out of bounds");case"ISingleton":if(0!==t)throw Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?sY(e.left,t):sY(e.right,t-e.left.length);case"ISlice":return sY(e.backing.chunk,t+e.backing.offset)}}),sQ=I(2,(e,t)=>s1(e,sZ(t))),sX=I(2,(e,t)=>s1(sZ(t),e)),s0=I(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return sD;switch(e.backing._tag){case"ISlice":return s$({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":if(t>e.left.length)return s0(e.right,t-e.left.length);return s$({_tag:"IConcat",left:s0(e.left,t),right:e.right});default:return s$({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),s1=I(2,(e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;let s=t.depth-e.depth;if(1>=Math.abs(s))return s$({_tag:"IConcat",left:e,right:t});if(s<-1){if(e.left.depth>=e.right.depth){let s=s1(e.right,t);return s$({_tag:"IConcat",left:e.left,right:s})}{let s=s1(e.right.right,t);if(s.depth===e.depth-3){let t=s$({_tag:"IConcat",left:e.right.left,right:s});return s$({_tag:"IConcat",left:e.left,right:t})}{let t=s$({_tag:"IConcat",left:e.left,right:e.right.left});return s$({_tag:"IConcat",left:t,right:s})}}}if(t.right.depth>=t.left.depth)return s$({_tag:"IConcat",left:s1(e,t.left),right:t.right});{let s=s1(e,t.left.left);if(s.depth===t.depth-3){let e=s$({_tag:"IConcat",left:s,right:t.left.right});return s$({_tag:"IConcat",left:e,right:t.right})}{let e=s$({_tag:"IConcat",left:t.left.right,right:t.right});return s$({_tag:"IConcat",left:s,right:e})}}}),s2=e=>0===e.length,s5=e=>e.length>0,s3=sG(0),s4=e=>sY(e,0),s6=e=>s0(e,1),s9=I(2,(e,{onLeft:t,onRight:s})=>tA(e)?t(e.left):s(e.right))({onLeft:N,onRight:N});function s8(e,t){var s;return s=e&t-1,s-=s>>1&1431655765,s=(s=(858993459&s)+(s>>2&858993459))+(s>>4)&252645135,s+=s>>8,127&(s+=s>>16)}let s7=(e,t)=>({value:e,previous:t});function ne(e,t,s,n){let i=n;if(!e){let e=n.length;i=Array(e);for(let t=0;t<e;++t)i[t]=n[t]}return i[t]=s,i}function nt(e,t,s){let n=s.length-1,i=0,r=0,a=s;if(e)i=r=t;else for(a=Array(n);i<t;)a[r++]=s[i++];for(++i;i<=n;)a[r++]=s[i++];return e&&(a.length=n),a}class ns{_tag="EmptyNode";modify(e,t,s,n,i,r){let a=s(tL());return tt(a)?new ns:(++r.value,new nr(e,n,i,a))}}function nn(e){return X(e,"EmptyNode")}function ni(e,t){return!nn(e)&&t===e.edit}class nr{edit;hash;key;value;_tag="LeafNode";constructor(e,t,s,n){this.edit=e,this.hash=t,this.key=s,this.value=n}modify(e,t,s,n,i,r){if(eR(i,this.key)){let t=s(this.value);return t===this.value?this:tt(t)?(--r.value,new ns):ni(this,e)?(this.value=t,this):new nr(e,n,i,t)}let a=s(tL());return tt(a)?this:(++r.value,nc(e,t,this.hash,this,n,new nr(e,n,i,a)))}}class na{edit;hash;children;_tag="CollisionNode";constructor(e,t,s){this.edit=e,this.hash=t,this.children=s}modify(e,t,s,n,i,r){if(n===this.hash){let t=ni(this,e),n=this.updateCollisionList(t,e,this.hash,this.children,s,i,r);return n===this.children?this:n.length>1?new na(e,this.hash,n):n[0]}let a=s(tL());return tt(a)?this:(++r.value,nc(e,t,this.hash,this,n,new nr(e,n,i,a)))}updateCollisionList(e,t,s,n,i,r,a){let o=n.length;for(let l=0;l<o;++l){let o=n[l];if("key"in o&&eR(r,o.key)){let c=o.value,u=i(c);if(u===c)return n;if(tt(u))return--a.value,nt(e,l,n);return ne(e,l,new nr(t,s,r,u),n)}}let l=i(tL());return tt(l)?n:(++a.value,ne(e,o,new nr(t,s,r,l),n))}}class no{edit;mask;children;_tag="IndexedNode";constructor(e,t,s){this.edit=e,this.mask=t,this.children=s}modify(e,t,s,n,i,r){let a;let o=this.mask,l=this.children,c=n>>>t&31,u=1<<c,p=s8(o,u),d=o&u,m=ni(this,e);if(!d){let a=new ns().modify(e,t+5,s,n,i,r);return a?l.length>=16?function(e,t,s,n,i){let r=[],a=n,o=0;for(let e=0;a;++e)1&a&&(r[e]=i[o++]),a>>>=1;return r[t]=s,new nl(e,o+1,r)}(e,c,a,o,l):new no(e,o|u,function(e,t,s,n){let i=n.length;if(e){let e=i;for(;e>=t;)n[e--]=n[e];return n[t]=s,n}let r=0,a=0,o=Array(i+1);for(;r<t;)o[a++]=n[r++];for(o[t]=s;r<i;)o[++a]=n[r++];return o}(m,p,a,l)):this}let h=l[p],f=h.modify(e,t+5,s,n,i,r);if(h===f)return this;let g=o;if(nn(f)){var b;if(!(g&=~u))return new ns;if(l.length<=2&&(nn(b=l[1^p])||"LeafNode"===b._tag||"CollisionNode"===b._tag))return l[1^p];a=nt(m,p,l)}else a=ne(m,p,f,l);return m?(this.mask=g,this.children=a,this):new no(e,g,a)}}class nl{edit;size;children;_tag="ArrayNode";constructor(e,t,s){this.edit=e,this.size=t,this.children=s}modify(e,t,s,n,i,r){let a,o=this.size,l=this.children,c=n>>>t&31,u=l[c],p=(u||new ns).modify(e,t+5,s,n,i,r);if(u===p)return this;let d=ni(this,e);if(nn(u)&&!nn(p))++o,a=ne(d,c,p,l);else if(!nn(u)&&nn(p)){if(--o<=8)return function(e,t,s,n){let i=Array(t-1),r=0,a=0;for(let e=0,t=n.length;e<t;++e)if(e!==s){let t=n[e];t&&!nn(t)&&(i[r++]=t,a|=1<<e)}return new no(e,a,i)}(e,o,c,l);a=ne(d,c,new ns,l)}else a=ne(d,c,p,l);return d?(this.size=o,this.children=a,this):new nl(e,o,a)}}function nc(e,t,s,n,i,r){let a;let o=t;for(;;){let t=function(e,t,s,n,i,r){if(s===i)return new na(e,s,[r,n]);let a=s>>>t&31,o=i>>>t&31;return a===o?t=>new no(e,1<<a|1<<o,[t]):new no(e,1<<a|1<<o,a<o?[n,r]:[r,n])}(e,o,s,n,i,r);if("function"==typeof t)a=s7(t,a),o+=5;else{let e=t;for(;null!=a;)e=a.value(e),a=a.previous;return e}}}let nu="effect/HashMap",np=Symbol.for(nu),nd={[np]:np,[Symbol.iterator](){return new nh(this,(e,t)=>[e,t])},[ef](){let e=eg(nu);for(let t of this)e^=F(eg(t[0]),ex(eg(t[1])));return eE(this,e)},[eT](e){if(nv(e)){if(e._size!==this._size)return!1;for(let t of this){let s=F(e,nw(t[0],eg(t[0])));if(tt(s)||!eR(t[1],s.value))return!1}return!0}return!1},toString(){return eM(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(eC)}},[eA](){return this.toJSON()},pipe(){return eP(this,arguments)}},nm=(e,t,s,n)=>{let i=Object.create(nd);return i._editable=e,i._edit=t,i._root=s,i._size=n,i};class nh{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=ng(this.map._root,this.f,void 0)}next(){if(tt(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=nf(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new nh(this.map,this.f)}}let nf=e=>e?nb(e[0],e[1],e[2],e[3],e[4]):tL(),ng=(e,t,s)=>{switch(e._tag){case"LeafNode":if(ts(e.value))return ti({value:t(e.key,e.value.value),cont:s});return nf(s);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return nb(n.length,n,0,t,s)}default:return nf(s)}},nb=(e,t,s,n,i)=>{for(;s<e;){let r=t[s++];if(r&&!nn(r))return ng(r,n,[e,t,s,n,i])}return nf(i)},nx=nm(!1,0,new ns,0),ny=()=>nx,nv=e=>Q(e,np),n_=I(2,(e,t)=>nw(e,t,eg(t))),nw=I(3,(e,t,s)=>{let n=e._root,i=0;for(;;)switch(n._tag){case"LeafNode":return eR(t,n.key)?n.value:tL();case"CollisionNode":if(s===n.hash){let e=n.children;for(let s=0,n=e.length;s<n;++s){let n=e[s];if("key"in n&&eR(t,n.key))return n.value}}return tL();case"IndexedNode":{let e=1<<(s>>>i&31);if(n.mask&e){n=n.children[s8(n.mask,e)],i+=5;break}return tL()}case"ArrayNode":if(n=n.children[s>>>i&31]){i+=5;break}return tL();default:return tL()}}),nS=I(2,(e,t)=>ts(nw(e,t,eg(t)))),nk=I(3,(e,t,s)=>nN(e,t,()=>ti(s))),nO=I(3,(e,t,s)=>e._editable?(e._root=t,e._size=s,e):t===e._root?e:nm(e._editable,e._edit,t,s)),nE=e=>new nh(e,e=>e),nT=e=>e._size,nR=e=>nm(!0,e._edit+1,e._root,e._size),nI=e=>(e._editable=!1,e),nN=((e,t)=>{let s=nR(e);return t(s),nI(s)},I(3,(e,t,s)=>nj(e,t,eg(t),s))),nj=I(4,(e,t,s,n)=>{let i={value:e._size},r=e._root.modify(e._editable?e._edit:NaN,0,n,s,t,i);return F(e,nO(r,i.value))}),nA=I(2,(e,t)=>nN(e,t,tL)),nC=I(2,(e,t)=>nF(e,ny(),(e,s,n)=>nk(e,n,t(s,n)))),nM=I(2,(e,t)=>nF(e,void 0,(e,s,n)=>t(s,n))),nF=I(3,(e,t,s)=>{let n;let i=e._root;if("LeafNode"===i._tag)return ts(i.value)?s(t,i.value.value,i.key):t;if("EmptyNode"===i._tag)return t;let r=[i.children];for(;n=r.pop();)for(let e=0,i=n.length;e<i;){let i=n[e++];i&&!nn(i)&&("LeafNode"===i._tag?ts(i.value)&&(t=s(t,i.value.value,i.key)):r.push(i.children))}return t}),nL="effect/HashSet",nP=Symbol.for(nL),n$={[nP]:nP,[Symbol.iterator](){return nE(this._keyMap)},[ef](){return eE(this,ex(eg(this._keyMap))(eg(nL)))},[eT](e){return!!nD(e)&&nT(this._keyMap)===nT(e._keyMap)&&eR(this._keyMap,e._keyMap)},toString(){return eM(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(eC)}},[eA](){return this.toJSON()},pipe(){return eP(this,arguments)}},nU=e=>{let t=Object.create(n$);return t._keyMap=e,t},nD=e=>Q(e,nP),nz=nU(ny()),nB=()=>nz,nZ=I(2,(e,t)=>nS(e._keyMap,t)),nq=I(2,(e,t)=>{let s=!1;for(let n of e)if(s=t(n))break;return s}),nK=I(2,(e,t)=>!nq(e,e=>!t(e))),nJ=e=>nU(nR(e._keyMap)),nV=e=>(e._keyMap._editable=!1,e),nG=I(2,(e,t)=>{let s=nJ(e);return t(s),nV(s)}),nW=I(2,(e,t)=>e._keyMap._editable?(nk(t,!0)(e._keyMap),e):nU(nk(t,!0)(e._keyMap))),nH=I(2,(e,t)=>e._keyMap._editable?(nA(t)(e._keyMap),e):nU(nA(t)(e._keyMap))),nY=I(2,(e,t)=>nG(e,e=>{for(let s of t)nH(e,s)})),nQ=I(2,(e,t)=>nG(nB(),s=>{for(let n of(nX(e,e=>nW(s,e)),t))nW(s,n)})),nX=I(2,(e,t)=>nM(e._keyMap,(e,s)=>t(s))),n0=I(3,(e,t,s)=>nF(e._keyMap,t,(e,t,n)=>s(e,n))),n1=e=>{let t=nJ(nB());for(let s of e)nW(t,s);return nV(t)},n2=(...e)=>{let t=nJ(nB());for(let s of e)nW(t,s);return nV(t)},n5=e=>nT(e._keyMap),n3=Symbol.for("effect/MutableRef"),n4={[n3]:n3,toString(){return eM(this.toJSON())},toJSON(){return{_id:"MutableRef",current:eC(this.current)}},[eA](){return this.toJSON()},pipe(){return eP(this,arguments)}},n6=e=>{let t=Object.create(n4);return t.current=e,t},n9=I(3,(e,t,s)=>!!eR(t,e.current)&&(e.current=s,!0)),n8=e=>e.current,n7=I(2,(e,t)=>(e.current=t,e)),ie="effect/FiberId",it=Symbol.for(ie),is="None",ii="Runtime",ir="Composite",ia=ew(`${ie}-${is}`);class io{[it]=it;_tag=is;id=-1;startTimeMillis=-1;[ef](){return ia}[eT](e){return ip(e)&&e._tag===is}toString(){return eM(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[eA](){return this.toJSON()}}class il{id;startTimeMillis;[it]=it;_tag=ii;constructor(e,t){this.id=e,this.startTimeMillis=t}[ef](){return eE(this,ew(`${ie}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[eT](e){return ip(e)&&e._tag===ii&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return eM(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[eA](){return this.toJSON()}}class ic{left;right;[it]=it;_tag=ir;constructor(e,t){this.left=e,this.right=t}_hash;[ef](){return F(ew(`${ie}-${this._tag}`),ex(eg(this.left)),ex(eg(this.right)),eE(this))}[eT](e){return ip(e)&&e._tag===ir&&eR(this.left,e.left)&&eR(this.right,e.right)}toString(){return eM(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:eC(this.left),right:eC(this.right)}}[eA](){return this.toJSON()}}let iu=new io,ip=e=>Q(e,it),id=e=>e._tag===is||F(iy(e),nK(e=>id(e))),im=I(2,(e,t)=>e._tag===is?t:t._tag===is?e:new ic(e,t)),ih=I(2,(e,t)=>id(e)?t:e),ig=e=>{switch(e._tag){case is:return nB();case ii:return n2(e.id);case ir:return F(ig(e.left),nQ(ig(e.right)))}},ib=U(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>n6(0)),ix=e=>Array.from(ig(e)).map(e=>`#${e}`).join(","),iy=e=>{switch(e._tag){case is:return nB();case ii:return n2(e);case ir:return F(iy(e.left),nQ(iy(e.right)))}},iv=iu,i_=(e,t)=>new il(e,t),iw=(e,t)=>new ic(e,t),iS=()=>{let e=n8(ib);return F(ib,n7(e+1)),new il(e,Date.now())},ik=e=>{let t=nR(ny());for(let s of e)nk(t,s[0],s[1]);return nI(t)},iO=e=>e&&nn(e._root),iE=Symbol.for("effect/List"),iT=e=>t3(e),iR=tk(tO(eR),iT),iI={[iE]:iE,_tag:"Cons",toString(){return eM(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:iT(this).map(eC)}},[eA](){return this.toJSON()},[eT](e){return iC(e)&&this._tag===e._tag&&iR(this,e)},[ef](){return eE(this,eO(iT(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();let s=t.head;return t=t.tail,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return eP(this,arguments)}},iN=(e,t)=>{let s=Object.create(iI);return s.head=e,s.tail=t,s},ij=ew("Nil"),iA=Object.create({[iE]:iE,_tag:"Nil",toString(){return eM(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[eA](){return this.toJSON()},[ef]:()=>ij,[eT](e){return iC(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return eP(this,arguments)}}),iC=e=>Q(e,iE),iM=e=>"Nil"===e._tag,iF=e=>"Cons"===e._tag,iL=(e,t)=>iN(e,t),iP=()=>iA,i$=e=>iN(e,iA),iU=I(2,(e,t)=>iz(t,e)),iD=I(2,(e,t)=>iL(t,e)),iz=I(2,(e,t)=>{if(iM(e))return t;if(iM(t))return e;{let s=iN(t.head,e),n=s,i=t.tail;for(;!iM(i);){let t=iN(i.head,e);n.tail=t,n=t,i=i.tail}return s}}),iB=I(3,(e,t,s)=>{let n=t,i=e;for(;!iM(i);)n=s(n,i.head),i=i.tail;return n}),iZ=e=>{let t=iP(),s=e;for(;!iM(s);)t=iD(t,s.head),s=s.tail;return t},iq="Expected List to be non-empty",iK=e=>{if(iM(e))throw Error(iq);return e.head},iJ=e=>{if(iM(e))throw Error(iq);return e.tail};Array.prototype;let iV=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=e5,e}(),iG=e=>Object.assign(Object.create(e5),e),iW=Symbol.for("effect/DifferChunkPatch");function iH(e){return e}({...iV.prototype,[iW]:{_Value:iH,_Patch:iH}});let iY=Symbol.for("effect/DifferContextPatch");function iQ(e){return e}let iX={...iV.prototype,[iY]:{_Value:iQ,_Patch:iQ}},i0=Object.create(Object.assign(Object.create(iX),{_tag:"Empty"})),i1=()=>i0,i2=Object.assign(Object.create(iX),{_tag:"AndThen"}),i5=(e,t)=>{let s=Object.create(i2);return s.first=e,s.second=t,s},i3=Object.assign(Object.create(iX),{_tag:"AddService"}),i4=(e,t)=>{let s=Object.create(i3);return s.key=e,s.service=t,s},i6=Object.assign(Object.create(iX),{_tag:"RemoveService"}),i9=e=>{let t=Object.create(i6);return t.key=e,t},i8=Object.assign(Object.create(iX),{_tag:"UpdateService"}),i7=(e,t)=>{let s=Object.create(i8);return s.key=e,s.update=t,s},re=(e,t)=>{let s=new Map(e.unsafeMap),n=i1();for(let[e,i]of t.unsafeMap.entries())if(s.has(e)){let t=s.get(e);s.delete(e),eR(t,i)||(n=rt(i7(e,()=>i))(n))}else s.delete(e),n=rt(i4(e,i))(n);for(let[e]of s.entries())n=rt(i9(e))(n);return n},rt=I(2,(e,t)=>i5(e,t)),rs=I(2,(e,t)=>{if("Empty"===e._tag)return t;let s=!1,n=sZ(e),i=new Map(t.unsafeMap);for(;s5(n);){let e=s4(n),t=s6(n);switch(e._tag){case"Empty":n=t;break;case"AddService":i.set(e.key,e.service),n=t;break;case"AndThen":n=sX(sX(t,e.second),e.first);break;case"RemoveService":i.delete(e.key),n=t;break;case"UpdateService":i.set(e.key,e.update(i.get(e.key))),s=!0,n=t}}if(!s)return tu(i);let r=new Map;for(let[e]of t.unsafeMap)i.has(e)&&(r.set(e,i.get(e)),i.delete(e));for(let[e,t]of i)r.set(e,t);return tu(r)}),rn=Symbol.for("effect/DifferHashMapPatch");function ri(e){return e}({...iV.prototype,[rn]:{_Value:ri,_Key:ri,_Patch:ri}});let rr=Symbol.for("effect/DifferHashSetPatch");function ra(e){return e}let ro={...iV.prototype,[rr]:{_Value:ra,_Key:ra,_Patch:ra}},rl=Object.create(Object.assign(Object.create(ro),{_tag:"Empty"})),rc=()=>rl,ru=Object.assign(Object.create(ro),{_tag:"AndThen"}),rp=(e,t)=>{let s=Object.create(ru);return s.first=e,s.second=t,s},rd=Object.assign(Object.create(ro),{_tag:"Add"}),rm=e=>{let t=Object.create(rd);return t.value=e,t},rh=Object.assign(Object.create(ro),{_tag:"Remove"}),rf=e=>{let t=Object.create(rh);return t.value=e,t},rg=(e,t)=>{let[s,n]=n0([e,rc()],([e,t],s)=>nZ(s)(e)?[nH(s)(e),t]:[e,rb(rm(s))(t)])(t);return n0(n,(e,t)=>rb(rf(t))(e))(s)},rb=I(2,(e,t)=>rp(e,t)),rx=I(2,(e,t)=>{if("Empty"===e._tag)return t;let s=t,n=sZ(e);for(;s5(n);){let e=s4(n),t=s6(n);switch(e._tag){case"Empty":n=t;break;case"AndThen":n=sX(e.first)(sX(e.second)(t));break;case"Add":s=nW(e.value)(s),n=t;break;case"Remove":s=nH(e.value)(s),n=t}}return s}),ry=Symbol.for("effect/DifferOrPatch");function rv(e){return e}let r_={...iV.prototype,[ry]:{_Value:rv,_Key:rv,_Patch:rv}},rw=Object.create(Object.assign(Object.create(r_),{_tag:"Empty"})),rS=Object.assign(Object.create(r_),{_tag:"AndThen"}),rk=(e,t)=>{let s=Object.create(rS);return s.first=e,s.second=t,s},rO=Object.assign(Object.create(r_),{_tag:"SetLeft"}),rE=Object.assign(Object.create(r_),{_tag:"SetRight"}),rT=Object.assign(Object.create(r_),{_tag:"UpdateLeft"}),rR=Object.assign(Object.create(r_),{_tag:"UpdateRight"}),rI=((e,t)=>rk(e,t),Symbol.for("effect/DifferReadonlyArrayPatch"));function rN(e){return e}let rj={...iV.prototype,[rI]:{_Value:rN,_Patch:rN}},rA=Object.create(Object.assign(Object.create(rj),{_tag:"Empty"})),rC=()=>rA,rM=Object.assign(Object.create(rj),{_tag:"AndThen"}),rF=(e,t)=>{let s=Object.create(rM);return s.first=e,s.second=t,s},rL=Object.assign(Object.create(rj),{_tag:"Append"}),rP=e=>{let t=Object.create(rL);return t.values=e,t},r$=Object.assign(Object.create(rj),{_tag:"Slice"}),rU=(e,t)=>{let s=Object.create(r$);return s.from=e,s.until=t,s},rD=Object.assign(Object.create(rj),{_tag:"Update"}),rz=(e,t)=>{let s=Object.create(rD);return s.index=e,s.patch=t,s},rB=e=>{let t=0,s=rC();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],i=e.newValue[t],r=e.differ.diff(n,i);eR(r,e.differ.empty)||(s=rZ(s,rz(t,r))),t+=1}return t<e.oldValue.length&&(s=rZ(s,rU(0,t))),t<e.newValue.length&&(s=rZ(s,rP(sm(t)(e.newValue)))),s},rZ=I(2,(e,t)=>rF(e,t)),rq=I(3,(e,t,s)=>{if("Empty"===e._tag)return t;let n=t.slice(),i=sO(e);for(;tE(i);){let e=so(i),t=su(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":t.unshift(e.first,e.second),i=t;break;case"Append":for(let t of e.values)n.push(t);i=t;break;case"Slice":n=n.slice(e.from,e.until),i=t;break;case"Update":n[e.index]=s.patch(e.patch,n[e.index]),i=t}}return n}),rK={[Symbol.for("effect/Differ")]:{_P:N,_V:N}},rJ=e=>{let t=Object.create(rK);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},rV=()=>rJ({empty:i1(),combine:(e,t)=>rt(t)(e),diff:(e,t)=>re(e,t),patch:(e,t)=>rs(t)(e)}),rG=()=>rJ({empty:rc(),combine:(e,t)=>rb(t)(e),diff:(e,t)=>rg(e,t),patch:(e,t)=>rx(t)(e)}),rW=e=>rJ({empty:rC(),combine:(e,t)=>rZ(e,t),diff:(t,s)=>rB({oldValue:t,newValue:s,differ:e}),patch:(t,s)=>rq(t,s,e)}),rH=()=>rY((e,t)=>t),rY=e=>rJ({empty:N,combine:(e,t)=>e===N?t:t===N?e:s=>t(e(s)),diff:(e,t)=>eR(e,t)?N:j(t),patch:(t,s)=>e(s,t(s))}),rQ=e=>255&e,rX=e=>e>>8&255,r0=(e,t)=>(255&e)+((t&e&255)<<8),r1=r0(0,0),r2=I(2,(e,t)=>r0(rQ(e)&~t,rX(e))),r5=I(2,(e,t)=>e|t),r3=e=>~e>>>0&255,r4=e=>r7(e,32),r6=I(2,(e,t)=>e|t),r9=e=>r8(e)&&!an(e),r8=e=>r7(e,1),r7=I(2,(e,t)=>(e&t)!=0),ae=(...e)=>e.reduce((e,t)=>e|t,0),at=ae(0),as=e=>r7(e,4),an=e=>r7(e,16),ai=I(2,(e,t)=>r0(e^t,t)),ar=I(2,(e,t)=>e&(r3(rQ(t))|rX(t))|rQ(t)&rX(t)),aa=rJ({empty:r1,diff:(e,t)=>ai(e,t),combine:(e,t)=>r5(t)(e),patch:(e,t)=>ar(t,e)}),ao=e=>r0(e,e),al=e=>r0(e,0),ac="Empty",au="Fail",ap="Interrupt",ad="Parallel",am="Sequential",ah="effect/Cause",af=Symbol.for(ah),ag={[af]:{_E:e=>e},[ef](){return F(eg(ah),ex(eg(aU(this))),eE(this))},[eT](e){return aS(e)&&a$(this,e)},pipe(){return eP(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:eC(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:eC(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:eC(this.left),right:eC(this.right)}}},toString(){return aH(this)},[eA](){return this.toJSON()}},ab=(()=>{let e=Object.create(ag);return e._tag=ac,e})(),ax=e=>{let t=Object.create(ag);return t._tag=au,t.error=e,t},ay=e=>{let t=Object.create(ag);return t._tag="Die",t.defect=e,t},av=e=>{let t=Object.create(ag);return t._tag=ap,t.fiberId=e,t},a_=(e,t)=>{let s=Object.create(ag);return s._tag=ad,s.left=e,s.right=t,s},aw=(e,t)=>{let s=Object.create(ag);return s._tag=am,s.left=e,s.right=t,s},aS=e=>Q(e,af),ak=e=>"Die"===e._tag,aO=e=>e._tag===ac||aV(e,!0,(e,t)=>{switch(t._tag){case ac:return ti(e);case"Die":case au:case ap:return ti(!1);default:return tL()}}),aE=e=>ts(aC(e)),aT=e=>aG(void 0,aZ)(e),aR=e=>sV(aV(e,sz(),(e,t)=>t._tag===au?ti(F(e,sX(t.error))):tL())),aI=e=>sV(aV(e,sz(),(e,t)=>"Die"===t._tag?ti(F(e,sX(t.defect))):tL())),aN=e=>aV(e,nB(),(e,t)=>t._tag===ap?ti(F(e,nW(t.fiberId))):tL()),aj=e=>az(e,e=>e._tag===au?ti(e.error):tL()),aA=e=>{let t=aj(e);switch(t._tag){case"None":return tF(e);case"Some":return tM(t.value)}},aC=e=>az(e,e=>e._tag===ap?ti(e.fiberId):tL()),aM=e=>aJ(e,{onEmpty:tL(),onFail:e=>ti(ay(e)),onDie:e=>ti(ay(e)),onInterrupt:()=>tL(),onSequential:(e,t)=>ts(e)&&ts(t)?ti(aw(e.value,t.value)):ts(e)&&tt(t)?ti(e.value):tt(e)&&ts(t)?ti(t.value):tL(),onParallel:(e,t)=>ts(e)&&ts(t)?ti(a_(e.value,t.value)):ts(e)&&tt(t)?ti(e.value):tt(e)&&ts(t)?ti(t.value):tL()}),aF=e=>aJ(e,{onEmpty:ab,onFail:()=>ab,onDie:e=>ay(e),onInterrupt:e=>av(e),onSequential:aw,onParallel:a_}),aL=e=>aJ(e,{onEmpty:ab,onFail:e=>ay(e),onDie:e=>ay(e),onInterrupt:e=>av(e),onSequential:(e,t)=>aw(e,t),onParallel:(e,t)=>a_(e,t)}),aP=((e,t)=>aP(e,e=>ax(t(e))),I(2,(e,t)=>aJ(e,{onEmpty:ab,onFail:e=>t(e),onDie:e=>ay(e),onInterrupt:e=>av(e),onSequential:(e,t)=>aw(e,t),onParallel:(e,t)=>a_(e,t)}))),a$=(e,t)=>{let s=sZ(e),n=sZ(t);for(;s5(s)&&s5(n);){let[e,t]=F(s4(s),aV([nB(),sz()],([e,t],s)=>{let[n,i]=aB(s);return ti([F(e,nQ(n)),F(t,s1(i))])})),[i,r]=F(s4(n),aV([nB(),sz()],([e,t],s)=>{let[n,i]=aB(s);return ti([F(e,nQ(n)),F(t,s1(i))])}));if(!eR(e,i))return!1;s=t,n=r}return!0},aU=e=>aD(sZ(e),sz()),aD=(e,t)=>{for(;;){let[s,n]=F(e,sI([nB(),sz()],([e,t],s)=>{let[n,i]=aB(s);return[F(e,nQ(n)),F(t,s1(i))]})),i=n5(s)>0?F(t,sX(s)):t;if(s2(n))return sV(i);e=n,t=i}throw Error(ea("Cause.flattenCauseLoop"))},az=I(2,(e,t)=>{let s=[e];for(;s.length>0;){let e=s.pop(),n=t(e);switch(n._tag){case"None":switch(e._tag){case am:case ad:s.push(e.right),s.push(e.left)}break;case"Some":return n}}return tL()}),aB=e=>{let t=e,s=[],n=nB(),i=sz();for(;void 0!==t;)switch(t._tag){case ac:if(0===s.length)return[n,i];t=s.pop();break;case au:if(n=nW(n,sB(t._tag,t.error)),0===s.length)return[n,i];t=s.pop();break;case"Die":if(n=nW(n,sB(t._tag,t.defect)),0===s.length)return[n,i];t=s.pop();break;case ap:if(n=nW(n,sB(t._tag,t.fiberId)),0===s.length)return[n,i];t=s.pop();break;case am:switch(t.left._tag){case ac:t=t.right;break;case am:t=aw(t.left.left,aw(t.left.right,t.right));break;case ad:t=a_(aw(t.left.left,t.right),aw(t.left.right,t.right));break;default:i=sX(i,t.right),t=t.left}break;case ad:s.push(t.right),t=t.left}throw Error(ea("Cause.evaluateCauseLoop"))},aZ={emptyCase:A,failCase:C,dieCase:C,interruptCase:A,sequentialCase:(e,t,s)=>t&&s,parallelCase:(e,t,s)=>t&&s},aq="SequentialCase",aK="ParallelCase",aJ=I(2,(e,{onDie:t,onEmpty:s,onFail:n,onInterrupt:i,onParallel:r,onSequential:a})=>aG(e,void 0,{emptyCase:()=>s,failCase:(e,t)=>n(t),dieCase:(e,s)=>t(s),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,s)=>a(t,s),parallelCase:(e,t,s)=>r(t,s)})),aV=I(3,(e,t,s)=>{let n=t,i=e,r=[];for(;void 0!==i;){let e=s(n,i);switch(n=ts(e)?e.value:n,i._tag){case am:case ad:r.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&r.length>0&&(i=r.pop())}return n}),aG=I(3,(e,t,s)=>{let n=[e],i=[];for(;n.length>0;){let e=n.pop();switch(e._tag){case ac:i.push(tF(s.emptyCase(t)));break;case au:i.push(tF(s.failCase(t,e.error)));break;case"Die":i.push(tF(s.dieCase(t,e.defect)));break;case ap:i.push(tF(s.interruptCase(t,e.fiberId)));break;case am:n.push(e.right),n.push(e.left),i.push(tM({_tag:aq}));break;case ad:n.push(e.right),n.push(e.left),i.push(tM({_tag:aK}))}}let r=[];for(;i.length>0;){let e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case aq:{let e=r.pop(),n=r.pop(),i=s.sequentialCase(t,e,n);r.push(i);break}case aK:{let e=r.pop(),n=r.pop(),i=s.parallelCase(t,e,n);r.push(i)}}break;case"Right":r.push(e.right)}}if(0===r.length)throw Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return r.pop()}),aW=e=>{let t=e.split("\n"),s=[];for(let e=0;e<t.length&&(s.push(t[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1")),!t[e].includes("effect_instruction_i"));e++);return s.join("\n")},aH=e=>aT(e)?"All fibers interrupted without errors.":a1(e).map(e=>{let t=e.message;if(e.stack&&(t+=`\r
${aW(e.stack)}`),e.span){let s=e.span,n=0;for(;s&&"Span"===s._tag&&n<10;)t+=`\r
    at ${s.name}`,s=tB(s.parent),n++}return t}).join("\r\n");class aY{message;stack;span;constructor(e,t,s){this.message=e,this.stack=t,this.span=s}toJSON(){let e={message:this.message};return this.stack&&(e.stack=this.stack),this.span&&(e.span=this.span),e}}let aQ=e=>{if("string"==typeof e)return`Error: ${e}`;try{if(Q(e,"toString")&&K(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return`Error: ${JSON.stringify(e)}`},aX=Symbol.for("effect/SpanAnnotation"),a0=e=>{let t=Q(e,aX)&&e[aX];return e instanceof Error?new aY(aQ(e),e.stack?.split("\n").filter(e=>e.match(/at (.*)/)).join("\n"),t):new aY(aQ(e),void 0,t)},a1=e=>aG(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[a0(t)],failCase:(e,t)=>[a0(t)],interruptCase:()=>[],parallelCase:(e,t,s)=>[...t,...s],sequentialCase:(e,t,s)=>[...t,...s]}),a2="Pending",a5="Done",a3=Symbol.for("effect/Deferred"),a4={_E:e=>e,_A:e=>e},a6=e=>({_tag:a2,joiners:e}),a9=e=>({_tag:a5,effect:e});class a8{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new a8(this.self)}}let a7=Symbol.for("effect/Tracer"),oe=ty("effect/Tracer"),ot=ty("effect/ParentSpan"),os=function(){let e="abcdef0123456789",t=e.length;return function(s){let n="";for(let i=0;i<s;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}}();class on{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,s,n,i,r){this.name=e,this.parent=t,this.context=s,this.links=n,this.startTime=i,this.kind=r,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:os(32),this.spanId=os(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,s){this.events.push([e,t,s??{}])}}let oi=Symbol.for("effect/EffectError"),or=e=>Q(e,oi),oa=e=>({[oi]:oi,_tag:"EffectError",cause:e}),oo=(e,t)=>{let s=new op("Blocked");return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s},ol=e=>{let t=new op("RunBlocked");return t.effect_instruction_i0=e,t},oc=Symbol.for("effect/Effect");class ou{patch;op;_op=eH;constructor(e,t){this.patch=e,this.op=t}}class op{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[oc]=e1;constructor(e){this._op=e}[eT](e){return this===e}[ef](){return eE(this,eb(this))}pipe(){return eP(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:eC(this.effect_instruction_i0),effect_instruction_i1:eC(this.effect_instruction_i1),effect_instruction_i2:eC(this.effect_instruction_i2)}}toString(){return eM(this.toJSON())}[eA](){return this.toJSON()}[Symbol.iterator](){return new a8(new ep(this))}}class od{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[oc]=e1;constructor(e){this._op=e,this._tag=e}[eT](e){return ci(e)&&"Failure"===e._op&&eR(this.effect_instruction_i0,e.effect_instruction_i0)}[ef](){return F(ew(this._tag),ex(eg(this.effect_instruction_i0)),eE(this))}get cause(){return this.effect_instruction_i0}pipe(){return eP(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return eM(this.toJSON())}[eA](){return this.toJSON()}[Symbol.iterator](){return new a8(new ep(this))}}class om{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[oc]=e1;constructor(e){this._op=e,this._tag=e}[eT](e){return ci(e)&&"Success"===e._op&&eR(this.effect_instruction_i0,e.effect_instruction_i0)}[ef](){return F(ew(this._tag),ex(eg(this.effect_instruction_i0)),eE(this))}get value(){return this.effect_instruction_i0}pipe(){return eP(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:eC(this.value)}}toString(){return eM(this.toJSON())}[eA](){return this.toJSON()}[Symbol.iterator](){return new a8(new ep(this))}}let oh=e=>Q(e,oc),of=e=>{let t=new op(eG);return t.effect_instruction_i0=e,t},og=I(3,(e,t,s)=>lt(n=>oP(e,e=>oP(oN(o4(()=>n(t(e)))),t=>o4(()=>s(e,t)).pipe(oB({onFailure:e=>{switch(t._tag){case eD:return oC(a_(t.effect_instruction_i0,e));case eq:return oC(e)}},onSuccess:()=>t})))))),ob=I(2,(e,t)=>oP(e,()=>o3(t))),ox=e=>ob(e,void 0),oy=function(){let e=new op(eU);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(ea("you're not supposed to end up here"))}return e},ov=(e,t=iv)=>oy(e,function(){let e,s,n,i;function r(t){e?e(t):void 0===s&&(s=t)}let a=new op(e$);return a.effect_instruction_i0=t=>{e=t,s&&t(s)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(i=new AbortController,n=this.effect_instruction_i0(r,i.signal)):n=this.effect_instruction_i0(r),n||i?oX(a,e=>(i&&i.abort(),n??ls)):a}),o_=I(2,(e,t)=>{let s=new op(ez);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),ow=I(2,(e,t)=>oZ(e,{onFailure:t,onSuccess:o3})),oS=I(3,(e,t,s)=>o_(e,e=>{let n=aA(e);switch(n._tag){case"Left":return t(n.left)?s(n.left):oC(e);case"Right":return oC(n.right)}})),ok=Symbol.for("effect/SpanAnnotation"),oO=Symbol.for("effect/OriginalAnnotation"),oE=(e,t)=>ts(t)?new Proxy(e,{has:(e,t)=>t===ok||t===oO||t in e,get:(s,n)=>n===ok?t.value:n===oO?e:s[n]}):e,oT=e=>!Y(e)||ok in e?oC(ay(e)):of(t=>oC(ay(oE(e,cL(t))))),oR=e=>oM(()=>ay(new l9(e))),oI=e=>oZ(e,{onFailure:e=>o3(tM(e)),onSuccess:e=>o3(tF(e))}),oN=e=>oz(e,{onFailure:cu,onSuccess:cg}),oj=e=>!Y(e)||ok in e?oC(ax(e)):of(t=>oC(ax(oE(e,cL(t))))),oA=e=>oP(o6(e),oj),oC=e=>{let t=new od(eD);return t.effect_instruction_i0=e,t},oM=e=>oP(o6(e),oC),oF=of(e=>o3(e.id())),oL=e=>of(t=>e(t.id())),oP=I(2,(e,t)=>{let s=new op(eB);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),o$=I(2,(e,t)=>oP(e,e=>{let s="function"==typeof t?t(e):t;return oh(s)?s:er(s)?ov(e=>{s.then(t=>e(o3(t)),t=>e(oj(new cn(t))))}):o3(s)})),oU=e=>{let t=new op("OnStep");return t.effect_instruction_i0=e,t},oD=e=>oP(e,N),oz=I(2,(e,t)=>oB(e,{onFailure:e=>o3(t.onFailure(e)),onSuccess:e=>o3(t.onSuccess(e))})),oB=I(2,(e,t)=>{let s=new op(eZ);return s.effect_instruction_i0=e,s.effect_instruction_i1=t.onFailure,s.effect_instruction_i2=t.onSuccess,s}),oZ=I(2,(e,t)=>oB(e,{onFailure:e=>{if(aI(e).length>0)return oC(aL(e));let s=aR(e);return s.length>0?t.onFailure(s4(s)):oC(e)},onSuccess:t.onSuccess})),oq=I(2,(e,t)=>o4(()=>{let s=t3(e),n=t5(s.length),i=0;return ob(lr({while:()=>i<s.length,body:()=>t(s[i],i),step:e=>{n[i++]=e}}),n)})),oK=I(2,(e,t)=>o4(()=>{let s=t3(e),n=0;return lr({while:()=>n<s.length,body:()=>t(s[n],n),step:()=>{n++}})})),oJ=(e=>"boolean"==typeof e[0]||oh(e[0]),e=>oC(av(e))),oV=e=>{let t=new op(eJ);return t.effect_instruction_i0=ao(1),t.effect_instruction_i1=()=>e,t},oG=I(2,(e,t)=>lt(s=>oP(oN(s(e)),e=>cO(t,e)))),oW=I(2,(e,t)=>oP(e,e=>o6(()=>t(e)))),oH=I(2,(e,t)=>oZ(e,{onFailure:e=>oA(()=>t.onFailure(e)),onSuccess:e=>o6(()=>t.onSuccess(e))})),oY=I(2,(e,t)=>oB(e,{onFailure:e=>{let s=aA(e);switch(s._tag){case"Left":return oA(()=>t(s.left));case"Right":return oC(s.right)}},onSuccess:o3})),oQ=((e,t)=>oQ(e,e=>cr(e)?ls:t(e.effect_instruction_i0)),I(2,(e,t)=>lt(s=>oB(s(e),{onFailure:e=>{let s=cu(e);return oB(t(s),{onFailure:t=>cu(aw(e,t)),onSuccess:()=>s})},onSuccess:e=>{let s=cg(e);return lu(t(s),s)}})))),oX=I(2,(e,t)=>oQ(e,ch({onFailure:e=>aT(e)?ox(t(aN(e))):ls,onSuccess:()=>ls}))),o0=I(2,(e,t)=>o7(e,t,o3)),o1=e=>o2(e,N),o2=I(2,(e,t)=>oZ(e,{onFailure:e=>oT(t(e)),onSuccess:o3})),o5=(e,t)=>t3(e).reduceRight(([e,s],n)=>{let i=t(n);switch(i._tag){case"Left":return[[i.left,...e],s];case"Right":return[e,[i.right,...s]]}},[sk(),sk()]),o3=((e,t)=>o3(t.runtimeFlags),e=>{let t=new om(eq);return t.effect_instruction_i0=e,t}),o4=e=>oP(o6(e),N),o6=e=>{let t=new op(eK);return t.effect_instruction_i0=e,t},o9=I(2,(e,t)=>oP(e,e=>{let s="function"==typeof t?t(e):t;return oh(s)?ob(s,e):er(s)?ov(t=>{s.then(s=>t(o3(e)),e=>t(oj(new cn(e))))}):o3(e)})),o8=e=>of(t=>{let s=F(t.getFiberRef(lJ),t$(()=>t.scope()));return e(lR(lJ,ti(s)))}),o7=I(3,(e,t,s)=>oB(e,{onFailure:e=>aI(e).length>0?oC(tq(aM(e))):t(),onSuccess:s})),le=e=>{let t=new op(eJ);return t.effect_instruction_i0=al(1),t.effect_instruction_i1=()=>e,t},lt=e=>oy(e,function(){let e=new op(eJ);return e.effect_instruction_i0=al(1),e.effect_instruction_i1=e=>r8(e)?this.effect_instruction_i0(oV):this.effect_instruction_i0(le),e}),ls=o3(void 0),ln=e=>{let t=new op(eJ);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},li=I(2,(e,t)=>oP(t,t=>t?F(e,oW(ti)):o3(tL()))),lr=e=>{let t=new op(eV);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},la=I(2,(e,t)=>{let s=new op(eJ);return s.effect_instruction_i0=t,s.effect_instruction_i1=()=>e,s}),lo=e=>{let t=new op(eW);return void 0!==e?.priority?lz(t,e.priority):t},ll=I(2,(e,t)=>oP(e,e=>oW(t,t=>[e,t]))),lc=I(2,(e,t)=>oP(e,e=>ob(t,e))),lu=I(2,(e,t)=>oP(e,()=>t)),lp=I(3,(e,t,s)=>oP(e,e=>oW(t,t=>s(e,t)))),ld=(()=>{let e=setInterval(()=>{},2147483648-1);return o6(()=>clearInterval(e))},e=>oP(oF,t=>F(e,lm(t)))),lm=I(2,(e,t)=>oP(e.interruptAsFork(t),()=>e.await)),lh={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return eP(this,arguments)}},lf={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return eP(this,arguments)}},lg={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return eP(this,arguments)}},lb={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return eP(this,arguments)}},lx=Symbol.for("effect/FiberRef"),ly={_A:e=>e},lv=e=>lS(e,e=>[e,e]),l_=I(2,(e,t)=>oP(lv(e),t)),lw=I(2,(e,t)=>lS(e,()=>[void 0,t])),lS=I(2,(e,t)=>of(s=>{let[n,i]=t(s.getFiberRef(e));return s.setFiberRef(e,i),o3(n)})),lk=Symbol.for("effect/RequestResolver"),lO={_A:e=>e,_R:e=>e};class lE{runAll;target;[lk]=lO;constructor(e,t){this.runAll=e,this.target=t,this.runAll=e}[ef](){return eE(this,this.target?eg(this.target):eb(this))}[eT](e){return this.target?lT(e)&&eR(this.target,e.target):this===e}identified(...e){return new lE(this.runAll,sq(e))}pipe(){return eP(this,arguments)}}let lT=e=>Q(e,lk),lR=I(3,(e,t,s)=>og(lc(lv(t),lw(t,s)),()=>e,e=>lw(t,e))),lI=I(3,(e,t,s)=>l_(t,n=>lR(e,t,s(n)))),lN=(e,t)=>lM(e,{differ:rH(),fork:t?.fork??N,join:t?.join}),lj=e=>{let t=rG();return lM(e,{differ:t,fork:t.empty})},lA=e=>{let t=rW(rH());return lM(e,{differ:t,fork:t.empty})},lC=e=>{let t=rV();return lM(e,{differ:t,fork:t.empty})},lM=(e,t)=>({[lx]:ly,initial:e,diff:(e,s)=>t.differ.diff(e,s),combine:(e,s)=>t.differ.combine(e,s),patch:e=>s=>t.differ.patch(e,s),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return eP(this,arguments)}}),lF=U(Symbol.for("effect/FiberRef/currentContext"),()=>lC(t_())),lL=U(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>lN(0)),lP=U(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>lN(2048)),l$=U(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>lN(ny())),lU=U(Symbol.for("effect/FiberRef/currentLogLevel"),()=>lN(lf)),lD=U(Symbol.for("effect/FiberRef/currentLogSpan"),()=>lN(iP())),lz=I(2,(e,t)=>lR(e,lL,t)),lB=U(Symbol.for("effect/FiberRef/currentConcurrency"),()=>lN("unbounded")),lZ=U(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>lN(!0)),lq=U(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>lN(ti(lg))),lK=U(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>lA(sk())),lJ=U(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>lN(tL(),{fork:()=>tL(),join:(e,t)=>e})),lV=U(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>lN(ab,{fork:()=>ab,join:(e,t)=>e})),lG=U(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>lN(!0)),lW=U(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>lN(!0)),lH=U(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>lN(ny())),lY=U(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>lN(sz())),lQ=Symbol.for("effect/Scope"),lX=Symbol.for("effect/CloseableScope"),l0=(e,t)=>e.addFinalizer(()=>ox(t)),l1=(e,t)=>e.addFinalizer(t),l2=(e,t)=>e.close(t),l5=(e,t)=>e.fork(t),l3=function(){class e extends globalThis.Error{commit(){return oj(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eA](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,e3),e}(),l4=(e,t)=>{class s extends l3{_tag=t}return Object.assign(s.prototype,e),s.prototype.name=t,s},l6=Symbol.for("effect/Cause/errors/RuntimeException"),l9=l4({[l6]:l6},"RuntimeException"),l8=Symbol.for("effect/Cause/errors/InterruptedException"),l7=e=>Q(e,l8),ce=Symbol.for("effect/Cause/errors/NoSuchElement"),ct=l4({[ce]:ce},"NoSuchElementException"),cs=Symbol.for("effect/Cause/errors/UnknownException"),cn=function(){class e extends l3{error;_tag="UnknownException";constructor(e,t){super(t??(Q(e,"message")&&D(e.message)?e.message:void 0)),this.error=e}}return Object.assign(e.prototype,{[cs]:cs,name:"UnknownException"}),e}(),ci=e=>oh(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),cr=e=>"Success"===e._tag,ca=I(2,(e,t)=>{switch(e._tag){case eD:return cu(e.effect_instruction_i0);case eq:return cg(t)}}),co=e=>ca(e,void 0),cl=(e,t)=>cy(e,t?.parallel?a_:aw),cc=e=>cu(ax(e)),cu=e=>{let t=new od(eD);return t.effect_instruction_i0=e,t},cp=((e,t)=>{switch(e._tag){case eD:return cu(e.effect_instruction_i0);case eq:return t(e.effect_instruction_i0)}},I(2,(e,t)=>{switch(e._tag){case eD:return o3(cu(e.effect_instruction_i0));case eq:return oN(t(e.effect_instruction_i0))}})),cd=e=>cu(av(e)),cm=I(2,(e,t)=>{switch(e._tag){case eD:return cu(e.effect_instruction_i0);case eq:return cg(t(e.effect_instruction_i0))}}),ch=I(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eD:return t(e.effect_instruction_i0);case eq:return s(e.effect_instruction_i0)}}),cf=I(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eD:return t(e.effect_instruction_i0);case eq:return s(e.effect_instruction_i0)}}),cg=e=>{let t=new om(eq);return t.effect_instruction_i0=e,t},cb=cg(void 0),cx=I(3,(e,t,{onFailure:s,onSuccess:n})=>{switch(e._tag){case eD:switch(t._tag){case eq:return cu(e.effect_instruction_i0);case eD:return cu(s(e.effect_instruction_i0,t.effect_instruction_i0))}case eq:switch(t._tag){case eq:return cg(n(e.effect_instruction_i0,t.effect_instruction_i0));case eD:return cu(t.effect_instruction_i0)}}}),cy=(e,t)=>{let s=sq(e);return s5(s)?F(s6(s),sI(F(s4(s),cm(sZ)),(e,s)=>F(e,cx(s,{onSuccess:(e,t)=>F(e,sX(t)),onFailure:t}))),cm(sV),cm(e=>sJ(e)),ti):tL()},cv=e=>({[a3]:a4,state:n6(a6([])),blockingOn:e,pipe(){return eP(this,arguments)}}),c_=()=>oP(oF,e=>cw(e)),cw=e=>o6(()=>cv(e)),cS=e=>ov(t=>{let s=n8(e.state);switch(s._tag){case a5:return t(s.effect);case a2:return s.joiners.push(t),cI(e,t)}},e.blockingOn),ck=I(2,(e,t)=>o6(()=>{let s=n8(e.state);switch(s._tag){case a5:return!1;case a2:n7(e.state,a9(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t);return!0}})),cO=I(2,(e,t)=>ck(e,t)),cE=I(2,(e,t)=>ck(e,oC(t))),cT=I(2,(e,t)=>ck(e,o3(t))),cR=(e,t)=>{let s=n8(e.state);if(s._tag===a2){n7(e.state,a9(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t)}},cI=(e,t)=>o6(()=>{let s=n8(e.state);if(s._tag===a2){let e=s.joiners.indexOf(t);e>=0&&s.joiners.splice(e,1)}}),cN=lv(lF),cj=()=>cN,cA=e=>oP(cj(),e),cC=I(2,(e,t)=>lR(lF,t)(e)),cM=I(2,(e,t)=>lI(lF,e=>tx(e,t))(e)),cF=I(2,(e,t)=>cA(s=>cC(e,t(s)))),cL=e=>{let t=e.getFiberRef(lF).unsafeMap.get(ot.key);return void 0!==t&&"Span"===t._tag?ti(t):tL()},cP={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:tL(),context:t_(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:cb},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},c$=e=>{let t=Object.create(cP);return t.name=e,t},cU=Symbol.for("effect/Duration"),cD=BigInt(0),cz=BigInt(24),cB=BigInt(60),cZ=BigInt(1e3),cq=BigInt(1e6),cK=BigInt(1e9),cJ=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,cV=e=>{if(cQ(e))return e;if(z(e))return c2(e);if(Z(e))return c0(e);if(Array.isArray(e)){if(2===e.length&&z(e[0])&&z(e[1]))return c0(BigInt(e[0])*cK+BigInt(e[1]))}else if(D(e)){cJ.lastIndex=0;let t=cJ.exec(e);if(t){let[e,s,n]=t,i=Number(s);switch(n){case"nano":case"nanos":return c0(BigInt(s));case"micro":case"micros":return c1(BigInt(s));case"milli":case"millis":return c2(i);case"second":case"seconds":return c5(i);case"minute":case"minutes":return c3(i);case"hour":case"hours":return c4(i);case"day":case"days":return c6(i);case"week":case"weeks":return c9(i)}}}throw Error("Invalid DurationInput")},cG={_tag:"Millis",millis:0},cW={_tag:"Infinity"},cH={[cU]:cU,[ef](){return eE(this,ek(this.value))},[eT](e){return cQ(e)&&ul(this,e)},toString(){return`Duration(${uc(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:ue(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[eA](){return this.toJSON()},pipe(){return eP(this,arguments)}},cY=e=>{let t=Object.create(cH);return z(e)?isNaN(e)||e<=0?t.value=cG:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=cW:e<=cD?t.value=cG:t.value={_tag:"Nanos",nanos:e},t},cQ=e=>Q(e,cU),cX=cY(0),c0=e=>cY(e),c1=e=>cY(e*cZ),c2=e=>cY(e),c5=e=>cY(1e3*e),c3=e=>cY(6e4*e),c4=e=>cY(36e5*e),c6=e=>cY(864e5*e),c9=e=>cY(6048e5*e),c8=e=>{let t=cV(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},c7=e=>{let t=cV(e);switch(t.value._tag){case"Infinity":throw Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},ue=e=>{let t=cV(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/cK),Number(t.value.nanos%cK)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},ut=I(2,(e,t)=>{let s=cV(e);switch(s.value._tag){case"Nanos":return t.onNanos(s.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(s.value.millis)}}),us=I(3,(e,t,s)=>{let n=cV(e),i=cV(t);if("Infinity"===n.value._tag||"Infinity"===i.value._tag)return s.onMillis(c8(n),c8(i));if("Nanos"===n.value._tag||"Nanos"===i.value._tag){let e="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return s.onNanos(e,t)}return s.onMillis(n.value.millis,i.value.millis)}),un=(e,t)=>us(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),ui=I(2,(e,t)=>ut(e,{onMillis:e=>cY(e*t),onNanos:e=>cY(e*BigInt(t))})),ur=I(2,(e,t)=>us(e,t,{onMillis:(e,t)=>cY(e+t),onNanos:(e,t)=>cY(e+t)})),ua=((e,t)=>us(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}),I(2,(e,t)=>us(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),uo=I(2,(e,t)=>us(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),ul=I(2,(e,t)=>un(cV(e),cV(t))),uc=e=>{let t=cV(e),s=[];if("Infinity"===t.value._tag)return"Infinity";let n=c7(t);n%cq&&s.push(`${n%cq}ns`);let i=n/cq;i%cZ!==cD&&s.push(`${i%cZ}ms`);let r=i/cZ;r%cB!==cD&&s.push(`${r%cB}s`);let a=r/cB;a%cB!==cD&&s.push(`${a%cB}m`);let o=a/cB;o%cz!==cD&&s.push(`${o%cz}h`);let l=o/cz;return l!==cD&&s.push(`${l}d`),s.reverse().join(" ")},uu=Symbol.for("effect/Clock"),up=ty("effect/Clock"),ud=2147483648-1,um={unsafeSchedule(e,t){let s=c8(t);if(s>ud)return C;let n=!1,i=setTimeout(()=>{n=!0,e()},s);return()=>(clearTimeout(i),!n)}},uh=function(){let e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;let t="timeOrigin"in performance&&"number"==typeof performance.timeOrigin?BigInt(Math.round(1e6*performance.timeOrigin)):BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),uf=function(){let e="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!e)return uh;let t=uh()-e.bigint();return()=>t+e.bigint()}();class ug{[uu]=uu;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return uf()}currentTimeMillis=o6(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=o6(()=>this.unsafeCurrentTimeNanos());scheduler(){return o3(um)}sleep(e){return ov(t=>ox(o6(um.unsafeSchedule(()=>t(ls),e))))}}let ub=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),ux="InvalidData",uy="MissingData",uv="SourceUnavailable",u_="Unsupported",uw=Symbol.for("effect/ConfigError"),uS={_tag:"ConfigError",[uw]:uw},uk=(e,t)=>{let s=Object.create(uS);return s._op="And",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),s},uO=(e,t)=>{let s=Object.create(uS);return s._op="Or",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),s},uE=(e,t,s={pathDelim:"."})=>{let n=Object.create(uS);return n._op=ux,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=F(this.path,sC(s.pathDelim));return`(Invalid data at ${e}: "${this.message}")`}}),n},uT=(e,t,s={pathDelim:"."})=>{let n=Object.create(uS);return n._op=uy,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=F(this.path,sC(s.pathDelim));return`(Missing data at ${e}: "${this.message}")`}}),n},uR=(e,t,s,n={pathDelim:"."})=>{let i=Object.create(uS);return i._op=uv,i.path=e,i.message=t,i.cause=s,Object.defineProperty(i,"toString",{enumerable:!1,value(){let e=F(this.path,sC(n.pathDelim));return`(Source unavailable at ${e}: "${this.message}")`}}),i},uI=(e,t,s={pathDelim:"."})=>{let n=Object.create(uS);return n._op=u_,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=F(this.path,sC(s.pathDelim));return`(Unsupported operation at ${e}: "${this.message}")`}}),n},uN=I(2,(e,t)=>{switch(e._op){case"And":return uk(uN(e.left,t),uN(e.right,t));case"Or":return uO(uN(e.left,t),uN(e.right,t));case ux:return uE([...t,...e.path],e.message);case uy:return uT([...t,...e.path],e.message);case uv:return uR([...t,...e.path],e.message,e.cause);case u_:return uI([...t,...e.path],e.message)}}),uj={_tag:"Empty"},uA=I(2,(e,t)=>{let s=i$(t),n=e;for(;iF(s);){let e=s.head;switch(e._tag){case"Empty":s=s.tail;break;case"AndThen":s=iL(e.first,iL(e.second,s.tail));break;case"MapName":n=sE(n,e.f),s=s.tail;break;case"Nested":n=t6(n,e.name),s=s.tail;break;case"Unnested":if(!F(sa(n),tH(e.name)))return tM(uT(n,`Expected ${e.name} to be in path in ConfigProvider#unnested`));n=su(n),s=s.tail}}return tF(n)}),uC=(e,t)=>[...e,...t],uM=Symbol.for("effect/ConfigProvider"),uF=ty("effect/ConfigProvider"),uL=Symbol.for("effect/ConfigProviderFlat"),uP=e=>({[uM]:uM,pipe(){return eP(this,arguments)},...e}),u$=e=>({[uL]:uL,patch:e.patch,load:(t,s,n=!0)=>e.load(t,s,n),enumerateChildren:e.enumerateChildren}),uU=e=>uP({load:t=>oP(uB(e,sk(),t,!1),e=>tP(sa(e),{onNone:()=>oj(uT(sk(),`Expected a single value having structure: ${t}`)),onSome:o3})),flattened:e}),uD=(e,t,s,n)=>{let i=sN(s.length,t=>t>=n.length?tL():ti([e(t),t+1])),r=sN(n.length,e=>e>=s.length?tL():ti([t(e),e+1]));return[uC(s,i),uC(n,r)]},uz=(e,t)=>{let s=t;if("Nested"===s._tag){let t=e.slice();for(;"Nested"===s._tag;)t.push(s.name),s=s.config;return t}return e},uB=(e,t,s,n)=>{switch(s._tag){case"Constant":return o3(sO(s.value));case"Described":return o4(()=>uB(e,t,s.config,n));case"Fail":return oj(uT(t,s.message));case"Fallback":return F(o4(()=>uB(e,t,s.first,n)),ow(i=>s.condition(i)?F(uB(e,t,s.second,n),ow(e=>oj(uO(i,e)))):oj(i)));case"Lazy":return o4(()=>uB(e,t,s.config(),n));case"MapOrFail":return o4(()=>F(uB(e,t,s.original,n),oP(oq(e=>F(s.mapOrFail(e),oY(uN(uz(t,s.original))))))));case"Nested":return o4(()=>uB(e,uC(t,sO(s.name)),s.config,n));case"Primitive":return F(uA(t,e.patch),oP(t=>F(e.load(t,s,n),oP(e=>{if(0===e.length){let e=F(sl(t),t$(()=>"<n/a>"));return oj(uT([],`Expected ${s.description} with name ${e}`))}return o3(e)}))));case"Sequence":return F(uA(t,e.patch),oP(n=>F(e.enumerateChildren(n),oP(uV),oP(i=>0===i.length?o4(()=>oW(uB(e,n,s.config,!0),sO)):F(oq(i,n=>uB(e,t9(t,`[${n}]`),s.config,!0)),oW(e=>{let t=sR(e);return 0===t.length?sO(sk()):sO(t)}))))));case"HashMap":return o4(()=>F(uA(t,e.patch),oP(t=>F(e.enumerateChildren(t),oP(i=>F(i,oq(i=>uB(e,uC(t,sO(i)),s.valueConfig,n)),oW(e=>0===e.length?sO(ny()):F(uJ(e),sE(e=>ik(sg(t3(i),e)))))))))));case"ZipWith":return o4(()=>F(uB(e,t,s.left,n),oI,oP(i=>F(uB(e,t,s.right,n),oI,oP(e=>{if(tA(i)&&tA(e))return oj(uk(i.left,e.left));if(tA(i)&&tC(e))return oj(i.left);if(tC(i)&&tA(e))return oj(e.left);if(tC(i)&&tC(e)){let n=F(t,sC(".")),r=uZ(t,n),[a,o]=uD(r,r,F(i.right,sE(tF)),F(e.right,sE(tF)));return F(a,sg(o),oq(([e,t])=>F(ll(e,t),oW(([e,t])=>s.zip(e,t)))))}throw Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},uZ=(e,t)=>s=>tM(uT(e,`The element at index ${s} in a sequence at path "${t}" was missing`)),uq=(e,t)=>e.split(RegExp(`\\s*${ub(t)}\\s*`)),uK=(e,t,s,n,i)=>i?F(uq(e,n),oq(e=>s.parse(e.trim())),oY(uN(t))):F(s.parse(e),oH({onFailure:uN(t),onSuccess:sO})),uJ=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),uV=e=>F(oq(e,uW),oH({onFailure:()=>sk(),onSuccess:sf(tX)}),oI,oW(s9)),uG=/^(\[(\d+)\])$/,uW=e=>{let t=e.match(uG);if(null!==t){let e=t[2];return F(void 0!==e&&e.length>0?ti(e):tL(),tJ(uH))}return tL()},uH=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?tL():ti(t)},uY=Symbol.for("effect/Console"),uQ=ty("effect/Console"),uX={[uY]:uY,assert:(e,...t)=>o6(()=>{console.assert(e,...t)}),clear:o6(()=>{console.clear()}),count:e=>o6(()=>{console.count(e)}),countReset:e=>o6(()=>{console.countReset(e)}),debug:(...e)=>o6(()=>{console.debug(...e)}),dir:(e,t)=>o6(()=>{console.dir(e,t)}),dirxml:(...e)=>o6(()=>{console.dirxml(...e)}),error:(...e)=>o6(()=>{console.error(...e)}),group:e=>e?.collapsed?o6(()=>console.groupCollapsed(e?.label)):o6(()=>console.group(e?.label)),groupEnd:o6(()=>{console.groupEnd()}),info:(...e)=>o6(()=>{console.info(...e)}),log:(...e)=>o6(()=>{console.log(...e)}),table:(e,t)=>o6(()=>{console.table(e,t)}),time:e=>o6(()=>console.time(e)),timeEnd:e=>o6(()=>console.timeEnd(e)),timeLog:(e,...t)=>o6(()=>{console.timeLog(e,...t)}),trace:(...e)=>o6(()=>{console.trace(...e)}),warn:(...e)=>o6(()=>{console.warn(...e)}),unsafe:console},u0=Symbol.for("effect/Random"),u1=ty("effect/Random");class u2{seed;[u0]=u0;PRNG;constructor(e){this.seed=e,this.PRNG=new el(e)}get next(){return o6(()=>this.PRNG.number())}get nextBoolean(){return oW(this.next,e=>e>.5)}get nextInt(){return o6(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,t){return oW(this.next,s=>(t-e)*s+e)}nextIntBetween(e,t){return o6(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return u5(e,e=>this.nextIntBetween(0,e))}}let u5=(e,t)=>o4(()=>F(o6(()=>Array.from(e)),oP(e=>{let s=[];for(let t=e.length;t>=2;t-=1)s.push(t);return F(s,oK(s=>F(t(s),oW(t=>u3(e,s-1,t)))),ob(sq(e)))}))),u3=(e,t,s)=>{let n=e[t];return e[t]=e[s],e[s]=n,e},u4=F(t_(),tf(up,new ug),tf(uQ,uX),tf(u1,new u2(4294967296*Math.random()>>>0)),tf(uF,(e=>{let{pathDelim:t,seqDelim:s}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=e=>F(e,sC(t)),i=e=>e.split(t),r=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return uU(u$({load:(e,t,i=!0)=>{let a=n(e),o=r();return F(a in o?ti(o[a]):tL(),oY(()=>uT(e,`Expected ${a} to exist in the process context`)),oP(n=>uK(n,e,t,s,i)))},enumerateChildren:e=>o6(()=>n1(Object.keys(r()).map(e=>i(e.toUpperCase())).filter(t=>{for(let s=0;s<e.length;s++){let n=F(e,sr(s)),i=t[s];if(void 0===i||n!==i)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:uj}))})()),tf(oe,{[a7]:a7,span:(e,t,s,n,i,r)=>new on(e,t,s,n,i,r),context:e=>e()})),u6=U(Symbol.for("effect/DefaultServices/currentServices"),()=>lC(u4)),u9=e=>l_(u6,t=>e(tg(t,up))),u8=u9(e=>e.currentTimeMillis);r=e=>e.next,l_(u6,e=>r(tg(e,u1)));let u7=e=>oP(oF,t=>ck(e,oJ(t))),pe="Sequential",pt="Parallel",ps={_tag:pe},pn=e=>e._tag===pe,pi=e=>e._tag===pt,pr={_tag:pt},pa=e=>({_tag:"ParallelN",parallelism:e}),po=Symbol.for("effect/FiberRefs");class pl{locals;[po]=po;constructor(e){this.locals=e}pipe(){return eP(this,arguments)}}let pc=(e,t,s,n=!1)=>{let i,r=t,a=s,o=n;for(;void 0===i;)if(st(r)&&st(a)){let e=so(r)[0],t=su(r),s=so(a)[0],n=so(a)[1],l=su(a);e.startTimeMillis<s.startTimeMillis?(a=l,o=!0):e.startTimeMillis>s.startTimeMillis?r=t:e.id<s.id?(a=l,o=!0):e.id>s.id?r=t:i=[n,o]}else i=[e.initial,!0];return i},pu=I(3,(e,t,s)=>{let n=new Map(e.locals);return s.locals.forEach((e,s)=>{let i=e[0][1];if(!e[0][0][eT](t)){if(!n.has(s)){if(eR(i,s.initial))return;n.set(s,[[t,s.join(s.initial,i)]]);return}let r=n.get(s),[a,o]=pc(s,r,e);if(o){let e=s.diff(a,i),o=r[0][1],l=s.join(o,s.patch(e)(o));if(!eR(o,l)){let e;let i=r[0][0];e=i[eT](t)?[[i,l],...r.slice(1)]:[[t,l],...r],n.set(s,e)}}}}),new pl(n)}),pp=I(2,(e,t)=>{let s=new Map;return pd(e,s,t),new pl(s)}),pd=(e,t,s)=>{e.locals.forEach((e,n)=>{let i=e[0][1],r=n.patch(n.fork)(i);eR(i,r)?t.set(n,e):t.set(n,[[s,r],...e])})},pm=I(2,(e,t)=>{let s=new Map(e.locals);return s.delete(t),new pl(s)}),ph=I(2,(e,t)=>e.locals.has(t)?ti(so(e.locals.get(t))[1]):tL()),pf=I(2,(e,t)=>F(ph(e,t),t$(()=>t.initial))),pg=I(2,(e,{fiberId:t,fiberRef:s,value:n})=>{if(0===e.locals.size)return new pl(new Map([[s,[[t,n]]]]));let i=new Map(e.locals);return pb(i,t,s,n),new pl(i)}),pb=(e,t,s,n)=>{let i;let r=e.get(s)??[];if(st(r)){let[e,s]=so(r);if(e[eT](t)){if(eR(s,n))return;i=[[t,n],...r.slice(1)]}else i=[[t,n],...r]}else i=[[t,n]];e.set(s,i)},px=I(2,(e,{entries:t,forkAs:s})=>{if(0===e.locals.size)return new pl(new Map(t));let n=new Map(e.locals);return void 0!==s&&pd(e,n,s),t.forEach(([e,t])=>{1===t.length?pb(n,t[0][0],e,t[0][1]):t.forEach(([t,s])=>{pb(n,t,e,s)})}),new pl(n)}),py="Empty",pv="Remove",p_="Update",pw="AndThen",pS={_tag:py},pk=(e,t)=>{let s=new Map(e.locals),n=pS;for(let[e,i]of t.locals.entries()){let t=so(i)[1],r=s.get(e);if(void 0!==r){let s=so(r)[1];eR(s,t)||(n=pO({_tag:p_,fiberRef:e,patch:e.diff(s,t)})(n))}else n=pO({_tag:"Add",fiberRef:e,value:t})(n);s.delete(e)}for(let[e]of s.entries())n=pO({_tag:pv,fiberRef:e})(n);return n},pO=I(2,(e,t)=>({_tag:pw,first:e,second:t})),pE=I(3,(e,t,s)=>{let n=s,i=sO(e);for(;st(i);){let e=so(i),s=su(i);switch(e._tag){case py:i=s;break;case"Add":n=pg(n,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=s;break;case pv:n=pm(n,e.fiberRef),i=s;break;case p_:{let r=pf(n,e.fiberRef);n=pg(n,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),i=s;break}case pw:i=t6(e.first)(t6(e.second)(s))}}return n}),pT="effect/FiberStatus",pR=Symbol.for(pT),pI="Done",pN="Running",pj="Suspended",pA=ew(`${pT}-${pI}`);class pC{[pR]=pR;_tag=pI;[ef](){return pA}[eT](e){return pP(e)&&e._tag===pI}}class pM{runtimeFlags;[pR]=pR;_tag=pN;constructor(e){this.runtimeFlags=e}[ef](){return F(eg(pT),ex(eg(this._tag)),ex(eg(this.runtimeFlags)),eE(this))}[eT](e){return pP(e)&&e._tag===pN&&this.runtimeFlags===e.runtimeFlags}}class pF{runtimeFlags;blockingOn;[pR]=pR;_tag=pj;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[ef](){return F(eg(pT),ex(eg(this._tag)),ex(eg(this.runtimeFlags)),ex(eg(this.blockingOn)),eE(this))}[eT](e){return pP(e)&&e._tag===pj&&this.runtimeFlags===e.runtimeFlags&&eR(this.blockingOn,e.blockingOn)}}let pL=new pC,pP=e=>Q(e,pR),p$=e=>new pM(e),pU=(e,t)=>new pF(e,t),pD=e=>e._tag===pI,pz={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return eP(this,arguments)}},pB={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return eP(this,arguments)}},pZ={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return eP(this,arguments)}},pq={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return eP(this,arguments)}},pK=(a=F(tX,t0(e=>e.ordinal)),I(2,(e,t)=>1===a(e,t))),pJ=e=>{switch(e){case"All":return lh;case"Debug":return lg;case"Error":return pB;case"Fatal":return pz;case"Info":return lf;case"Trace":return pq;case"None":return lb;case"Warning":return pZ}},pV=Symbol.for("effect/Readable"),pG=Symbol.for("effect/Ref"),pW={_A:e=>e};class pH{ref;[pG]=pW;[pV];constructor(e){this.ref=e,this[pV]=pV,this.get=o6(()=>n8(this.ref))}get;modify(e){return o6(()=>{let t=n8(this.ref),[s,n]=e(t);return t!==n&&n7(n)(this.ref),s})}pipe(){return eP(this,arguments)}}let pY=e=>new pH(n6(e)),pQ=e=>o6(()=>pY(e)),pX=e=>e.get,p0=I(2,(e,t)=>e.modify(()=>[void 0,t])),p1=I(2,(e,t)=>e.modify(t)),p2=I(2,(e,t)=>e.modify(e=>[void 0,t(e)]));class p5{buckets=[];scheduleTask(e,t){let s,n;for(s=0;s<this.buckets.length;s++)if(this.buckets[s][0]<=t)n=this.buckets[s];else break;if(n)n[1].push(e);else{let n=[];for(let e=0;e<s;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=s;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}}class p3{maxNextTickBeforeTimer;running=!1;tasks=new p5;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;for(let[e,s]of(this.tasks.buckets=[],t))for(let e=0;e<s.length;e++)s[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(lP)&&e.getFiberRef(lL)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}let p4=U(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new p3(2048));class p6{tasks=new p5;deferred=!1;scheduleTask(e,t){this.deferred?p4.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(lP)&&e.getFiberRef(lL)}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;for(let[t,s]of(this.tasks.buckets=[],e))for(let e=0;e<s.length;e++)s[e]()}this.deferred=!0}}let p9=U(Symbol.for("effect/FiberRef/currentScheduler"),()=>lN(p4)),p8=(e,t)=>({_tag:"Par",left:e,right:t}),p7=(e,t)=>({_tag:"Seq",left:e,right:t}),de=e=>{let t=i$(e),s=iP();for(;;){let[e,n]=iB(t,[dc(),iP()],([e,t],s)=>{let[n,i]=dt(s);return[dp(e,n),iU(t,i)]});if(s=ds(s,e),iM(n))return iZ(s);t=n}throw Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},dt=e=>{let t=e,s=dc(),n=iP(),i=iP();for(;;)switch(t._tag){case"Empty":if(iM(n))return[s,i];t=n.head,n=n.tail;break;case"Par":n=iL(t.right,n),t=t.left;break;case"Seq":{let e=t.left,s=t.right;switch(e._tag){case"Empty":t=s;break;case"Par":{let n=e.left,i=e.right;t=p8(p7(n,s),p7(i,s));break}case"Seq":t=p7(e.left,p7(e.right,s));break;case"Single":t=e,i=iL(s,i)}break}case"Single":if(s=du(s,t),iM(n))return[s,i];t=n.head,n=n.tail}throw Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},ds=(e,t)=>{if(iM(e))return i$(dh(t));if(dd(t))return e;let s=dv(e.head),n=dm(t);return 1===s.length&&1===n.length&&eR(s[0],n[0])?iL(dy(e.head,dh(t)),e.tail):iL(dh(t),e)},dn=Symbol.for("effect/RequestBlock/Entry"),di={_R:e=>e},dr=Symbol.for("effect/RequestBlock/RequestBlockParallel"),da={_R:e=>e};class dl{map;[dr]=da;constructor(e){this.map=e}}let dc=()=>new dl(ny()),du=(e,t)=>new dl(nN(e.map,t.dataSource,e=>tD(tK(e,sQ(t.blockedRequest)),()=>sZ(t.blockedRequest)))),dp=(e,t)=>new dl(nF(e.map,t.map,(e,t,s)=>nk(e,s,tP(n_(e,s),{onNone:()=>t,onSome:e=>s1(t,e)})))),dd=e=>iO(e.map),dm=e=>Array.from(nE(e.map)),dh=e=>dx(nC(e.map,e=>sZ(e))),df=Symbol.for("effect/RequestBlock/RequestBlockSequential"),dg={_R:e=>e};class db{map;[df]=dg;constructor(e){this.map=e}}let dx=e=>new db(e),dy=(e,t)=>new db(nF(t.map,e.map,(e,t,s)=>nk(e,s,tP(n_(e,s),{onNone:()=>sz(),onSome:e=>s1(e,t)})))),dv=e=>Array.from(nE(e.map)),d_=e=>Array.from(e.map),dw=U(Symbol.for("effect/FiberRef/currentRequestMap"),()=>lN(new Map)),dS=(e,t,s,n)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return l_(lB,e=>"unbounded"===e?s():e>1?n(e):t());default:return e>1?n(e):t()}},dk=(e,t,s)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return l_(lB,e=>"unbounded"===e||e>1?s():t());default:return e>1?s():t()}},dO=e=>{let t=cV(e);return u9(e=>e.sleep(t))},dE=e=>t=>{let s=t.label.replace(/[\s="]/g,"_");return`${s}=${e-t.startTime}ms`},dT="effect/MetricLabel",dR=Symbol.for(dT);class dI{key;value;[dR]=dR;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=ew(dT+this.key+this.value)}[ef](){return this._hash}[eT](e){return dj(e)&&this.key===e.key&&this.value===e.value}pipe(){return eP(this,arguments)}}let dN=(e,t)=>new dI(e,t),dj=e=>Q(e,dR),dA=e=>{let t,s;return"function"==typeof e?t=e:(t=e.try,s=e.catch),o6(()=>{try{return t()}catch(e){throw oa(ax(s?s(e):new cn(e)))}})},dC=I(3,(e,t,s)=>oS(e,X(t),s)),dM=I(2,(e,t)=>{let s;return oS(e,e=>(s??=Object.keys(t),Q(e,"_tag")&&D(e._tag)&&s.includes(e._tag)),e=>t[e._tag](e))}),dF=e=>dW(e,d$,pk),dL=I(3,(e,t,s)=>oP(e,e=>t(e)?o3(e):s(e))),dP=I(e=>oh(e[0]),(e,t,s)=>dL(e,t,e=>void 0===s?oj(new ct):oA(()=>s(e)))),d$=of(e=>o3(e.getFiberRefs())),dU=e=>(...t)=>{let s;let n=tz(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];aS(n)&&(s=void 0!==s?aw(s,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return 0===t.length?t="":1===t.length&&(t=t[0]),void 0===s&&(s=ab),of(e=>(e.log(t,s,n),ls))},dD=dU(lg),dz=dU(lf),dB=dU(pZ),dZ=dU(pB),dq=I(2,(e,t)=>oB(e,{onFailure:e=>oM(()=>t(e)),onSuccess:o3})),dK=e=>oW(e,e=>!e),dJ=e=>dQ((t,s)=>F(e,pE(t,s))),dV=I(3,(e,t,s)=>cA(n=>cC(e,tf(n,t,s)))),dG=I(3,(e,t,s)=>cA(n=>oP(s,s=>cC(e,F(n,tf(t,s)))))),dW=I(3,(e,t,s)=>oP(t,n=>oP(e,e=>oW(t,t=>[s(n,t),e])))),dH=I(2,(e,t)=>oB(e,{onFailure:e=>{let s=aA(e);switch(s._tag){case"Left":return lu(t(s.left),oC(e));case"Right":return oC(e)}},onSuccess:o3})),dY=e=>{let t,s;return("function"==typeof e?t=e:(t=e.try,s=e.catch),t.length>=1)?ov((e,n)=>{try{t(n).then(t=>e(cg(t)),t=>e(oj(s?s(t):new cn(t))))}catch(t){e(oj(s?s(t):new cn(t)))}}):ov(e=>{try{t().then(t=>e(cg(t)),t=>e(oj(s?s(t):new cn(t))))}catch(t){e(oj(s?s(t):new cn(t)))}})},dQ=e=>of(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),ls)),dX=I(2,(e,t)=>o4(()=>t()?oW(e,ti):o3(tL()))),d0=BigInt(0),d1=(e,t,s)=>{if(!1===e.getFiberRef(lG))return c$(t);let n=e.getFiberRef(lF),i=e.getFiberRef(u6),r=tg(i,oe),a=tg(i,up),o=e.getFiberRef(lW),l=e.getFiberRefs(),c=ph(l,lH),u=ph(l,lY),p=s?.parent?ti(s.parent):s?.root?tL():tb(n,ot),d="Some"===u._tag?s?.links!==void 0?[...sJ(u.value),...s?.links??[]]:sJ(u.value):s?.links??sk(),m=r.span(t,p,s?.context??t_(),d,o?a.unsafeCurrentTimeNanos():d0,s?.kind??"internal");return"Some"===c._tag&&nM(c.value,(e,t)=>m.attribute(t,e)),s?.attributes!==void 0&&Object.entries(s.attributes).forEach(([e,t])=>m.attribute(e,t)),m},d2=(e,...t)=>{let s=1===t.length?void 0:t[0],n=t[t.length-1];return of(t=>{let i=d1(t,e,s),r=t.getFiberRef(lW),a=tg(t.getFiberRef(u6),up);return oQ(n(i),e=>o6(()=>{"Ended"!==i.status._tag&&i.end(r?a.unsafeCurrentTimeNanos():d0,e)}))})},d5=I(2,(e,t)=>dV(e,ot,t)),d3=I(e=>"string"!=typeof e[0],(e,t,s)=>d2(t,s??{},t=>d5(e,t))),d4="InterruptSignal",d6="Stateful",d9="Resume",d8="YieldNow",d7=e=>({_tag:d4,cause:e}),me=e=>({_tag:d6,onFiber:e}),mt=e=>({_tag:d9,effect:e}),ms=()=>({_tag:d8}),mn=Symbol.for("effect/FiberScope");class mi{[mn]=mn;fiberId=iv;roots=new Set;add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}}class mr{fiberId;parent;[mn]=mn;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(me(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}}let ma=e=>new mr(e.id(),e),mo=U(Symbol.for("effect/FiberScope/Global"),()=>new mi),ml=Symbol.for("effect/Fiber"),mc={_E:e=>e,_A:e=>e},mu={[ml]:mc,pipe(){return eP(this,arguments)}},mp=Symbol.for("effect/Fiber"),md=((e,t)=>e.interruptAsFork(t),e=>lc(oD(e.await),e.inheritAll)),mm=((e,t)=>mm(e,e=>o6(()=>t(e))),I(2,(e,t)=>({...mu,id:()=>e.id(),await:oP(e.await,cp(t)),children:e.children,inheritAll:e.inheritAll,poll:oP(e.poll,e=>{switch(e._tag){case"None":return o3(tL());case"Some":return F(cp(e.value,t),oW(ti))}}),interruptAsFork:t=>e.interruptAsFork(t)})));(e,t)=>({...mu,id:()=>ih(e.id(),t.id()),await:lp(e.await,t.await,(e,t)=>cr(e)?e:t),children:e.children,inheritAll:lu(t.inheritAll,e.inheritAll),poll:lp(e.poll,t.poll,(e,t)=>{switch(e._tag){case"None":return tL();case"Some":return cr(e.value)?e:t}}),interruptAsFork:s=>F(lm(e,s),lu(F(t,lm(s))),ox)});let mh="effect/FiberCurrent",mf=Symbol.for("effect/Logger"),mg={_Message:e=>e,_Output:e=>e},mb=e=>({[mf]:mg,log:e,pipe(){return eP(this,arguments)}}),mx=I(2,(e,t)=>mb(s=>t(e.log(s)))),my=((e,t)=>mb(s=>[e.log(s),t.log(s)]),mb(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${ix(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eF(r[e]);t.length>0&&(l+=" message=",l=mw(t,l))}else{let e=eF(r);e.length>0&&(l+=" message=",l=mw(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=mw(aH(t),l)),iF(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=F(t,dE(o))}if(F(e,nT)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=mO(s)+"=",l=mw(eF(n),l)}return l})),mv=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,m_=/^[^\s"=]+$/,mw=(e,t)=>t+(e.match(m_)?e:mv(e)),mS=(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${ix(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eF(r[e],0);t.length>0&&(l+=" message=",l=mT(t,l))}else{let e=eF(r,0);e.length>0&&(l+=" message=",l=mT(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=mT(aH(t),l)),iF(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=F(t,mR(o))}if(F(e,nT)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=mO(s)+"=",l=mT(eF(n,0),l)}return l},mb(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l={},c={};if(nT(e)>0)for(let[t,s]of e)l[t]=mk(s);if(iF(a))for(let e of a)c[e.label]=o-e.startTime;return{message:mk(r),logLevel:i.label,timestamp:s.toISOString(),cause:aO(t)?void 0:aH(t),annotations:l,spans:c,fiberId:ix(n)}})),mk=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},mO=e=>e.replace(/[\s="]/g,"_"),mE=e=>JSON.stringify(e),mT=(e,t)=>t+(e.match(m_)?e:mE(e)),mR=e=>t=>{let s=mO(t.label);return`${s}=${e-t.startTime}ms`},mI=Symbol.for("effect/MetricKeyType"),mN="effect/MetricKeyType/Counter",mj=Symbol.for(mN),mA=Symbol.for("effect/MetricKeyType/Frequency"),mC=Symbol.for("effect/MetricKeyType/Gauge"),mM="effect/MetricKeyType/Histogram",mF=Symbol.for(mM),mL=Symbol.for("effect/MetricKeyType/Summary"),mP={_In:e=>e,_Out:e=>e};class m${incremental;bigint;[mI]=mP;[mj]=mj;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=ew(mN)}_hash;[ef](){return this._hash}[eT](e){return mz(e)}pipe(){return eP(this,arguments)}}class mU{boundaries;[mI]=mP;[mF]=mF;constructor(e){this.boundaries=e,this._hash=F(ew(mM),ex(eg(this.boundaries)))}_hash;[ef](){return this._hash}[eT](e){return mq(e)&&eR(this.boundaries,e.boundaries)}pipe(){return eP(this,arguments)}}let mD=e=>new m$(e?.incremental??!1,e?.bigint??!1),mz=e=>Q(e,mj),mB=e=>Q(e,mA),mZ=e=>Q(e,mC),mq=e=>Q(e,mF),mK=e=>Q(e,mL),mJ=Symbol.for("effect/MetricKey"),mV={_Type:e=>e},mG=tO(eR);class mW{name;keyType;description;tags;[mJ]=mV;constructor(e,t,s,n=[]){this.name=e,this.keyType=t,this.description=s,this.tags=n,this._hash=F(ew(this.name+this.description),ex(eg(this.keyType)),ex(eO(this.tags)))}_hash;[ef](){return this._hash}[eT](e){return mH(e)&&this.name===e.name&&eR(this.keyType,e.keyType)&&eR(this.description,e.description)&&mG(this.tags,e.tags)}pipe(){return eP(this,arguments)}}let mH=e=>Q(e,mJ),mY=(e,t)=>new mW(e,mD(t),tz(t?.description)),mQ=I(2,(e,t)=>0===t.length?e:new mW(e.name,e.keyType,e.description,sS(e.tags,t))),mX=Symbol.for("effect/MutableHashMap"),m0={[mX]:mX,[Symbol.iterator](){return new m1(this)},toString(){return eM(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(eC)}},[eA](){return this.toJSON()},pipe(){return eP(this,arguments)}};class m1{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new m2(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new m1(this.self)}}class m2{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}let m5=()=>{let e=Object.create(m0);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},m3=I(2,(e,t)=>{if(!1===eN(t))return e.referential.has(t)?ti(e.referential.get(t)):tL();let s=t[ef](),n=e.buckets.get(s);return void 0===n?tL():m4(e,n,t)}),m4=(e,t,s,n=!1)=>{for(let i=0,r=t.length;i<r;i++)if(s[eT](t[i][0])){let s=t[i][1];return n&&(t.splice(i,1),e.bucketsSize--),ti(s)}return tL()},m6=I(2,(e,t)=>ts(m3(e,t))),m9=I(3,(e,t,s)=>{if(!1===eN(t))return e.referential.set(t,s),e;let n=t[ef](),i=e.buckets.get(n);return void 0===i?e.buckets.set(n,[[t,s]]):(m8(e,i,t),i.push([t,s])),e.bucketsSize++,e}),m8=(e,t,s)=>{for(let n=0,i=t.length;n<i;n++)if(s[eT](t[n][0])){t.splice(n,1),e.bucketsSize--;return}},m7=I(2,(e,t)=>{if(!1===eN(t))return e.referential.delete(t),e;let s=t[ef](),n=e.buckets.get(s);return void 0===n||(m8(e,n,t),0===n.length&&e.buckets.delete(s)),e}),he=e=>e.referential.size+e.bucketsSize,ht=Symbol.for("effect/MetricState"),hs="effect/MetricState/Counter",hn=Symbol.for(hs),hi="effect/MetricState/Frequency",hr=Symbol.for(hi),ha="effect/MetricState/Gauge",ho=Symbol.for(ha),hl="effect/MetricState/Histogram",hc=Symbol.for(hl),hu="effect/MetricState/Summary",hp=Symbol.for(hu),hd={_A:e=>e};class hm{count;[ht]=hd;[hn]=hn;constructor(e){this.count=e}[ef](){return F(eg(hs),ex(eg(this.count)),eE(this))}[eT](e){return hk(e)&&this.count===e.count}pipe(){return eP(this,arguments)}}let hh=tO(eR);class hf{occurrences;[ht]=hd;[hr]=hr;constructor(e){this.occurrences=e}_hash;[ef](){return F(ew(hi),ex(eO(t3(this.occurrences.entries()))),eE(this))}[eT](e){return hO(e)&&hh(t3(this.occurrences.entries()),t3(e.occurrences.entries()))}pipe(){return eP(this,arguments)}}class hg{value;[ht]=hd;[ho]=ho;constructor(e){this.value=e}[ef](){return F(eg(ha),ex(eg(this.value)),eE(this))}[eT](e){return hE(e)&&this.value===e.value}pipe(){return eP(this,arguments)}}class hb{buckets;count;min;max;sum;[ht]=hd;[hc]=hc;constructor(e,t,s,n,i){this.buckets=e,this.count=t,this.min=s,this.max=n,this.sum=i}[ef](){return F(eg(hl),ex(eg(this.buckets)),ex(eg(this.count)),ex(eg(this.min)),ex(eg(this.max)),ex(eg(this.sum)),eE(this))}[eT](e){return hT(e)&&eR(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eP(this,arguments)}}class hx{error;quantiles;count;min;max;sum;[ht]=hd;[hp]=hp;constructor(e,t,s,n,i,r){this.error=e,this.quantiles=t,this.count=s,this.min=n,this.max=i,this.sum=r}[ef](){return F(eg(hu),ex(eg(this.error)),ex(eg(this.quantiles)),ex(eg(this.count)),ex(eg(this.min)),ex(eg(this.max)),ex(eg(this.sum)),eE(this))}[eT](e){return hR(e)&&this.error===e.error&&eR(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eP(this,arguments)}}let hy=e=>new hm(e),hv=e=>new hf(e),h_=e=>new hg(e),hw=e=>new hb(e.buckets,e.count,e.min,e.max,e.sum),hS=e=>new hx(e.error,e.quantiles,e.count,e.min,e.max,e.sum),hk=e=>Q(e,hn),hO=e=>Q(e,hr),hE=e=>Q(e,ho),hT=e=>Q(e,hc),hR=e=>Q(e,hp),hI=Symbol.for("effect/MetricHook"),hN={_In:e=>e,_Out:e=>e},hj=e=>({[hI]:hN,pipe(){return eP(this,arguments)},...e}),hA=BigInt(0),hC=e=>{let t=e.keyType.bigint?hA:0,s=e.keyType.incremental?e.keyType.bigint?e=>e>=hA:e=>e>=0:e=>!0;return hj({get:()=>hy(t),update:e=>{s(e)&&(t+=e)}})},hM=e=>{let t=new Map;for(let s of e.keyType.preregisteredWords)t.set(s,0);return hj({get:()=>hv(t),update:e=>{let s=t.get(e)??0;t.set(e,s+1)}})},hF=(e,t)=>{let s=t;return hj({get:()=>h_(s),update:e=>{s=e}})},hL=e=>{let t=e.keyType.boundaries.values,s=t.length,n=new Uint32Array(s+1),i=new Float32Array(s),r=0,a=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;F(t,sf(tX),sE((e,t)=>{i[t]=e}));let c=()=>{let e=t5(s),t=0;for(let r=0;r<s;r++){let s=i[r];t+=n[r],e[r]=[s,t]}return e};return hj({get:()=>hw({buckets:c(),count:r,min:o,max:l,sum:a}),update:e=>{let t=0,c=s;for(;t!==c;){let s=Math.floor(t+(c-t)/2);e<=i[s]?c=s:t=s,c===t+1&&(e<=i[t]?c=t:t=c)}n[t]=n[t]+1,r+=1,a+=e,e<o&&(o=e),e>l&&(l=e)}})},hP=e=>{let{error:t,maxAge:s,maxSize:n,quantiles:i}=e.keyType,r=F(i,sf(tX)),a=t5(n),o=0,l=0,c=0,u=Number.MAX_VALUE,p=Number.MIN_VALUE,d=e=>{let i=[],o=0;for(;o!==n-1;){let t=a[o];if(null!=t){let[n,r]=t,a=c2(e-n);uo(a,cX)&&a<=s&&i.push(r)}o+=1}return h$(t,r,sf(i,tX))},m=(e,t)=>{n>0&&(a[(o+=1)%n]=[t,e]),l+=1,c+=e,e<u&&(u=e),e>p&&(p=e)};return hj({get:()=>hS({error:t,quantiles:d(Date.now()),count:l,min:u,max:p,sum:c}),update:([e,t])=>m(e,t)})},h$=(e,t,s)=>{let n=s.length;if(!st(t))return sk();let i=t[0],r=t.slice(1),a=hU(e,n,tL(),0,i,s),o=sO(a);return r.forEach(t=>{o.push(hU(e,n,a.value,a.consumed,t,a.rest))}),sE(o,e=>[e.quantile,e.value])},hU=(e,t,s,n,i,r)=>{let a=e,o=t,l=s,c=n,u=i,p=r,d=e,m=t,h=s,f=n,g=i,b=r;for(;;){if(!st(p))return{quantile:u,value:tL(),consumed:c,rest:[]};if(1===u)return{quantile:u,value:ti(sc(p)),consumed:c+p.length,rest:[]};let e=sd(p,e=>e<=p[0]),t=u*o,s=a/2*t,n=c+e[0].length,i=Math.abs(n-t);if(n<t-s){d=a,m=o,h=sa(p),f=n,g=u,b=e[1],a=d,o=m,l=h,c=f,u=g,p=b;continue}if(n>t+s)return{quantile:u,value:l,consumed:c,rest:p};switch(l._tag){case"None":d=a,m=o,h=sa(p),f=n,g=u,b=e[1],a=d,o=m,l=h,c=f,u=g,p=b;continue;case"Some":if(i<Math.abs(t-l.value)){d=a,m=o,h=sa(p),f=n,g=u,b=e[1],a=d,o=m,l=h,c=f,u=g,p=b;continue}return{quantile:u,value:ti(l.value),consumed:c,rest:p}}}throw Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},hD=Symbol.for("effect/MetricPair"),hz={_Type:e=>e},hB=(e,t)=>({[hD]:hz,metricKey:e,metricState:t,pipe(){return eP(this,arguments)}}),hZ=Symbol.for("effect/MetricRegistry");class hq{[hZ]=hZ;map=m5();snapshot(){let e=[];for(let[t,s]of this.map)e.push(hB(t,s.get()));return e}get(e){let t=F(this.map,m3(e),tB);if(null!=t)return t;if(mz(e.keyType))return this.getCounter(e);if(mZ(e.keyType))return this.getGauge(e);if(mB(e.keyType))return this.getFrequency(e);if(mq(e.keyType))return this.getHistogram(e);if(mK(e.keyType))return this.getSummary(e);throw Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}getCounter(e){let t=F(this.map,m3(e),tB);if(null==t){let s=hC(e);F(this.map,m6(e))||F(this.map,m9(e,s)),t=s}return t}getFrequency(e){let t=F(this.map,m3(e),tB);if(null==t){let s=hM(e);F(this.map,m6(e))||F(this.map,m9(e,s)),t=s}return t}getGauge(e){let t=F(this.map,m3(e),tB);if(null==t){let s=hF(e,e.keyType.bigint?BigInt(0):0);F(this.map,m6(e))||F(this.map,m9(e,s)),t=s}return t}getHistogram(e){let t=F(this.map,m3(e),tB);if(null==t){let s=hL(e);F(this.map,m6(e))||F(this.map,m9(e,s)),t=s}return t}getSummary(e){let t=F(this.map,m3(e),tB);if(null==t){let s=hP(e);F(this.map,m6(e))||F(this.map,m9(e,s)),t=s}return t}}let hK=()=>new hq,hJ=Symbol.for("effect/Metric"),hV={_Type:e=>e,_In:e=>e,_Out:e=>e},hG=U(Symbol.for("effect/Metric/globalMetricRegistry"),()=>hK()),hW=function(e,t,s){let n=Object.assign(e=>o9(e,e=>h0(n,e)),{[hJ]:hV,keyType:e,unsafeUpdate:t,unsafeValue:s,register(){return this.unsafeValue([]),this},pipe(){return eP(this,arguments)}});return n},hH=(e,t)=>hY(mY(e,t)),hY=e=>{let t;let s=new WeakMap,n=n=>{if(0===n.length)return void 0!==t?t:t=hG.get(e);let i=s.get(n);return void 0!==i||(i=hG.get(mQ(e,n)),s.set(n,i)),i};return hW(e.keyType,(e,t)=>n(t).update(e),e=>n(e).get())},hQ=I(3,(e,t,s)=>hX(e,[dN(t,s)])),hX=I(2,(e,t)=>hW(e.keyType,(s,n)=>e.unsafeUpdate(s,sS(t,n)),s=>e.unsafeValue(sS(t,s)))),h0=I(2,(e,t)=>l_(lK,s=>o6(()=>e.unsafeUpdate(t,s)))),h1="effect/MetricBoundaries",h2=Symbol.for(h1);class h5{values;[h2]=h2;constructor(e){this.values=e,this._hash=F(ew(h1),ex(eO(this.values)))}_hash;[ef](){return this._hash}[eT](e){return h3(e)&&eR(this.values,e.values)}pipe(){return eP(this,arguments)}}let h3=e=>Q(e,h2),h4=I(2,(e,t)=>l_(dw,s=>o6(()=>{if(s.has(e)){let n=s.get(e);n.state.completed||(n.state.completed=!0,cR(n.result,t))}})));class h6{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}}let h9=Symbol.for("effect/Supervisor"),h8={_T:e=>e};class h7{underlying;value0;[h9]=h8;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,s,n){this.underlying.onStart(e,t,s,n)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new h7(this,F(this.value,oW(e)))}zip(e){return new fe(this,e)}}class fe{left;right;_tag="Zip";[h9]=h8;constructor(e,t){this.left=e,this.right=t}get value(){return ll(this.left.value,this.right.value)}onStart(e,t,s,n){this.left.onStart(e,t,s,n),this.right.onStart(e,t,s,n)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new h7(this,F(this.value,oW(e)))}zip(e){return new fe(this,e)}}let ft=e=>Q(e,h9)&&X(e,"Zip");class fs{[h9]=h8;fibers=new Set;get value(){return o6(()=>Array.from(this.fibers))}onStart(e,t,s,n){this.fibers.add(n)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new h7(this,F(this.value,oW(e)))}zip(e){return new fe(this,e)}onRun(e,t){return e()}}class fn{effect;[h9]=h8;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,s,n){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new h7(this,F(this.value,oW(e)))}zip(e){return new fe(this,e)}onRun(e,t){return e()}}let fi=o6(()=>new fs),fr=e=>new fn(e),fa=U("effect/Supervisor/none",()=>fr(ls)),fo="Empty",fl="AddSupervisor",fc="RemoveSupervisor",fu="AndThen",fp={_tag:fo},fd=(e,t)=>({_tag:fu,first:e,second:t}),fm=(e,t)=>{let s=e,n=t;for(;s5(n);){let e=s4(n);switch(e._tag){case fo:n=s6(n);break;case fl:s=s.zip(e.supervisor),n=s6(n);break;case fc:s=fh(s,e.supervisor),n=s6(n);break;case fu:n=sX(e.first)(sX(e.second)(s6(n)))}}return s},fh=(e,t)=>eR(e,t)?fa:ft(e)?fh(e.left,t).zip(fh(e.right,t)):e,ff=e=>eR(e,fa)?nB():ft(e)?F(ff(e.left),nQ(ff(e.right))):n2(e),fg=rJ({empty:fp,patch:(e,t)=>fm(t,sZ(e)),combine:fd,diff:(e,t)=>{if(eR(e,t))return fp;let s=ff(e),n=ff(t),i=F(n,nY(s),n0(fp,(e,t)=>fd(e,{_tag:fl,supervisor:t}))),r=F(s,nY(n),n0(fp,(e,t)=>fd(e,{_tag:fc,supervisor:t})));return fd(i,r)}}),fb=hH("effect_fiber_started",{incremental:!0}),fx=hH("effect_fiber_active"),fy=hH("effect_fiber_successes",{incremental:!0}),fv=hH("effect_fiber_failures",{incremental:!0}),f_=hQ(hY(new mW("effect_fiber_lifetimes",new mU(F(((e,t)=>{let s=Math.max(1,Math.floor(e)),n=Array(s);for(let e=0;e<s;e++)n[e]=t(e);return n})((o={start:.5,factor:2,count:35}).count-1,e=>o.start*Math.pow(o.factor,e)),sW,e=>new h5(F(e,t8(sZ(Number.POSITIVE_INFINITY)),sA)))),tz(l))),"time_unit","milliseconds"),fw="Continue",fS="Yield",fk={_E:e=>e,_A:e=>e},fO=e=>{throw Error(`BUG: FiberRuntime - ${eF(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},fE=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),fT=U("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),fR={[eB]:(e,t,s)=>t.effect_instruction_i1(s),OnStep:(e,t,s)=>cg(cg(s)),[eZ]:(e,t,s)=>t.effect_instruction_i2(s),[eH]:(e,t,s)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),r9(e._runtimeFlags)&&e.isInterrupted())?cu(e.getInterruptedCause()):cg(s),[eV]:(e,t,s)=>(t.effect_instruction_i2(s),t.effect_instruction_i0())?(e.pushStack(t),t.effect_instruction_i1()):ls},fI={[d4]:(e,t,s,n)=>(e.processNewInterruptSignal(n.cause),r9(t)?cu(n.cause):s),[d9]:(e,t,s,n)=>{throw Error("It is illegal to have multiple concurrent run loops in a single fiber")},[d6]:(e,t,s,n)=>(n.onFiber(e,p$(t)),s),[d8]:(e,t,s,n)=>oP(lo(),()=>s)},fN=e=>oK(de(e),e=>fK(d_(e),([e,t])=>{let s=new Map,n=[];for(let e of t)for(let t of(n.push(sJ(e)),e))s.set(t.request,t);let i=n.flat();return lR(gc(e.runAll(n),i,()=>i.forEach(e=>{e.listeners.interrupted=!0})),dw,s)},!1,!1));class fj{[ml]=mc;[mp]=fk;pipe(){return eP(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=[];_children=null;_observers=[];_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,s){if(this._runtimeFlags=s,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(gi),this._scheduler=this.getFiberRef(p9),as(s)){let e=this.getFiberRef(lK);fb.unsafeUpdate(1,e),fx.unsafeUpdate(1,e)}this._tracer=tg(this.getFiberRef(u6),oe)}id(){return this._fiberId}resume(e){this.tell(mt(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>pD(t)?e._runtimeFlags:t.runtimeFlags)}scope(){return ma(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(lV)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return o4(()=>{let t=cv(this._fiberId);return this.tell(me((s,n)=>{cR(t,o6(()=>e(s,n)))})),cS(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return ov(e=>{let t=t=>e(o3(t));return this.tell(me((e,s)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)})),o6(()=>this.tell(me((e,s)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return of((e,t)=>{let s=e.id(),n=e.getFiberRefs(),i=t.runtimeFlags,r=pu(n,s,this.getFiberRefs());return e.setFiberRefs(r),ln(F(ai(i,e.getFiberRef(gn)),r2(1),r2(16)))})}get poll(){return o6(()=>tz(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return o6(()=>this.tell(d7(av(e))))}unsafeInterruptAsFork(e){this.tell(d7(av(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(gn,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=pm(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=pg(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=tg(this.getFiberRef(u6),oe),this._supervisor=this.getFiberRef(gi),this._scheduler=this.getFiberRef(p9)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=fw,s=globalThis[mh];globalThis[mh]=this;try{for(;t===fw;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[mh]=s}this._queue.length>0&&!this._running?(this._running=!0,t===fS?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(lL))}drainQueueWhileRunning(e,t){let s=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];s=fI[t._tag](this,e,s,t)}return s}isInterrupted(){return!aO(this.getFiberRef(lV))}addInterruptedCause(e){let t=this.getFiberRef(lV);this.setFiberRef(lV,aw(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(let t of this._children)t.tell(d7(av(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return lr({while:()=>!t,body:()=>{let s=e.next();return s.done?o6(()=>{t=!0}):ox(s.value.await)},step:()=>{}})}return null}reportExitValue(e){if(as(this._runtimeFlags)){let t=this.getFiberRef(lK),s=this.id().startTimeMillis,n=Date.now();switch(f_.unsafeUpdate(n-s,t),fx.unsafeUpdate(-1,t),e._tag){case eq:fy.unsafeUpdate(1,t);break;case eD:fv.unsafeUpdate(1,t)}}if("Failure"===e._tag){let t=this.getFiberRef(lq);aT(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(fL)}log(e,t,s){let n=ts(s)?s.value:this.getFiberRef(lU);if(pK(this.getFiberRef(fA),n))return;let i=this.getFiberRef(lD),r=this.getFiberRef(l$),a=this.getLoggers(),o=this.getFiberRefs();if(n5(a)>0){let s=new Date(tg(this.getFiberRef(u6),up).unsafeCurrentTimeMillis());for(let l of a)l.log({fiberId:this.id(),logLevel:n,message:e,cause:t,context:o,spans:i,annotations:r,date:s})}}evaluateMessageWhileSuspended(e){switch(e._tag){case d8:return fS;case d4:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(cu(e.cause)),this._asyncInterruptor=null),fw;case d9:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),fw;case d6:return e.onFiber(this,null!==this._exitValue?pL:pU(this._runtimeFlags,this._asyncBlockingOn)),fw;default:return fO(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=r9(this._runtimeFlags)&&this.isInterrupted()?cu(this.getInterruptedCause()):e;for(;null!==t;){let e=t,s=this.runLoop(e);if(s===fE){let e=fT.currentOp;fT.currentOp=null,e._op===eW?r4(this._runtimeFlags)?(this.tell(ms()),this.tell(mt(cb)),t=null):t=cb:e._op===e$&&(t=null)}else{this._runtimeFlags=F(this._runtimeFlags,r6(16));let e=this.interruptAllChildren();null!==e?t=oP(e,()=>s):(0===this._queue.length?this.setExitValue(s):this.tell(mt(s)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(mt(e));else{this._running=!0;let t=globalThis[mh];globalThis[mh]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[mh]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(mt(e))}patchRuntimeFlags(e,t){let s=ar(e,t);return globalThis[mh]=this,this._runtimeFlags=s,s}initiateAsync(e,t){let s=!1,n=e=>{s||(s=!0,this.tell(mt(e)))};r9(e)&&(this._asyncInterruptor=n);try{t(n)}catch(e){n(oC(ay(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==ez)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==eB&&e._op!==eV)return e;e=this.popStack()}}Tag(e){return oW(lv(lF),t=>tg(t,e))}Left(e){return oj(e.left)}None(e){return oj(new ct)}Right(e){return cg(e.right)}Some(e){return cg(e.value)}[eK](e){let t=e.effect_instruction_i0(),s=this.getNextSuccessCont();return void 0!==s?(s._op in fR||fO(s),fR[s._op](this,s,t)):(fT.currentOp=cg(t),fE)}[eq](e){let t=this.getNextSuccessCont();return void 0!==t?(t._op in fR||fO(t),fR[t._op](this,t,e.effect_instruction_i0)):(fT.currentOp=e,fE)}[eD](e){let t=e.effect_instruction_i0,s=this.getNextFailCont();if(void 0===s)return fT.currentOp=cu(t),fE;switch(s._op){case ez:case eZ:if(!(r9(this._runtimeFlags)&&this.isInterrupted()))return s.effect_instruction_i1(t);return cu(aF(t));case"OnStep":if(!(r9(this._runtimeFlags)&&this.isInterrupted()))return cg(cu(t));return cu(aF(t));case eH:if(this.patchRuntimeFlags(this._runtimeFlags,s.patch),r9(this._runtimeFlags)&&this.isInterrupted())return cu(aw(t,this.getInterruptedCause()));return cu(t);default:fO(s)}}[eG](e){return e.effect_instruction_i0(this,p$(this._runtimeFlags))}Blocked(e){let t=this.getFiberRefs(),s=this._runtimeFlags;if(this._steps.length>0){let n=[],i=this._steps[this._steps.length-1],r=this.popStack();for(;r&&"OnStep"!==r._op;)n.push(r),r=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;let a=pk(i.refs,t),o=ai(i.flags,s);return cg(oo(e.effect_instruction_i0,of(t=>{for(;n.length>0;)t.pushStack(n.pop());return t.setFiberRefs(pE(t.id(),t.getFiberRefs())(a)),t._runtimeFlags=ar(o)(t._runtimeFlags),e.effect_instruction_i1})))}return lt(t=>oP(fV(ol(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return fN(e.effect_instruction_i0)}[eJ](e){let t=e.effect_instruction_i0,s=this._runtimeFlags,n=ar(s,t);if(r9(n)&&this.isInterrupted())return cu(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),!e.effect_instruction_i1)return cb;{let t=ai(n,s);return this.pushStack(new ou(t,e)),e.effect_instruction_i1(s)}}[eB](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[ez](e){return this.pushStack(e),e.effect_instruction_i0}[eZ](e){return this.pushStack(e),e.effect_instruction_i0}[e$](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),fT.currentOp=e,fE}[eW](e){return this.isYielding=!1,fT.currentOp=e,fE}[eV](e){let t=e.effect_instruction_i0,s=e.effect_instruction_i1;return t()?(this.pushStack(e),s()):cb}[eU](e){return e.commit()}runLoop(e){let t=e;for(this.currentOpCount=0;;){if((2&this._runtimeFlags)!=0&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;let e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;let s=t;t=oP(lo({priority:e}),()=>s)}}try{if("_op"in t&&t._op in this||fO(t),(t=this._tracer.context(()=>L()!==t[eY]._V?oR(`Cannot execute an Effect versioned ${t[eY]._V} with a Runtime of version ${L()}`):this[t._op](t),this))===fE){let e=fT.currentOp;if(e._op===eW||e._op===e$)return fE;return fT.currentOp=null,e._op===eq||e._op===eD?e:cu(ay(e))}}catch(e){t=or(e)?cu(e.cause):l7(e)?cu(aw(ay(e),av(iv))):cu(ay(e))}}}run=()=>{this.drainQueueOnCurrentThread()}}let fA=U("effect/FiberRef/currentMinimumLogLevel",()=>lN(pJ("Info"))),fC=e=>mb(t=>{tg(pf(t.context,u6),uQ).unsafe.log(e.log(t))}),fM=U(Symbol.for("effect/Logger/defaultLogger"),()=>fC(my)),fF=U(Symbol.for("effect/Logger/tracerLogger"),()=>mb(({annotations:e,cause:t,context:s,fiberId:n,logLevel:i,message:r})=>{let a=tJ(ph(s,lF),tb(ot)),o=tK(ph(s,u6),e=>tg(e,up));if("None"===a._tag||"ExternalSpan"===a.value._tag||"None"===o._tag)return;let l=Object.fromEntries(nC(e,eF));l["effect.fiberId"]=ix(n),l["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=aH(t)),a.value.event(String(r),o.value.unsafeCurrentTimeNanos(),l)})),fL=U(Symbol.for("effect/FiberRef/currentLoggers"),()=>lj(n2(fM,fF))),fP=I(e=>oh(e[0]),(e,t)=>le(o9(e,e=>f$(s=>t(e,s))))),f$=e=>of(t=>{let s=t.getFiberRefs(),n=t._runtimeFlags;return oP(f4,t=>l1(t,t=>of(i=>{let r=i.getFiberRefs(),a=i._runtimeFlags,o=pk(r,s),l=ai(a,n),c=pk(s,r);return i.setFiberRefs(pE(o,i.id(),s)),gl(la(e(t),l),o6(()=>{i.setFiberRefs(pE(c,i.id(),i.getFiberRefs()))}))})))}),fU=e=>{if(Array.isArray(e)||en(e))return[e,tL()];let t=Object.keys(e),s=t.length;return[t.map(t=>e[t]),ti(e=>{let n={};for(let i=0;i<s;i++)n[t[i]]=e[i];return n})]},fD=(e,t,s)=>{let n=[];for(let t of e)n.push(oI(t));return oP(fZ(n,N,{concurrency:s?.concurrency,batching:s?.batching}),e=>{let n=tL(),i=e.length,r=Array(i),a=Array(i),o=!1;for(let t=0;t<i;t++){let s=e[t];"Left"===s._tag?(r[t]=ti(s.left),o=!0):(a[t]=s.right,r[t]=n)}return o?"Some"===t._tag?oj(t.value(r)):oj(r):s?.discard?ls:"Some"===t._tag?o3(t.value(a)):o3(a)})},fz=(e,t,s)=>{let n=[];for(let t of e)n.push(oI(t));return s?.discard?fZ(n,N,{concurrency:s?.concurrency,batching:s?.batching,discard:!0}):oW(fZ(n,N,{concurrency:s?.concurrency,batching:s?.batching}),e=>"Some"===t._tag?t.value(e):e)},fB=(e,t)=>{let[s,n]=fU(e);return t?.mode==="validate"?fD(s,n,t):t?.mode==="either"?fz(s,n,t):"Some"===n._tag?oW(fZ(s,N,t),n.value):fZ(s,N,t)},fZ=((e,t)=>Array.from({length:t},()=>e),I(e=>en(e[0]),(e,t,s)=>of(n=>{let i=s?.batching===!0||s?.batching==="inherit"&&n.getFiberRef(lZ);return s?.discard?dS(s.concurrency,()=>f0(ps)(s=>i?fK(e,(e,n)=>s(t(e,n)),!0,!1,1):oK(e,(e,n)=>s(t(e,n)))),()=>f0(pr)(s=>fK(e,(e,n)=>s(t(e,n)),i,!1)),s=>f0(pa(s))(n=>fK(e,(e,s)=>n(t(e,s)),i,!1,s))):dS(s?.concurrency,()=>f0(ps)(s=>i?fJ(e,1,(e,n)=>s(t(e,n)),!0):oq(e,(e,n)=>s(t(e,n)))),()=>f0(pr)(s=>fq(e,(e,n)=>s(t(e,n)),i)),s=>f0(pa(s))(n=>fJ(e,s,(e,s)=>n(t(e,s)),i)))}))),fq=(e,t,s)=>o4(()=>{let n=t3(e),i=Array(n.length);return lu(fK(n,(e,s)=>oP(t(e,s),e=>o6(()=>i[s]=e)),s,!1),o3(i))}),fK=(e,t,s,n,i)=>lt(r=>o8(a=>of(o=>{let l=Array.from(e).reverse(),c=l.length;if(0===c)return ls;let u=0,p=!1,d=i?Math.min(l.length,i):l.length,m=new Set,h=[],f=()=>m.forEach(e=>{e._scheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(o.id())},0)}),g=[],b=[],x=[],y=()=>{let e=h.filter(({exit:e})=>"Failure"===e._tag).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return 0===e.length&&e.push(cb),e},v=(e,t=!1)=>{let s=le(a(e)),n=fW(s,o,o._runtimeFlags,mo);return o._scheduler.scheduleTask(()=>{t&&n.unsafeInterruptAsFork(o.id()),n.resume(s)},0),n},_=()=>{n||(c-=l.length,l=[]),p=!0,f()},w=s?oU:oN,S=v(ov(e=>{let n=(e,t)=>{"Blocked"===e._op?x.push(e):(h.push({index:t,exit:e}),"Failure"!==e._op||p||_())},a=()=>{if(l.length>0){let d=l.pop(),f=u++,_=()=>{let e=l.pop();return f=u++,oP(lo(),()=>oP(w(r(t(e,f))),S))},S=e=>l.length>0&&(n(e,f),l.length>0)?_():o3(e),k=v(oP(w(r(t(d,f))),S));g.push(k),m.add(k),p&&k._scheduler.scheduleTask(()=>{k.unsafeInterruptAsFork(o.id())},0),k.addObserver(t=>{let r;r="Failure"===t._op?t:t.effect_instruction_i0,b.push(k),m.delete(k),n(r,f),h.length===c?e(o3(t$(cl(y(),{parallel:!0}),()=>cb))):x.length+h.length===c?e(o3(oo(x.map(e=>e.effect_instruction_i0).reduce(p8),fK([t$(cl(y(),{parallel:!0}),()=>cb),...x.map(e=>e.effect_instruction_i1)],e=>e,s,!0,i)))):a()})}};for(let e=0;e<d;e++)a()}));return ox(oQ(oD(r(md(S))),ch({onFailure:()=>{_();let e=x.length+1,t=Math.min("number"==typeof i?i:x.length,x.length),s=Array.from(x);return ov(n=>{let i=[],r=0,a=0,o=(t,a)=>o=>{i[t]=o,++r===e&&n(tq(cl(i,{parallel:!0}))),s.length>0&&a&&l()},l=()=>{v(s.pop(),!0).addObserver(o(a,!0)),a++};S.addObserver(o(a,!1)),a++;for(let e=0;e<t;e++)l()})},onSuccess:()=>oq(b,e=>e.inheritAll)})))}))),fJ=(e,t,s,n)=>o4(()=>{let i=t3(e),r=Array(i.length);return lu(fK(i,(e,t)=>oW(s(e,t),e=>r[t]=e),n,!1,t),o3(r))}),fV=e=>fY(e,mo),fG=(e,t,s,n=null)=>{let i=fH(e,t,s,n);return i.resume(e),i},fW=(e,t,s,n=null)=>fH(e,t,s,n),fH=(e,t,s,n=null)=>{let i=iS(),r=pp(t.getFiberRefs(),i),a=new fj(i,r,s),o=pf(r,lF),l=a._supervisor;return l.onStart(o,e,ti(t),a),a.addObserver(e=>l.onEnd(e,a)),(null!==n?n:F(t.getFiberRef(lJ),t$(()=>t.scope()))).add(s,a),a},fY=(e,t)=>of((s,n)=>o3(fG(e,s,n.runtimeFlags,t))),fQ=(e=>K(e[2]),e=>cA(t=>tP(tb(t,f3),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return oP(l5(t,pr),t=>ge(e,t))}}}))),fX=e=>t=>cA(s=>tP(tb(s,f3),{onNone:()=>t,onSome:s=>"ParallelN"===s.strategy._tag&&s.strategy.parallelism===e?t:oP(l5(s,pa(e)),e=>ge(t,e))})),f0=e=>t=>cA(s=>tP(tb(s,f3),{onNone:()=>t(N),onSome:s=>{let n="Parallel"===e._tag?fQ:"Sequential"===e._tag?f2:fX(e.parallelism);switch(s.strategy._tag){case"Parallel":return n(t(fQ));case"Sequential":return n(t(f2));case"ParallelN":return n(t(fX(s.strategy.parallelism)))}}})),f1=e=>oP(f3,e),f2=e=>cA(t=>tP(tb(t,f3),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return oP(l5(t,ps),t=>ge(e,t))}}})),f5=(e=>oh(e[1]),I(e=>oh(e[1]),(e,t,s,n)=>oW(fB([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching}),([e,t])=>s(e,t)))),f3=ty("effect/Scope"),f4=f3,f6=(e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)},f9={[lQ]:lQ,[lX]:lX,pipe(){return eP(this,arguments)},fork(e){return o6(()=>{let t=f8(e);if("Closed"===this.state._tag)return t.state=this.state,t;let s=e=>t.close(e);return this.state.finalizers.add(s),f6(t,e=>o6(()=>{"Open"===this.state._tag&&this.state.finalizers.delete(s)})),t})},close(e){return o4(()=>{if("Closed"===this.state._tag)return ls;let t=Array.from(this.state.finalizers.values()).reverse();return(this.state={_tag:"Closed",exit:e},0===t.length)?ls:pn(this.strategy)?F(oq(t,t=>oN(t(e))),oP(e=>F(cl(e),tK(co),t$(()=>cb)))):pi(this.strategy)?F(fq(t,t=>oN(t(e)),!1),oP(e=>F(cl(e,{parallel:!0}),tK(co),t$(()=>cb)))):F(fJ(t,this.strategy.parallelism,t=>oN(t(e)),!1),oP(e=>F(cl(e,{parallel:!0}),tK(co),t$(()=>cb))))})},addFinalizer(e){return o4(()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),ls))}},f8=(e=ps)=>{let t=Object.create(f9);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},f7=(e=ps)=>o6(()=>f8(e)),ge=I(2,(e,t)=>cF(e,tx(th(f3,t)))),gt=I(2,(e,t)=>ox(fP(oP(lv(e),s=>ob(lw(e,t),s)),t=>lw(e,t)))),gs=I(2,(e,t)=>l_(e,s=>gt(e,t(s)))),gn=lM(at,{differ:aa,fork:aa.empty}),gi=lM(fa,{differ:fg,fork:fp}),gr=I(3,(e,t,s)=>ga(e,t,{onSelfWin:(e,t)=>oP(e.await,n=>{switch(n._tag){case eq:return oP(e.inheritAll,()=>s.onSelfDone(n,t));case eD:return s.onSelfDone(n,t)}}),onOtherWin:(e,t)=>oP(e.await,n=>{switch(n._tag){case eq:return oP(e.inheritAll,()=>s.onOtherDone(n,t));case eD:return s.onOtherDone(n,t)}})})),ga=((e,t)=>oL(s=>gr(e,t,{onSelfDone:(e,t)=>cf(e,{onFailure:e=>F(md(t),dq(t=>a_(e,t))),onSuccess:e=>F(t,lm(s),ob(e))}),onOtherDone:(e,t)=>cf(e,{onFailure:e=>F(md(t),dq(t=>a_(t,e))),onSuccess:e=>F(t,lm(s),ob(e))})})),I(3,(e,t,s)=>of((n,i)=>{let r=i.runtimeFlags,a=n6(!0),o=fH(e,n,r,s.selfScope),l=fH(t,n,r,s.otherScope);return ov(n=>{o.addObserver(()=>go(o,l,s.onSelfWin,a,n)),l.addObserver(()=>go(l,o,s.onOtherWin,a,n)),o.startFork(e),l.startFork(t)},im(o.id(),l.id()))}))),go=(e,t,s,n,i)=>{n9(!0,!1)(n)&&i(s(e,t))},gl=I(2,(e,t)=>lt(s=>oB(s(e),{onFailure:e=>oB(t,{onFailure:t=>oC(aw(e,t)),onSuccess:()=>oC(e)}),onSuccess:e=>ob(t,e)}))),gc=(e,t,s)=>oL(n=>oP(oP(fV(oV(e)),e=>ov(n=>{let i=t.map(e=>e.listeners.count),r=()=>{i.every(e=>0===e)&&t.every(e=>"Pending"===e.result.state.current._tag||!!("Done"===e.result.state.current._tag&&ci(e.result.state.current.effect)&&"Failure"===e.result.state.current.effect._tag&&aE(e.result.state.current.effect.cause)))&&(a.forEach(e=>e()),s?.(),n(ld(e)))};e.addObserver(e=>{a.forEach(e=>e()),n(e)});let a=t.map((e,t)=>{let s=e=>{i[t]=e,r()};return e.listeners.addObserver(s),()=>e.listeners.removeObserver(s)});return r(),o6(()=>{a.forEach(e=>e())})})),()=>o4(()=>oK(t.flatMap(e=>e.state.completed?[]:[e]),e=>h4(e.request,cd(n))))));class gu{s;stripped;index;length;constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};let e=this.index;for(;!this.done&&!gp(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){let e=this.s[this.index];this.index=this.index+1,!this.done&&gd(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new gu(this.s,this.stripped)}get done(){return this.index>=this.length}}let gp=e=>{let t=e.charCodeAt(0);return 13===t||10===t},gd=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),gm=((e,t)=>gh(e.minutes,t.minutes)&&gh(e.hours,t.hours)&&gh(e.days,t.days)&&gh(e.months,t.months)&&gh(e.weekdays,t.weekdays),tO((e,t)=>e===t)),gh=(e,t)=>gm(t3(e),t3(t)),gf=Symbol.for("effect/ScheduleInterval"),gg={[gf]:gf,startMillis:0,endMillis:0},gb=(e,t)=>e>t?gg:{[gf]:gf,startMillis:e,endMillis:t},gx=I(2,(e,t)=>gy(e,t)===e),gy=I(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),gv=I(2,(e,t)=>gb(Math.max(e.startMillis,t.startMillis),Math.min(e.endMillis,t.endMillis))),g_=e=>e.startMillis>=e.endMillis,gw=e=>c2(e.endMillis-e.startMillis),gS=e=>gb(e,Number.POSITIVE_INFINITY),gk=Symbol.for("effect/ScheduleIntervals"),gO=e=>({[gk]:gk,intervals:e}),gE=I(2,(e,t)=>s5(t.intervals)?s5(e.intervals)?s4(e.intervals).startMillis<s4(t.intervals).startMillis?gT(s6(e.intervals),t.intervals,s4(e.intervals),sz()):gT(e.intervals,s6(t.intervals),s4(t.intervals),sz()):t:e),gT=(e,t,s,n)=>{let i=e,r=t,a=s,o=n;for(;s5(i)||s5(r);)if(!s5(i)&&s5(r))a.endMillis<s4(r).startMillis?(o=F(o,sX(a)),a=s4(r)):a=gb(a.startMillis,s4(r).endMillis),r=s6(r),i=sz();else if(s5(i)&&s2(r))a.endMillis<s4(i).startMillis?(o=F(o,sX(a)),a=s4(i)):a=gb(a.startMillis,s4(i).endMillis),r=sz(),i=s6(i);else if(s5(i)&&s5(r))s4(i).startMillis<s4(r).startMillis?(a.endMillis<s4(i).startMillis?(o=F(o,sX(a)),a=s4(i)):a=gb(a.startMillis,s4(i).endMillis),i=s6(i)):(a.endMillis<s4(r).startMillis?(o=F(o,sX(a)),a=s4(r)):a=gb(a.startMillis,s4(r).endMillis),r=s6(r));else throw Error(ea("Intervals.unionLoop"));return gO(F(o,sX(a),sV))},gR=I(2,(e,t)=>gI(e.intervals,t.intervals,sz())),gI=(e,t,s)=>{let n=e,i=t,r=s;for(;s5(n)&&s5(i);){let e=F(s4(n),gv(s4(i))),t=g_(e)?r:F(r,sX(e));F(s4(n),gx(s4(i)))?n=s6(n):i=s6(i),r=t}return gO(sV(r))},gN=e=>F(e.intervals,s3,t$(()=>gg)).startMillis,gj=I(2,(e,t)=>gN(e)<gN(t)),gA=I(2,(e,t)=>gj(e,t)?t:e),gC=e=>F(e.intervals,s3,t$(()=>gg)).endMillis,gM=e=>s5(e.intervals),gF="Continue",gL="Done",gP=e=>({_tag:gF,intervals:e}),g$=e=>({_tag:gF,intervals:gO(sZ(e))}),gU={_tag:gL},gD=e=>e._tag===gF,gz=e=>e._tag===gL,gB=Symbol.for("effect/Schedule"),gZ=e=>Q(e,gB),gq=Symbol.for("effect/ScheduleDriver"),gK={_Out:e=>e,_In:e=>e,_R:e=>e},gJ={_Out:e=>e,_In:e=>e,_R:e=>e};class gV{initial;step;[gB]=gK;constructor(e,t){this.initial=e,this.step=t}pipe(){return eP(this,arguments)}}class gG{schedule;ref;[gq]=gJ;constructor(e,t){this.schedule=e,this.ref=t}get state(){return oW(pX(this.ref),e=>e[1])}get last(){return oP(pX(this.ref),([e,t])=>{switch(e._tag){case"None":return oA(()=>new ct);case"Some":return o3(e.value)}})}get reset(){return p0(this.ref,[tL(),this.schedule.initial])}next(e){return F(oW(pX(this.ref),e=>e[1]),oP(t=>F(u8,oP(s=>F(o4(()=>this.schedule.step(s,e,t)),oP(([e,t,n])=>{let i=p0(this.ref,[ti(t),e]);if(gz(n))return lu(i,oj(tL()));let r=gN(n.intervals)-s;return r<=0?ob(i,t):F(i,lu(dO(c2(r))),ob(t))}))))))}}let gW=(e,t)=>new gV(e,t),gH=I(2,(e,t)=>gY(e,e=>o6(()=>t(e)))),gY=I(2,(e,t)=>be(e,(e,s)=>oW(t(e),e=>ur(s,cV(e))))),gQ=I(2,(e,t)=>gW([e.initial,t.initial,!0],(s,n,i)=>i[2]?oP(e.step(s,n,i[0]),([e,r,a])=>gz(a)?oW(t.step(s,n,i[1]),([t,s,n])=>[[e,t,!1],tF(s),n]):o3([[e,i[1],!0],tM(r),a])):oW(t.step(s,n,i[1]),([e,t,s])=>[[i[0],e,!1],tF(t),s]))),gX=I(2,(e,t)=>g0(e,(e,s)=>o6(()=>t(e,s)))),g0=I(2,(e,t)=>gW(e.initial,(s,n,i)=>oP(e.step(s,n,i),([e,s,i])=>gz(i)?o3([e,s,gU]):oW(t(n,s),t=>t?[e,s,i]:[e,s,gU])))),g1=I(2,(e,t)=>gW([e.initial,t.initial],(s,n,i)=>oP(e.step(s,n,i[0]),([e,n,r])=>oW(t.step(s,n,i[1]),([t,s,n])=>gz(r)?[[e,t],s,gU]:gz(n)?[[e,t],s,gU]:[[e,t],s,gP(F(r.intervals,gA(n.intervals)))])))),g2=((e,t)=>g2(e,e=>o6(()=>t(e))),I(2,(e,t)=>gW(e.initial,(s,n,i)=>oP(t(n),t=>e.step(s,t,i))))),g5=((e,t)=>be(e,(e,s)=>t(s)),e=>gH(e,e=>e)),g3=e=>F(pQ([tL(),e.initial]),oW(t=>new gG(e,t))),g4=I(2,(e,t)=>g6(e,t,gR)),g6=I(3,(e,t,s)=>gW([e.initial,t.initial],(n,i,r)=>F(lp(e.step(n,i,r[0]),t.step(n,i,r[1]),(e,t)=>[e,t]),oP(([[n,r,a],[o,l,c]])=>gD(a)&&gD(c)?g9(e,t,i,n,r,a.intervals,o,l,c.intervals,s):o3([[n,o],[r,l],gU]))))),g9=(e,t,s,n,i,r,a,o,l,c)=>{let u=c(r,l);return gM(u)?o3([[n,a],[i,o],gP(u)]):F(r,gj(l))?oP(e.step(gC(r),s,n),([n,i,r])=>gz(r)?o3([[n,a],[i,o],gU]):g9(e,t,s,n,i,r.intervals,a,o,l,c)):oP(t.step(gC(l),s,a),([a,o,l])=>gz(l)?o3([[n,a],[i,o],gU]):g9(e,t,s,n,i,r,a,o,l.intervals,c))},g8=I(2,(e,t)=>g7(e,e=>o6(()=>t(e)))),g7=I(2,(e,t)=>gW(e.initial,(s,n,i)=>oP(e.step(s,n,i),([e,s,n])=>oW(t(s),t=>[e,t,n])))),be=I(2,(e,t)=>gW(e.initial,(s,n,i)=>oP(e.step(s,n,i),([e,n,i])=>{if(gz(i))return o3([e,n,i]);let r=i.intervals;return oW(t(n,gw(gb(s,gN(r)))),t=>{let i=cV(t),a=gN(r),o=s+c8(i),l=o-a;return[e,n,g$(gb(o,Math.min(Math.max(0,gC(r)+l),Number.MAX_SAFE_INTEGER)))]})}))),bt=e=>br(bv,t=>t<e),bs=((e,t,s)=>gW([e.initial,t],(t,n,[i,r])=>oP(e.step(t,n,i),([e,t,n])=>gz(n)?o3([[e,r],r,n]):oW(s(r,t),t=>[[e,t],r,n]))),I(3,(e,t,s)=>gW([e.initial,t.initial],(n,i,r)=>lp(e.step(n,i,r[0]),t.step(n,i,r[1]),([e,t,n],[i,r,a])=>{if(gz(n)&&gz(a))return[[e,i],[t,r],gU];if(gz(n)&&gD(a))return[[e,i],[t,r],gP(a.intervals)];if(gD(n)&&gz(a))return[[e,i],[t,r],gP(n.intervals)];if(gD(n)&&gD(a))return[[e,i],[t,r],gP(s(n.intervals,a.intervals))];throw Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")})))),bn=I(2,(e,t)=>g0(e,(e,s)=>dK(t(e)))),bi=I(2,(e,t)=>g0(e,(e,s)=>t(e))),br=I(2,(e,t)=>gX(e,(e,s)=>t(s))),ba=((e,t)=>g8(g4(e,t),e=>e[0]),Symbol.for("effect/Schedule/ScheduleDefect"));class bo{error;[ba];constructor(e){this.error=e,this[ba]=ba}}let bl=e=>Q(e,ba),bc=e=>ow(e,e=>oT(new bo(e))),bu=e=>o_(e,e=>tP(az(e,e=>ak(e)&&bl(e.defect)?ti(e.defect):tL()),{onNone:()=>oC(e),onSome:e=>oj(e.error)})),bp=((e,t)=>bp(e,t,(e,t)=>oj(e)),I(3,(e,t,s)=>oP(g3(t),t=>oZ(e,{onFailure:e=>s(e,tL()),onSuccess:n=>bd(e,t,s,n)})))),bd=(e,t,s,n)=>oZ(t.next(n),{onFailure:()=>o1(t.last),onSuccess:n=>oZ(e,{onFailure:e=>s(e,ti(n)),onSuccess:n=>bd(e,t,s,n)})}),bm=I(2,(e,t)=>bf(e,t,(e,t)=>oj(e))),bh=I(2,(e,t)=>{if(gZ(t))return bm(e,t);let s=t.schedule??bv,n=t.while?bi(s,e=>{let s=t.while(e);return"boolean"==typeof s?o3(s):bc(s)}):s,i=t.until?bn(n,e=>{let s=t.until(e);return"boolean"==typeof s?o3(s):bc(s)}):n;return bu(bm(e,t.times?g4(i,bt(t.times)):i))}),bf=I(3,(e,t,s)=>oP(g3(t),t=>bg(e,t,s))),bg=(e,t,s)=>ow(e,n=>oZ(t.next(n),{onFailure:()=>F(t.last,o1,oP(e=>s(n,e))),onSuccess:()=>bg(e,t,s)})),bb=((e,t)=>bb(e,void 0,t),I(3,(e,t,s)=>oP(g3(s),s=>bx(e,t,s)))),bx=(e,t,s)=>oZ(s.next(t),{onFailure:()=>o1(s.last),onSuccess:()=>oP(e,t=>bx(e,t,s))}),by=gW(tL(),(e,t,s)=>{switch(s._tag){case"None":return o3([ti(e),cX,g$(gS(e))]);case"Some":return o3([ti(s.value),c2(e-s.value),g$(gS(e))])}}),bv=(c=e=>e+1,gW(0,(e,t,s)=>o6(()=>[c(s),s,g$(gS(e))])));class b_{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>ov(t=>{if(this.free<e){let s=()=>{this.free<e||(this.waiters.delete(s),this.taken+=e,t(o3(e)))};return this.waiters.add(s),o6(()=>{this.waiters.delete(s)})}return this.taken+=e,t(o3(e))});updateTaken=e=>of(t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(p9).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()},t.getFiberRef(lL)),o3(this.free)));release=e=>this.updateTaken(t=>t-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>t=>lt(s=>oP(s(this.take(e)),e=>gl(s(t),this.release(e))))}let bw=e=>new b_(e),bS=((e,t)=>{let s=cV(t);return oP(cj(),t=>oW(bj(tL()),n=>[cC(bk(e,s,n),t),bO(n)]))},(e,t,s)=>{let n=c8(cV(t));return F(c_(),o9(t=>oG(e,t)),oW(e=>ti([s+n,e])))}),bk=(e,t,s)=>lt(n=>F(u9(e=>e.currentTimeMillis),oP(n=>bC(s,s=>{switch(s._tag){case"None":return ti(bS(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?ti(bS(e,t,n)):tL()}}})),oP(e=>tt(e)?oR("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):n(cS(e.value[1]))))),bO=e=>p0(e,tL()),bE=((e,t)=>oP(fi,s=>F(bE(e,s),gl(oP(s.value,t)))),I(2,(e,t)=>lI(gi,e=>e.zip(t))(e))),bT=((e,{duration:t,onTimeout:s})=>oD(bT(e,{onTimeout:()=>oA(s),onSuccess:o3,duration:t})),I(2,(e,{duration:t,onSuccess:s,onTimeout:n})=>oL(i=>ga(e,oV(dO(t)),{onSelfWin:(e,t)=>oP(e.await,n=>"Success"===n._tag?oP(e.inheritAll,()=>ob(lm(t,i),s(n.value))):oP(lm(t,i),()=>cu(n.cause))),onOtherWin:(e,t)=>oP(e.await,s=>"Success"===s._tag?oP(e.inheritAll,()=>ob(lm(t,i),n())):oP(lm(t,i),()=>cu(s.cause))),otherScope:mo})))),bR=Symbol.for("effect/Ref/SynchronizedRef"),bI={_A:e=>e};class bN{ref;withLock;[bR]=bI;[pG]=pW;[pV];constructor(e,t){this.ref=e,this.withLock=t,this[pV]=pV,this.get=pX(this.ref)}get;modify(e){return this.modifyEffect(t=>o3(e(t)))}modifyEffect(e){return this.withLock(F(oP(pX(this.ref),e),oP(([e,t])=>ob(p0(this.ref,t),e))))}pipe(){return eP(this,arguments)}}let bj=e=>o6(()=>bA(e)),bA=e=>new bN(pY(e),bw(1).withPermits(1)),bC=I(2,(e,t)=>e.modifyEffect(e=>{let s=t(e);switch(s._tag){case"None":return o3([e,e]);case"Some":return oW(s.value,e=>[e,e])}})),bM=((e,t,s)=>({[ml]:mc,id:()=>F(e.id(),ih(t.id())),await:F(e.await,oD,f5(oD(t.await),s,{concurrent:!0}),oN),children:e.children,inheritAll:lu(t.inheritAll,e.inheritAll),poll:lp(e.poll,t.poll,(e,t)=>F(e,tJ(e=>F(t,tK(t=>cx(e,t,{onSuccess:s,onFailure:a_})))))),interruptAsFork:s=>lu(e.interruptAsFork(s),t.interruptAsFork(s)),pipe(){return eP(this,arguments)}}),e=>(t,s)=>{let n=iS(),i=[[lF,[[n,e.context]]]];s?.scheduler&&i.push([p9,[[n,s.scheduler]]]);let r=px(e.fiberRefs,{entries:i,forkAs:n});s?.updateRefs&&(r=s.updateRefs(r,n));let a=new fj(n,r,e.runtimeFlags),o=t;s?.scope&&(o=oP(l5(s.scope,ps),e=>lu(l0(e,oL(e=>eR(e,a.id())?ls:lm(a,e))),oQ(t,t=>l2(e,t)))));let l=a._supervisor;return l!==fa&&(l.onStart(e.context,o,tL(),a),a.addObserver(e=>l.onEnd(e,a))),mo.add(e.runtimeFlags,a),s?.immediate===!1?a.resume(o):a.start(o),a});class bF extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}let bL=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new bF(e);return Error.stackTraceLimit=t,s},bP=Symbol.for("effect/Runtime/FiberFailure"),b$=Symbol.for("effect/Runtime/FiberFailure/Cause");class bU extends Error{[bP];[b$];constructor(e){super(),this[bP]=bP,this[b$]=e;let t=a1(e);if(t.length>0){let s=t[0];this.name=s.message.split(":")[0],this.message=s.message.substring(this.name.length+2),this.stack=aH(e)}this.name=`(FiberFailure) ${this.name}`}toJSON(){return{_id:"FiberFailure",cause:this[b$].toJSON()}}toString(){return"(FiberFailure) "+aH(this[b$])}[eA](){return this.toString()}}let bD=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new bU(e);return Error.stackTraceLimit=t,s},bz=e=>{switch(e._op){case"Failure":case"Success":return e;case"Left":return cc(e.left);case"Right":return cg(e.right);case"Some":return cg(e.value);case"None":return cc(ct())}},bB=e=>t=>{let s=bz(t);if(s)return s;let n=new p6,i=bM(e)(t,{scheduler:n});n.flush();let r=i.unsafePoll();if(r)return r;throw bL(i)},bZ=e=>(t,s)=>new Promise(n=>{let i=bz(t);i&&n(i);let r=bM(e)(t);r.addObserver(e=>{n(e)}),s?.signal!==void 0&&(s.signal.aborted?r.unsafeInterruptAsFork(r.id()):s.signal.addEventListener("abort",()=>{r.unsafeInterruptAsFork(r.id())}))});class bq{context;runtimeFlags;fiberRefs;constructor(e,t,s){this.context=e,this.runtimeFlags=t,this.fiberRefs=s}pipe(){return eP(this,arguments)}}let bK=ae(1,32,4),bJ=new bq((u={context:t_(),runtimeFlags:bK,fiberRefs:new pl(new Map)}).context,u.runtimeFlags,u.fiberRefs),bV=(e,t)=>bZ(bJ)(e,t).then(e=>{switch(e._tag){case eq:return e.effect_instruction_i0;case eD:throw bD(e.effect_instruction_i0)}}),bG=e=>{let t=bB(bJ)(e);if("Failure"!==t._tag)return t.effect_instruction_i0;throw bD(t.effect_instruction_i0)},bW=I(2,(e,t)=>e.modifyEffect(t)),bH=Symbol.for("effect/Layer"),bY={[bH]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return eP(this,arguments)}},bQ=Symbol.for("effect/Layer/MemoMap"),bX=e=>Q(e,bH),b0=e=>"Fresh"===e._tag;class b1{ref;[bQ];constructor(e){this.ref=e,this[bQ]=bQ}getOrElseMemoize(e,t){return F(bW(this.ref,s=>{let n=s.get(e);if(void 0!==n){let[e,i]=n;return o3([F(e,oP(([e,t])=>F(dJ(e),ob(t))),oQ(ch({onFailure:()=>ls,onSuccess:()=>l1(t,i)}))),s])}return F(pQ(0),oP(n=>F(c_(),oP(i=>F(pQ(()=>ls),oW(r=>{let a=lt(a=>F(f7(),oP(o=>F(a(oP(b3(e,o,!0),e=>dF(e(this)))),oN,oP(a=>{switch(a._tag){case eD:return F(cE(i,a.effect_instruction_i0),lu(l2(o,a)),lu(oC(a.effect_instruction_i0)));case eq:return F(p0(r,e=>F(l2(o,e),li(p1(n,e=>[1===e,e-1])),ox)),lu(p2(n,e=>e+1)),lu(l1(t,t=>F(o6(()=>s.delete(e)),lu(pX(r)),oP(e=>e(t))))),lu(cT(i,a.effect_instruction_i0)),ob(a.effect_instruction_i0[1]))}}))))),o=[F(cS(i),oQ(cf({onFailure:()=>ls,onSuccess:()=>p2(n,e=>e+1)}))),e=>F(pX(r),oP(t=>t(e)))];return[a,b0(e)?s:s.set(e,o)]}))))))}),oD)}}let b2=o4(()=>oW(bj(new Map),e=>new b1(e))),b5=I(2,(e,t)=>oP(b2,s=>oP(b3(e,t),e=>e(s)))),b3=(e,t,s=!1)=>{switch(e._tag){case"Locally":return o6(()=>s=>e.f(s.getOrElseMemoize(e.self,t)));case"ExtendScope":return o6(()=>t=>f1(s=>t.getOrElseMemoize(e.layer,s)));case"Fold":return o6(()=>s=>F(s.getOrElseMemoize(e.layer,t),oB({onFailure:n=>s.getOrElseMemoize(e.failureK(n),t),onSuccess:n=>s.getOrElseMemoize(e.successK(n),t)})));case"Fresh":return o6(()=>s=>F(e.layer,b5(t)));case"FromEffect":return s?o6(()=>t=>e.effect):o6(()=>s=>s.getOrElseMemoize(e,t));case"Provide":return o6(()=>s=>F(s.getOrElseMemoize(e.first,t),oP(n=>F(s.getOrElseMemoize(e.second,t),cC(n)))));case"Scoped":return s?o6(()=>s=>ge(e.effect,t)):o6(()=>s=>s.getOrElseMemoize(e,t));case"Suspend":return o6(()=>s=>s.getOrElseMemoize(e.evaluate(),t));case"ProvideMerge":return o6(()=>s=>F(s.getOrElseMemoize(e.first,t),lp(s.getOrElseMemoize(e.second,t),e.zipK)));case"ZipWith":return o6(()=>s=>F(s.getOrElseMemoize(e.first,t),f5(s.getOrElseMemoize(e.second,t),e.zipK,{concurrent:!0})))}},b4=e=>b6(ax(e)),b6=e=>b7(oC(e)),b9=I(2,(e,t)=>xt(e,{onFailure:b4,onSuccess:t})),b8=I(2,(e,t)=>{let s=tv(e),n=s?e:t;return b7(oW(s?t:e,e=>th(n,e)))});function b7(e){let t=Object.create(bY);return t._tag="FromEffect",t.effect=e,t}let xe=I(2,(e,{onFailure:t,onSuccess:s})=>{let n=Object.create(bY);return n._tag="Fold",n.layer=e,n.failureK=t,n.successK=s,n}),xt=I(2,(e,{onFailure:t,onSuccess:s})=>xe(e,{onFailure:e=>{let s=aA(e);switch(s._tag){case"Left":return t(s.left);case"Right":return b6(s.right)}},onSuccess:s})),xs=I(2,(e,t)=>{let s=tv(e),n=s?e:t;return xi(oW(s?t:e,e=>th(n,e)))}),xn=e=>xi(F(e,ob(t_()))),xi=e=>{let t=Object.create(bY);return t._tag="Scoped",t.effect=e,t},xr=I(2,(e,t)=>og(f7(),s=>oP(b5(t,s),t=>cM(e,t)),(e,t)=>l2(e,t))),xa=I(2,(e,t)=>{let s=pk(bJ.fiberRefs,t.fiberRefs),n=ai(bJ.runtimeFlags,t.runtimeFlags);return lt(i=>of(r=>{let a=r.getFiberRefs(),o=pE(r.id(),a)(s),l=r._runtimeFlags,c=ar(n)(l),u=pk(o,a),p=ai(c,l);return r.setFiberRefs(o),r._runtimeFlags=c,gl(cM(i(e),t.context),of(e=>(e.setFiberRefs(pE(e.id(),e.getFiberRefs())(u)),e._runtimeFlags=ar(p)(e._runtimeFlags),ls)))}))}),xo=I(2,(e,t)=>bX(t)?xr(e,t):td(t)?cM(e,t):xa(e,t)),xl=Symbol.for("effect/MutableList"),xc={[xl]:xl,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();let s=t.value;return t=t.next,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return eM(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(eC)}},[eA](){return this.toJSON()},pipe(){return eP(this,arguments)}},xu=e=>({value:e,removed:!1,prev:void 0,next:void 0}),xp=()=>{let e=Object.create(xc);return e.head=void 0,e.tail=void 0,e._length=0,e},xd=e=>0===xm(e),xm=e=>e._length,xh=I(2,(e,t)=>{let s=xu(t);return void 0===e.head&&(e.head=s),void 0===e.tail||(e.tail.next=s,s.prev=e.tail),e.tail=s,e._length+=1,e}),xf=e=>{let t=e.head;if(void 0!==t)return xg(e,t),t.value},xg=(e,t)=>{!t.removed&&(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},xb=Symbol.for("effect/MutableQueue"),xx=Symbol.for("effect/mutable/MutableQueue/Empty"),xy={[xb]:xb,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return eM(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(eC)}},[eA](){return this.toJSON()},pipe(){return eP(this,arguments)}},xv=e=>{let t=Object.create(xy);return t.queue=xp(),t.capacity=e,t},x_=()=>xv(void 0),xw=I(2,(e,t)=>{let s=xm(e.queue);return(void 0===e.capacity||s!==e.capacity)&&(xh(t)(e.queue),!0)}),xS=I(2,(e,t)=>xd(e.queue)?t:xf(e.queue)),xk=(e,t,s,n)=>iG({_tag:"Complete",key:e,exit:t,entryStats:s,timeToLiveMillis:n}),xO=(e,t)=>iG({_tag:"Pending",key:e,deferred:t}),xE=(e,t)=>iG({_tag:"Refreshing",deferred:e,complete:t}),xT=Symbol.for("effect/Cache/MapKey");class xR{current;[xT]=xT;previous=void 0;next=void 0;constructor(e){this.current=e}[ef](){return F(eg(this.current),ex(eg(this.previous)),ex(eg(this.next)),eE(this))}[eT](e){return this===e||xN(e)&&eR(this.current,e.current)&&eR(this.previous,e.previous)&&eR(this.next,e.next)}}let xI=e=>new xR(e),xN=e=>Q(e,xT);class xj{head=void 0;tail=void 0;add(e){if(e!==this.tail){if(void 0===this.tail)this.head=e,this.tail=e;else{let t=e.previous,s=e.next;void 0!==s&&(e.next=void 0,void 0!==t?(t.next=s,s.previous=t):(this.head=s,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}}remove(){let e=this.head;if(void 0!==e){let t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}let xA=()=>new xj,xC=(e,t,s,n,i,r)=>({map:e,keys:t,accesses:s,updating:n,hits:i,misses:r}),xM=()=>xC(m5(),xA(),x_(),n6(!1),0,0),xF=Symbol.for("effect/Cache"),xL={_Key:e=>e,_Error:e=>e,_Value:e=>e},xP=e=>e,x$=e=>({loadedMillis:e});class xU{capacity;context;fiberId;lookup;timeToLive;[xF]=xL;cacheState;constructor(e,t,s,n,i){this.capacity=e,this.context=t,this.fiberId=s,this.lookup=n,this.timeToLive=i,this.cacheState=xM()}get(e){return oW(this.getEither(e),s9)}get cacheStats(){return o6(()=>xP({hits:this.cacheState.hits,misses:this.cacheState.misses,size:he(this.cacheState.map)}))}getOption(e){return o4(()=>tP(m3(this.cacheState.map,e),{onNone:()=>{let t=xI(e);return this.trackAccess(t),this.trackMiss(),o3(tL())},onSome:e=>this.resolveMapValue(e)}))}getOptionComplete(e){return o4(()=>tP(m3(this.cacheState.map,e),{onNone:()=>{let t=xI(e);return this.trackAccess(t),this.trackMiss(),o3(tL())},onSome:e=>this.resolveMapValue(e,!0)}))}contains(e){return o6(()=>m6(this.cacheState.map,e))}entryStats(e){return o6(()=>{let t=m3(this.cacheState.map,e);if(ts(t))switch(t.value._tag){case"Complete":return ti(x$(t.value.entryStats.loadedMillis));case"Pending":break;case"Refreshing":return ti(x$(t.value.complete.entryStats.loadedMillis))}return tL()})}getEither(e){return o4(()=>{let t,s;let n=tB(m3(this.cacheState.map,e));return(void 0===n&&(s=cv(this.fiberId),t=xI(e),m6(this.cacheState.map,e)?n=tB(m3(this.cacheState.map,e)):m9(this.cacheState.map,e,xO(t,s))),void 0===n)?(this.trackAccess(t),this.trackMiss(),oW(this.lookupValueOf(e,s),tF)):oP(this.resolveMapValue(n),tP({onNone:()=>this.getEither(e),onSome:e=>o3(tM(e))}))})}invalidate(e){return o6(()=>{m7(this.cacheState.map,e)})}invalidateWhen(e,t){return o6(()=>{let s=m3(this.cacheState.map,e);ts(s)&&"Complete"===s.value._tag&&"Success"===s.value.exit._tag&&t(s.value.exit.value)&&m7(this.cacheState.map,e)})}get invalidateAll(){return o6(()=>{this.cacheState.map=m5()})}refresh(e){return u9(t=>o4(()=>{let s=cv(this.fiberId),n=tB(m3(this.cacheState.map,e));if(void 0===n&&(m6(this.cacheState.map,e)?n=tB(m3(this.cacheState.map,e)):m9(this.cacheState.map,e,xO(xI(e),s))),void 0===n)return ox(this.lookupValueOf(e,s));switch(n._tag){case"Complete":if(this.hasExpired(t,n.timeToLiveMillis))return eR(tB(m3(this.cacheState.map,e)),n)&&m7(this.cacheState.map,e),ox(this.get(e));return F(this.lookupValueOf(e,s),dX(()=>{if(eR(tB(m3(this.cacheState.map,e)),n)){let t=xE(s,n);return m9(this.cacheState.map,e,t),!0}return!1}),ox);case"Pending":case"Refreshing":return cS(n.deferred)}}))}set(e,t){return u9(s=>o6(()=>{let n=s.unsafeCurrentTimeMillis(),i=cg(t),r=xk(xI(e),i,x$(n),n+c8(cV(this.timeToLive(i))));m9(this.cacheState.map,e,r)}))}get size(){return o6(()=>he(this.cacheState.map))}get values(){return o6(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e})}get entries(){return o6(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e})}get keys(){return o6(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e})}resolveMapValue(e,t=!1){return u9(s=>{switch(e._tag){case"Complete":if(this.trackAccess(e.key),this.hasExpired(s,e.timeToLiveMillis))return m7(this.cacheState.map,e.key.current),o3(tL());return this.trackHit(),oW(e.exit,ti);case"Pending":if(this.trackAccess(e.key),this.trackHit(),t)return o3(tL());return oW(cS(e.deferred),ti);case"Refreshing":if(this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(s,e.complete.timeToLiveMillis)){if(t)return o3(tL());return oW(cS(e.deferred),ti)}return oW(e.complete.exit,ti)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(xw(this.cacheState.accesses,e),n9(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){let t=xS(this.cacheState.accesses,xx);t===xx?e=!1:this.cacheState.keys.add(t)}let t=he(this.cacheState.map);for(e=t>this.capacity;e;){let s=this.cacheState.keys.remove();void 0!==s?m6(this.cacheState.map,s.current)&&(m7(this.cacheState.map,s.current),t-=1,e=t>this.capacity):e=!1}n7(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return u9(s=>o4(()=>F(this.lookup(e),cC(this.context),oN,oP(n=>{let i=s.unsafeCurrentTimeMillis(),r=x$(i),a=xk(xI(e),n,r,i+c8(cV(this.timeToLive(n))));return m9(this.cacheState.map,e,a),lu(cO(t,n),n)}),oX(()=>lu(u7(t),o6(()=>{m7(this.cacheState.map,e)}))))))}}let xD=(e,t,s)=>new xU(e,t_(),iu,t,e=>cV(s(e))),xz=(()=>lN(xD(65536,()=>oW(c_(),e=>({listeners:new h6,handle:e})),()=>c5(60))),function(){let e;return e=1==arguments.length?arguments[0]:arguments[1].bind(arguments[0]),o4(()=>{let t=e(F),s=t.next(),n=e=>e.done?o3(e.value):oP(function(e){if("object"==typeof e&&null!==e&&eu in e)return e[eu]();throw Error(ea("yieldWrapGet"))}(e.value),e=>n(t.next(e)));return n(s)})}),xB=Object.create(null),xZ=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?xB:globalThis),xq=new Proxy(xB,{get:(e,t)=>xZ()[t]??xB[t],has:(e,t)=>t in xZ()||t in xB,set:(e,t,s)=>(xZ(!0)[t]=s,!0),deleteProperty(e,t){if(!t)return!1;let s=xZ(!0);return delete s[t],!0},ownKeys:()=>Object.keys(xZ(!0))}),xK="u">typeof process&&process.env&&"production"||"",xJ=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"]],xV=function(){if(globalThis.process?.env)for(let e of xJ){let t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return globalThis.process?.env?.SHELL==="/bin/jsh"&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function xG(e){return!!e&&"false"!==e}xV.name;let xW=globalThis.process?.platform||"",xH=(xG(xq.CI)||xV.ci,xG(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY)),xY=(xG(xq.DEBUG),"test"===xK||xG(xq.TEST),"dev"===xK||"development"===xK),xQ=(xG(xq.MINIMAL),/^win/i.test(xW)),xX=(/^linux/i.test(xW),/^darwin/i.test(xW),!xG(xq.NO_COLOR)&&(xG(xq.FORCE_COLOR)||(xH||xQ)&&xq.TERM),(globalThis.process?.versions?.node||"").replace(/^v/,"")||null),x0=(xX?.split(".")[0],globalThis.process||Object.create(null)),x1={versions:{}},x2=new Proxy(x0,{get:(e,t)=>"env"===t?xq:t in e?e[t]:t in x1?x1[t]:void 0}),x5=globalThis.process?.release?.name==="node",x3=!!globalThis.Bun||!!globalThis.process?.versions?.bun,x4=!!globalThis.Deno,x6=!!globalThis.fastly,x9=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],[globalThis.navigator?.userAgent==="Cloudflare-Workers","workerd"],[x6,"fastly"],[x4,"deno"],[x3,"bun"],[x5,"node"],[!!globalThis.__lagon__,"lagon"]],x8=function(){let e=x9.find(e=>e[0]);if(e)return{name:e[1]}}();x8?.name;let x7={"application/andrew-inset":{source:"iana",extensions:["ez"],compressible:null},"application/applixware":{source:"apache",extensions:["aw"],compressible:null},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"],compressible:null},"application/cdmi-container":{source:"iana",extensions:["cdmic"],compressible:null},"application/cdmi-domain":{source:"iana",extensions:["cdmid"],compressible:null},"application/cdmi-object":{source:"iana",extensions:["cdmio"],compressible:null},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"],compressible:null},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"],compressible:null},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dicom":{source:"iana",compressible:!1,extensions:["dcm"]},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"],compressible:null},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"],compressible:null},"application/express":{source:"iana",extensions:["exp"],compressible:null},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"],compressible:null},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"],compressible:null},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"],compressible:null},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"],compressible:null},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"],compressible:null},"application/mac-compactpro":{source:"apache",extensions:["cpt"],compressible:null},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"],compressible:null},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"],compressible:null},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"],compressible:null},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"],compressible:null},"application/mp4":{source:"iana",extensions:["mp4s","m4p"],compressible:null},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"],compressible:null},"application/n-quads":{source:"iana",extensions:["nq"],compressible:null},"application/n-triples":{source:"iana",extensions:["nt"],compressible:null},"application/node":{source:"iana",extensions:["cjs"],compressible:null},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"],compressible:null},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"],compressible:null},"application/oxps":{source:"iana",extensions:["oxps"],compressible:null},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"],compressible:null},"application/pgp-signature":{source:"iana",extensions:["asc","sig"],compressible:null},"application/pics-rules":{source:"apache",extensions:["prf"],compressible:null},"application/pkcs10":{source:"iana",extensions:["p10"],compressible:null},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"],compressible:null},"application/pkcs7-signature":{source:"iana",extensions:["p7s"],compressible:null},"application/pkcs8":{source:"iana",extensions:["p8"],compressible:null},"application/pkix-attr-cert":{source:"iana",extensions:["ac"],compressible:null},"application/pkix-cert":{source:"iana",extensions:["cer"],compressible:null},"application/pkix-crl":{source:"iana",extensions:["crl"],compressible:null},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"],compressible:null},"application/pkixcmp":{source:"iana",extensions:["pki"],compressible:null},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"],compressible:null},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"],compressible:null},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"],compressible:null},"application/rpki-manifest":{source:"iana",extensions:["mft"],compressible:null},"application/rpki-roa":{source:"iana",extensions:["roa"],compressible:null},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"],compressible:null},"application/scvp-cv-response":{source:"iana",extensions:["scs"],compressible:null},"application/scvp-vp-request":{source:"iana",extensions:["spq"],compressible:null},"application/scvp-vp-response":{source:"iana",extensions:["spp"],compressible:null},"application/sdp":{source:"iana",extensions:["sdp"],compressible:null},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"],compressible:null},"application/set-registration-initiation":{source:"iana",extensions:["setreg"],compressible:null},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"],compressible:null},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"],compressible:null},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"],compressible:null},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"],compressible:null},"application/trig":{source:"iana",extensions:["trig"],compressible:null},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"],compressible:null},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"],compressible:null},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"],compressible:null},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"],compressible:null},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"],compressible:null},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"],compressible:null},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"],compressible:null},"application/vnd.acucobol":{source:"iana",extensions:["acu"],compressible:null},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"],compressible:null},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"],compressible:null},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"],compressible:null},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"],compressible:null},"application/vnd.age":{source:"iana",extensions:["age"],compressible:null},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"],compressible:null},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"],compressible:null},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"],compressible:null},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"],compressible:null},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"],compressible:null},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"],compressible:null},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"],compressible:null},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"],compressible:null},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"],compressible:null},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"],compressible:null},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"],compressible:null},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"],compressible:null},"application/vnd.apple.pages":{source:"iana",extensions:["pages"],compressible:null},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"],compressible:null},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"],compressible:null},"application/vnd.audiograph":{source:"iana",extensions:["aep"],compressible:null},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"],compressible:null},"application/vnd.bmi":{source:"iana",extensions:["bmi"],compressible:null},"application/vnd.businessobjects":{source:"iana",extensions:["rep"],compressible:null},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"],compressible:null},"application/vnd.cinderella":{source:"iana",extensions:["cdy"],compressible:null},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"],compressible:null},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"],compressible:null},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"],compressible:null},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"],compressible:null},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"],compressible:null},"application/vnd.commonspace":{source:"iana",extensions:["csp"],compressible:null},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"],compressible:null},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"],compressible:null},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"],compressible:null},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"],compressible:null},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"],compressible:null},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"],compressible:null},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"],compressible:null},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"],compressible:null},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"],compressible:null},"application/vnd.curl.car":{source:"apache",extensions:["car"],compressible:null},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"],compressible:null},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"],compressible:null},"application/vnd.dbf":{source:"iana",extensions:["dbf"],compressible:null},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"],compressible:null},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"],compressible:null},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"],compressible:null},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"],compressible:null},"application/vnd.dna":{source:"iana",extensions:["dna"],compressible:null},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"],compressible:null},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"],compressible:null},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"],compressible:null},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"],compressible:null},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"],compressible:null},"application/vnd.dvb.service":{source:"iana",extensions:["svc"],compressible:null},"application/vnd.dynageo":{source:"iana",extensions:["geo"],compressible:null},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"],compressible:null},"application/vnd.enliven":{source:"iana",extensions:["nml"],compressible:null},"application/vnd.epson.esf":{source:"iana",extensions:["esf"],compressible:null},"application/vnd.epson.msf":{source:"iana",extensions:["msf"],compressible:null},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"],compressible:null},"application/vnd.epson.salt":{source:"iana",extensions:["slt"],compressible:null},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"],compressible:null},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"],compressible:null},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"],compressible:null},"application/vnd.fdf":{source:"iana",extensions:["fdf"],compressible:null},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"],compressible:null},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"],compressible:null},"application/vnd.flographit":{source:"iana",extensions:["gph"],compressible:null},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"],compressible:null},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"],compressible:null},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"],compressible:null},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"],compressible:null},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"],compressible:null},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"],compressible:null},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"],compressible:null},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"],compressible:null},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"],compressible:null},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"],compressible:null},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"],compressible:null},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"],compressible:null},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"],compressible:null},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"],compressible:null},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"],compressible:null},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"],compressible:null},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"],compressible:null},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"],compressible:null},"application/vnd.geonext":{source:"iana",extensions:["gxt"],compressible:null},"application/vnd.geoplan":{source:"iana",extensions:["g2w"],compressible:null},"application/vnd.geospace":{source:"iana",extensions:["g3w"],compressible:null},"application/vnd.gmx":{source:"iana",extensions:["gmx"],compressible:null},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"],compressible:null},"application/vnd.groove-account":{source:"iana",extensions:["gac"],compressible:null},"application/vnd.groove-help":{source:"iana",extensions:["ghf"],compressible:null},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"],compressible:null},"application/vnd.groove-injector":{source:"iana",extensions:["grv"],compressible:null},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"],compressible:null},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"],compressible:null},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"],compressible:null},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"],compressible:null},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"],compressible:null},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"],compressible:null},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"],compressible:null},"application/vnd.hp-hps":{source:"iana",extensions:["hps"],compressible:null},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"],compressible:null},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"],compressible:null},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"],compressible:null},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"],compressible:null},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"],compressible:null},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"],compressible:null},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"],compressible:null},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"],compressible:null},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"],compressible:null},"application/vnd.igloader":{source:"iana",extensions:["igl"],compressible:null},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"],compressible:null},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"],compressible:null},"application/vnd.insors.igm":{source:"iana",extensions:["igm"],compressible:null},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"],compressible:null},"application/vnd.intergeo":{source:"iana",extensions:["i2g"],compressible:null},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"],compressible:null},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"],compressible:null},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"],compressible:null},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"],compressible:null},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"],compressible:null},"application/vnd.jam":{source:"iana",extensions:["jam"],compressible:null},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"],compressible:null},"application/vnd.jisp":{source:"iana",extensions:["jisp"],compressible:null},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"],compressible:null},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"],compressible:null},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"],compressible:null},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"],compressible:null},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"],compressible:null},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"],compressible:null},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"],compressible:null},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"],compressible:null},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"],compressible:null},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"],compressible:null},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"],compressible:null},"application/vnd.kidspiration":{source:"iana",extensions:["kia"],compressible:null},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"],compressible:null},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"],compressible:null},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"],compressible:null},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"],compressible:null},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"],compressible:null},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"],compressible:null},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"],compressible:null},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"],compressible:null},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"],compressible:null},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"],compressible:null},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"],compressible:null},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"],compressible:null},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"],compressible:null},"application/vnd.mcd":{source:"iana",extensions:["mcd"],compressible:null},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"],compressible:null},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"],compressible:null},"application/vnd.mfer":{source:"iana",extensions:["mwf"],compressible:null},"application/vnd.mfmp":{source:"iana",extensions:["mfm"],compressible:null},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"],compressible:null},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"],compressible:null},"application/vnd.mif":{source:"iana",extensions:["mif"],compressible:null},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"],compressible:null},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"],compressible:null},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"],compressible:null},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"],compressible:null},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"],compressible:null},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"],compressible:null},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"],compressible:null},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"],compressible:null},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"],compressible:null},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"],compressible:null},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"],compressible:null},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"],compressible:null},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"],compressible:null},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"],compressible:null},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"],compressible:null},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"],compressible:null},"application/vnd.ms-ims":{source:"iana",extensions:["ims"],compressible:null},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"],compressible:null},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"],compressible:null},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"],compressible:null},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"],compressible:null},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"],compressible:null},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"],compressible:null},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"],compressible:null},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"],compressible:null},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"],compressible:null},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"],compressible:null},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"],compressible:null},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"],compressible:null},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"],compressible:null},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"],compressible:null},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"],compressible:null},"application/vnd.musician":{source:"iana",extensions:["mus"],compressible:null},"application/vnd.muvee.style":{source:"iana",extensions:["msty"],compressible:null},"application/vnd.mynfc":{source:"iana",extensions:["taglet"],compressible:null},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"],compressible:null},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"],compressible:null},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"],compressible:null},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"],compressible:null},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"],compressible:null},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"],compressible:null},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"],compressible:null},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"],compressible:null},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"],compressible:null},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"],compressible:null},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"],compressible:null},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"],compressible:null},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"],compressible:null},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"],compressible:null},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"],compressible:null},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"],compressible:null},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"],compressible:null},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"],compressible:null},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"],compressible:null},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"],compressible:null},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"],compressible:null},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"],compressible:null},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"],compressible:null},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"],compressible:null},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"],compressible:null},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"],compressible:null},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"],compressible:null},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"],compressible:null},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"],compressible:null},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"],compressible:null},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"],compressible:null},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"],compressible:null},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"],compressible:null},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"],compressible:null},"application/vnd.pawaafile":{source:"iana",extensions:["paw"],compressible:null},"application/vnd.pg.format":{source:"iana",extensions:["str"],compressible:null},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"],compressible:null},"application/vnd.picsel":{source:"iana",extensions:["efif"],compressible:null},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"],compressible:null},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"],compressible:null},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"],compressible:null},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"],compressible:null},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"],compressible:null},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"],compressible:null},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"],compressible:null},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"],compressible:null},"application/vnd.rar":{source:"iana",extensions:["rar"],compressible:null},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"],compressible:null},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"],compressible:null},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"],compressible:null},"application/vnd.rim.cod":{source:"apache",extensions:["cod"],compressible:null},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"],compressible:null},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"],compressible:null},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"],compressible:null},"application/vnd.seemail":{source:"iana",extensions:["see"],compressible:null},"application/vnd.sema":{source:"iana",extensions:["sema"],compressible:null},"application/vnd.semd":{source:"iana",extensions:["semd"],compressible:null},"application/vnd.semf":{source:"iana",extensions:["semf"],compressible:null},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"],compressible:null},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"],compressible:null},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"],compressible:null},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"],compressible:null},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"],compressible:null},"application/vnd.smaf":{source:"iana",extensions:["mmf"],compressible:null},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"],compressible:null},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"],compressible:null},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"],compressible:null},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"],compressible:null},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"],compressible:null},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"],compressible:null},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"],compressible:null},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"],compressible:null},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"],compressible:null},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"],compressible:null},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"],compressible:null},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"],compressible:null},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"],compressible:null},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"],compressible:null},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"],compressible:null},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"],compressible:null},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"],compressible:null},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"],compressible:null},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"],compressible:null},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"],compressible:null},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"],compressible:null},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"],compressible:null},"application/vnd.svd":{source:"iana",extensions:["svd"],compressible:null},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"],compressible:null},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"],compressible:null},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"],compressible:null},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"],compressible:null},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"],compressible:null},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"],compressible:null},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"],compressible:null},"application/vnd.trueapp":{source:"iana",extensions:["tra"],compressible:null},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"],compressible:null},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"],compressible:null},"application/vnd.umajin":{source:"iana",extensions:["umj"],compressible:null},"application/vnd.unity":{source:"iana",extensions:["unityweb"],compressible:null},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"],compressible:null},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"],compressible:null},"application/vnd.visionary":{source:"iana",extensions:["vis"],compressible:null},"application/vnd.vsf":{source:"iana",extensions:["vsf"],compressible:null},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"],compressible:null},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"],compressible:null},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"],compressible:null},"application/vnd.webturbo":{source:"iana",extensions:["wtb"],compressible:null},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"],compressible:null},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"],compressible:null},"application/vnd.wqd":{source:"iana",extensions:["wqd"],compressible:null},"application/vnd.wt.stf":{source:"iana",extensions:["stf"],compressible:null},"application/vnd.xara":{source:"iana",extensions:["xar"],compressible:null},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"],compressible:null},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"],compressible:null},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"],compressible:null},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"],compressible:null},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"],compressible:null},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"],compressible:null},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"],compressible:null},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"],compressible:null},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"],compressible:null},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"],compressible:null},"application/winhlp":{source:"apache",extensions:["hlp"],compressible:null},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"],compressible:null},"application/x-ace-compressed":{source:"apache",extensions:["ace"],compressible:null},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"],compressible:null},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"],compressible:null},"application/x-authorware-map":{source:"apache",extensions:["aam"],compressible:null},"application/x-authorware-seg":{source:"apache",extensions:["aas"],compressible:null},"application/x-bcpio":{source:"apache",extensions:["bcpio"],compressible:null},"application/x-bittorrent":{source:"apache",extensions:["torrent"],compressible:null},"application/x-blorb":{source:"apache",extensions:["blb","blorb"],compressible:null},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"],compressible:null},"application/x-cdlink":{source:"apache",extensions:["vcd"],compressible:null},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"],compressible:null},"application/x-chat":{source:"apache",extensions:["chat"],compressible:null},"application/x-chess-pgn":{source:"apache",extensions:["pgn"],compressible:null},"application/x-cocoa":{source:"nginx",extensions:["cco"],compressible:null},"application/x-conference":{source:"apache",extensions:["nsc"],compressible:null},"application/x-cpio":{source:"apache",extensions:["cpio"],compressible:null},"application/x-csh":{source:"apache",extensions:["csh"],compressible:null},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"],compressible:null},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"],compressible:null},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],compressible:null},"application/x-doom":{source:"apache",extensions:["wad"],compressible:null},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"],compressible:null},"application/x-eva":{source:"apache",extensions:["eva"],compressible:null},"application/x-font-bdf":{source:"apache",extensions:["bdf"],compressible:null},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"],compressible:null},"application/x-font-linux-psf":{source:"apache",extensions:["psf"],compressible:null},"application/x-font-pcf":{source:"apache",extensions:["pcf"],compressible:null},"application/x-font-snf":{source:"apache",extensions:["snf"],compressible:null},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"],compressible:null},"application/x-freearc":{source:"apache",extensions:["arc"],compressible:null},"application/x-futuresplash":{source:"apache",extensions:["spl"],compressible:null},"application/x-gca-compressed":{source:"apache",extensions:["gca"],compressible:null},"application/x-glulx":{source:"apache",extensions:["ulx"],compressible:null},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"],compressible:null},"application/x-gramps-xml":{source:"apache",extensions:["gramps"],compressible:null},"application/x-gtar":{source:"apache",extensions:["gtar"],compressible:null},"application/x-hdf":{source:"apache",extensions:["hdf"],compressible:null},"application/x-install-instructions":{source:"apache",extensions:["install"],compressible:null},"application/x-iso9660-image":{source:"apache",extensions:["iso"],compressible:null},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"],compressible:null},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"],compressible:null},"application/x-makeself":{source:"nginx",extensions:["run"],compressible:null},"application/x-mie":{source:"apache",extensions:["mie"],compressible:null},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"],compressible:null},"application/x-ms-application":{source:"apache",extensions:["application"],compressible:null},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"],compressible:null},"application/x-ms-wmd":{source:"apache",extensions:["wmd"],compressible:null},"application/x-ms-wmz":{source:"apache",extensions:["wmz"],compressible:null},"application/x-ms-xbap":{source:"apache",extensions:["xbap"],compressible:null},"application/x-msaccess":{source:"apache",extensions:["mdb"],compressible:null},"application/x-msbinder":{source:"apache",extensions:["obd"],compressible:null},"application/x-mscardfile":{source:"apache",extensions:["crd"],compressible:null},"application/x-msclip":{source:"apache",extensions:["clp"],compressible:null},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"],compressible:null},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"],compressible:null},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"],compressible:null},"application/x-msmoney":{source:"apache",extensions:["mny"],compressible:null},"application/x-mspublisher":{source:"apache",extensions:["pub"],compressible:null},"application/x-msschedule":{source:"apache",extensions:["scd"],compressible:null},"application/x-msterminal":{source:"apache",extensions:["trm"],compressible:null},"application/x-mswrite":{source:"apache",extensions:["wri"],compressible:null},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"],compressible:null},"application/x-nzb":{source:"apache",extensions:["nzb"],compressible:null},"application/x-perl":{source:"nginx",extensions:["pl","pm"],compressible:null},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"],compressible:null},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"],compressible:null},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"],compressible:null},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"],compressible:null},"application/x-research-info-systems":{source:"apache",extensions:["ris"],compressible:null},"application/x-sea":{source:"nginx",extensions:["sea"],compressible:null},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"],compressible:null},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"],compressible:null},"application/x-sql":{source:"apache",extensions:["sql"],compressible:null},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"],compressible:null},"application/x-subrip":{source:"apache",extensions:["srt"],compressible:null},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"],compressible:null},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"],compressible:null},"application/x-t3vm-image":{source:"apache",extensions:["t3"],compressible:null},"application/x-tads":{source:"apache",extensions:["gam"],compressible:null},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"],compressible:null},"application/x-tex":{source:"apache",extensions:["tex"],compressible:null},"application/x-tex-tfm":{source:"apache",extensions:["tfm"],compressible:null},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"],compressible:null},"application/x-tgif":{source:"apache",extensions:["obj"],compressible:null},"application/x-ustar":{source:"apache",extensions:["ustar"],compressible:null},"application/x-wais-source":{source:"apache",extensions:["src"],compressible:null},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"],compressible:null},"application/x-xfig":{source:"apache",extensions:["fig"],compressible:null},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"],compressible:null},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"],compressible:null},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"],compressible:null},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"],compressible:null},"audio/amr":{source:"iana",extensions:["amr"],compressible:null},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"],compressible:null},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"],compressible:null},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"],compressible:null},"audio/silk":{source:"apache",extensions:["sil"],compressible:null},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"],compressible:null},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"],compressible:null},"audio/vnd.dra":{source:"iana",extensions:["dra"],compressible:null},"audio/vnd.dts":{source:"iana",extensions:["dts"],compressible:null},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"],compressible:null},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"],compressible:null},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"],compressible:null},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"],compressible:null},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"],compressible:null},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"],compressible:null},"audio/vnd.rip":{source:"iana",extensions:["rip"],compressible:null},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"],compressible:null},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"],compressible:null},"audio/x-m4a":{source:"nginx",extensions:["m4a"],compressible:null},"audio/x-matroska":{source:"apache",extensions:["mka"],compressible:null},"audio/x-mpegurl":{source:"apache",extensions:["m3u"],compressible:null},"audio/x-ms-wax":{source:"apache",extensions:["wax"],compressible:null},"audio/x-ms-wma":{source:"apache",extensions:["wma"],compressible:null},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"],compressible:null},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"],compressible:null},"audio/x-realaudio":{source:"nginx",extensions:["ra"],compressible:null},"audio/x-wav":{source:"apache",extensions:["wav"],compressible:null},"audio/x-gsm":{source:"apache",extensions:["gsm"],compressible:null},"audio/xm":{source:"apache",extensions:["xm"],compressible:null},"chemical/x-cdx":{source:"apache",extensions:["cdx"],compressible:null},"chemical/x-cif":{source:"apache",extensions:["cif"],compressible:null},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"],compressible:null},"chemical/x-cml":{source:"apache",extensions:["cml"],compressible:null},"chemical/x-csml":{source:"apache",extensions:["csml"],compressible:null},"chemical/x-xyz":{source:"apache",extensions:["xyz"],compressible:null},"font/collection":{source:"iana",extensions:["ttc"],compressible:null},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"],compressible:null},"font/woff2":{source:"iana",extensions:["woff2"],compressible:null},"image/aces":{source:"iana",extensions:["exr"],compressible:null},"image/avci":{source:"iana",extensions:["avci"],compressible:null},"image/avcs":{source:"iana",extensions:["avcs"],compressible:null},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"],compressible:null},"image/dicom-rle":{source:"iana",extensions:["drle"],compressible:null},"image/emf":{source:"iana",extensions:["emf"],compressible:null},"image/fits":{source:"iana",extensions:["fits"],compressible:null},"image/g3fax":{source:"iana",extensions:["g3"],compressible:null},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"],compressible:null},"image/heic-sequence":{source:"iana",extensions:["heics"],compressible:null},"image/heif":{source:"iana",extensions:["heif"],compressible:null},"image/heif-sequence":{source:"iana",extensions:["heifs"],compressible:null},"image/hej2k":{source:"iana",extensions:["hej2"],compressible:null},"image/hsj2":{source:"iana",extensions:["hsj2"],compressible:null},"image/ief":{source:"iana",extensions:["ief"],compressible:null},"image/jls":{source:"iana",extensions:["jls"],compressible:null},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"],compressible:null},"image/jphc":{source:"iana",extensions:["jhc"],compressible:null},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"],compressible:null},"image/jxra":{source:"iana",extensions:["jxra"],compressible:null},"image/jxrs":{source:"iana",extensions:["jxrs"],compressible:null},"image/jxs":{source:"iana",extensions:["jxs"],compressible:null},"image/jxsc":{source:"iana",extensions:["jxsc"],compressible:null},"image/jxsi":{source:"iana",extensions:["jxsi"],compressible:null},"image/jxss":{source:"iana",extensions:["jxss"],compressible:null},"image/ktx":{source:"iana",extensions:["ktx"],compressible:null},"image/ktx2":{source:"iana",extensions:["ktx2"],compressible:null},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"],compressible:null},"image/prs.pti":{source:"iana",extensions:["pti"],compressible:null},"image/sgi":{source:"apache",extensions:["sgi"],compressible:null},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"],compressible:null},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"],compressible:null},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"],compressible:null},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"],compressible:null},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"],compressible:null},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"image/vnd.dwg":{source:"iana",extensions:["dwg"],compressible:null},"image/vnd.dxf":{source:"iana",extensions:["dxf"],compressible:null},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"],compressible:null},"image/vnd.fpx":{source:"iana",extensions:["fpx"],compressible:null},"image/vnd.fst":{source:"iana",extensions:["fst"],compressible:null},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"],compressible:null},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"],compressible:null},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"],compressible:null},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"],compressible:null},"image/vnd.net-fpx":{source:"iana",extensions:["npx"],compressible:null},"image/vnd.pco.b16":{source:"iana",extensions:["b16"],compressible:null},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"],compressible:null},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"],compressible:null},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"],compressible:null},"image/vnd.xiff":{source:"iana",extensions:["xif"],compressible:null},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"],compressible:null},"image/webp":{source:"apache",extensions:["webp"],compressible:null},"image/wmf":{source:"iana",extensions:["wmf"],compressible:null},"image/x-3ds":{source:"apache",extensions:["3ds"],compressible:null},"image/x-cmu-raster":{source:"apache",extensions:["ras"],compressible:null},"image/x-cmx":{source:"apache",extensions:["cmx"],compressible:null},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"],compressible:null},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"],compressible:null},"image/x-mrsid-image":{source:"apache",extensions:["sid"],compressible:null},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"],compressible:null},"image/x-pict":{source:"apache",extensions:["pic","pct"],compressible:null},"image/x-portable-anymap":{source:"apache",extensions:["pnm"],compressible:null},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"],compressible:null},"image/x-portable-graymap":{source:"apache",extensions:["pgm"],compressible:null},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"],compressible:null},"image/x-rgb":{source:"apache",extensions:["rgb"],compressible:null},"image/x-tga":{source:"apache",extensions:["tga"],compressible:null},"image/x-xbitmap":{source:"apache",extensions:["xbm"],compressible:null},"image/x-xpixmap":{source:"apache",extensions:["xpm"],compressible:null},"image/x-xwindowdump":{source:"apache",extensions:["xwd"],compressible:null},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"],compressible:null},"message/global":{source:"iana",extensions:["u8msg"],compressible:null},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"],compressible:null},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"],compressible:null},"message/global-headers":{source:"iana",extensions:["u8hdr"],compressible:null},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"],compressible:null},"model/3mf":{source:"iana",extensions:["3mf"],compressible:null},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"],compressible:null},"model/obj":{source:"iana",extensions:["obj"],compressible:null},"model/step":{source:"iana",compressible:!1,extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"],compressible:null},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"],compressible:null},"model/vnd.gdl":{source:"iana",extensions:["gdl"],compressible:null},"model/vnd.gtw":{source:"iana",extensions:["gtw"],compressible:null},"model/vnd.mts":{source:"iana",extensions:["mts"],compressible:null},"model/vnd.opengex":{source:"iana",extensions:["ogex"],compressible:null},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"],compressible:null},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"],compressible:null},"model/vnd.sap.vds":{source:"iana",extensions:["vds"],compressible:null},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"],compressible:null},"model/vnd.vtu":{source:"iana",extensions:["vtu"],compressible:null},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"],compressible:null},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"],compressible:null},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"],compressible:null},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"],compressible:null},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"],compressible:null},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"],compressible:null},"text/shex":{source:"iana",extensions:["shex"],compressible:null},"text/spdx":{source:"iana",extensions:["spdx"],compressible:null},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"],compressible:null},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"],compressible:null},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"],compressible:null},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"],compressible:null},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"],compressible:null},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"],compressible:null},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"],compressible:null},"text/vnd.fly":{source:"iana",extensions:["fly"],compressible:null},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"],compressible:null},"text/vnd.graphviz":{source:"iana",extensions:["gv"],compressible:null},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"],compressible:null},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"],compressible:null},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"],compressible:null},"text/vnd.wap.wml":{source:"iana",extensions:["wml"],compressible:null},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"],compressible:null},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"],compressible:null},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"],compressible:null},"text/x-component":{source:"nginx",extensions:["htc"],compressible:null},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"],compressible:null},"text/x-java-source":{source:"apache",extensions:["java"],compressible:null},"text/x-nfo":{source:"apache",extensions:["nfo"],compressible:null},"text/x-opml":{source:"apache",extensions:["opml"],compressible:null},"text/x-pascal":{source:"apache",extensions:["p","pas"],compressible:null},"text/x-setext":{source:"apache",extensions:["etx"],compressible:null},"text/x-sfv":{source:"apache",extensions:["sfv"],compressible:null},"text/x-uuencode":{source:"apache",extensions:["uu"],compressible:null},"text/x-vcalendar":{source:"apache",extensions:["vcs"],compressible:null},"text/x-vcard":{source:"apache",extensions:["vcf"],compressible:null},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"],compressible:null},"video/3gpp2":{source:"iana",extensions:["3g2"],compressible:null},"video/h261":{source:"iana",extensions:["h261"],compressible:null},"video/h263":{source:"iana",extensions:["h263"],compressible:null},"video/h264":{source:"iana",extensions:["h264"],compressible:null},"video/iso.segment":{source:"iana",extensions:["m4s"],compressible:null},"video/jpeg":{source:"iana",extensions:["jpgv"],compressible:null},"video/jpm":{source:"apache",extensions:["jpm","jpgm"],compressible:null},"video/mj2":{source:"iana",extensions:["mj2","mjp2"],compressible:null},"video/mp2t":{source:"iana",extensions:["ts"],compressible:null},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"],compressible:null},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"],compressible:null},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"],compressible:null},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"],compressible:null},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"],compressible:null},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"],compressible:null},"video/vnd.fvt":{source:"iana",extensions:["fvt"],compressible:null},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"],compressible:null},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"],compressible:null},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"],compressible:null},"video/vnd.vivo":{source:"iana",extensions:["viv"],compressible:null},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"],compressible:null},"video/x-fli":{source:"apache",extensions:["fli"],compressible:null},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"],compressible:null},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"],compressible:null},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"],compressible:null},"video/x-ms-vob":{source:"apache",extensions:["vob"],compressible:null},"video/x-ms-wm":{source:"apache",extensions:["wm"],compressible:null},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"],compressible:null},"video/x-ms-wvx":{source:"apache",extensions:["wvx"],compressible:null},"video/x-msvideo":{source:"apache",extensions:["avi"],compressible:null},"video/x-sgi-movie":{source:"apache",extensions:["movie"],compressible:null},"video/x-smv":{source:"apache",extensions:["smv"],compressible:null},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"],compressible:null}},ye={},yt={},ys=!1,yn=class extends l3{constructor(e){super(),e&&Object.assign(this,e)}},yi=e=>{class t extends yn{_tag=e}return t.prototype.name=e,t};class yr extends yi("InvalidRouteConfig"){constructor(e,t){super({reason:t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`})}}class ya extends yi("UnknownFileType"){constructor(e){super({reason:`Could not determine type for ${e}`})}}class yo extends yi("InvalidFileType"){constructor(e,t){super({reason:`File type ${e} not allowed for ${t}`})}}class yl extends yi("InvalidFileSize"){constructor(e){super({reason:`Invalid file size: ${e}`})}}class yc extends yi("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class yu extends yi("RetryError"){}class yp extends yi("FetchError"){}class yd extends yi("InvalidJsonError"){}class ym extends yi("BadRequestError"){getMessage(){return yw(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}function yh(e){return"image"===e?"4MB":"video"===e?"16MB":"audio"===e||"blob"===e?"8MB":"pdf"===e?"4MB":"text"===e?"64KB":"4MB"}let yf=e=>{if(Array.isArray(e))return o3(e.reduce((e,t)=>(e[t]={maxFileSize:yh(t),maxFileCount:1,minFileCount:1,contentDisposition:"inline"},e),{}));let t={};for(let s of y_(e)){let n=e[s];if(!n)return oj(new yr(s));let i={maxFileSize:yh(s),maxFileCount:1,minFileCount:1,contentDisposition:"inline"};t[s]={...i,...n}}return o3(t)},yg=(e,t)=>{let s=function(e){if(!e||"string"!=typeof e)return!1;let t=(function(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)})("x."+e).toLowerCase().substring(1);return!!t&&((function(e,t){if(ys)return;ys=!0;let s=["nginx","apache",void 0,"iana"];Object.keys(x7).forEach(n=>{let i=x7[n],r=i.extensions;if(r?.length)for(let a of(e[n]=r,r)){if(t[a]){let e=s.indexOf(x7[t[a]].source),n=s.indexOf(i.source);if("application/octet-stream"!==t[a]&&(e>n||e===n&&t[a].startsWith("application/")))continue}t[a]=n}})}(ye,yt),yt)[t]||!1)}(e);if(!s)return t.includes("blob")?o3("blob"):oj(new ya(e));if(t.some(e=>e.includes("/"))&&t.includes(s))return o3(s);let n="application/pdf"===s.toLowerCase()?"pdf":s.split("/")[0];return t.includes(n)?o3(n):t.includes("blob")?o3("blob"):oj(new yo(n,e))};function yb(e){let t="https://uploadthing.com";return x2.env.CUSTOM_INFRA_URL&&(t=x2.env.CUSTOM_INFRA_URL),`${t}${e}`}let yx=["B","KB","MB","GB"],yy=e=>{let t=RegExp(`^(\\d+)(\\.\\d+)?\\s*(${yx.join("|")})$`,"i"),s=e.match(t);if(!s)return oj(new yl(e));let n=parseFloat(s[1]),i=s[3].toUpperCase();return o3(Math.floor(n*Math.pow(1024,yx.indexOf(i))))},yv=e=>{if(0===e||-1===e)return"0B";let t=Math.floor(Math.log(e)/Math.log(1e3));return`${(e/Math.pow(1e3,t)).toFixed(2)}${yx[t]}`};function y_(e){return Object.keys(e)}function yw(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let yS=(e,t)=>Object.fromEntries(Object.entries(e).filter(([e,s])=>t(s))),yk=e=>xz(function*(){let t="undefined"!=typeof window?window.location.origin:x2.env?.VERCEL_URL?`https://${x2.env.VERCEL_URL}`:"http://localhost:3000",s=yield*dA({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new yc(e??"/api/uploadthing")});return"/"===s.pathname&&(s.pathname="/api/uploadthing"),s}),yO={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,FILE_LIMIT_EXCEEDED:500};class yE extends yi("UploadThingError"){constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:yw(t.cause)&&"number"==typeof t.cause.status&&"string"==typeof t.cause.statusText?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):"string"==typeof t.cause?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(yE.toObject(e))}}class yT extends tw("uploadthing/FetchContext")(){}let yR=(e,t)=>oP(yT,({fetch:s,baseHeaders:n})=>{let i={url:e.toString(),method:t?.method,body:t?.body,headers:{...yS(n,e=>null!=e),...t?.headers}};return dY({try:()=>s(e,{...t,headers:i.headers}),catch:e=>new yp({error:e,input:i})}).pipe(oW(e=>Object.assign(e,{requestUrl:i.url})),d3("fetch",{attributes:{reqInfo:i}}))}),yI=e=>dY({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new yd({error:t,input:e.requestUrl})}).pipe(dP(({ok:e})=>e,({json:t,status:s})=>new ym({status:s,message:`Request to ${e.requestUrl} failed with status ${s}`,json:t})),oW(({json:e})=>e),d3("parseJson")),yN=e=>dY({try:()=>e.json(),catch:t=>new yd({error:t,input:e.url})}).pipe(d3("parseRequestJson")),yj=F(((e,t=2)=>{let s=cV(e);return g5(g8(bv,e=>ui(s,Math.min(Number.MAX_SAFE_INTEGER,Math.pow(t,e)))))})(c2(10),4),gQ((p=c5(1),gH(bv,()=>p))),g1(by),br(ua(c3(1)))),yA="hmac-sha256=",yC={name:"HMAC",hash:"SHA-256"},yM=async(e,t)=>{let s=new TextEncoder,n=await crypto.subtle.importKey("raw",s.encode(t),yC,!1,["sign"]),i=await crypto.subtle.sign(yC,n,s.encode(e)).then(e=>Buffer.from(e).toString("hex"));return`${yA}${i}`},yF=async(e,t,s)=>{let n=t?.slice(yA.length);if(!n)return!1;let i=new TextEncoder,r=await crypto.subtle.importKey("raw",i.encode(s),yC,!1,["verify"]);return await crypto.subtle.verify(yC,r,Uint8Array.from(Buffer.from(n,"hex")),i.encode(e))},yL=Symbol.for("effect/BigDecimal"),yP={[yL]:yL,[ef](){let e=yq(this);return F(eg(e.value),ex(e_(e.scale)),eE(this))},[eT](e){return y$(e)&&yV(this,e)},toString(){return`BigDecimal(${yG(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[eA](){return this.toJSON()},pipe(){return eP(this,arguments)}},y$=e=>Q(e,yL),yU=(e,t)=>{let s=Object.create(yP);return s.value=e,s.scale=t,s},yD=(e,t)=>{if(e!==yz&&e%yB===yz)throw RangeError("Value must be normalized");let s=yU(e,t);return s.normalized=s,s},yz=BigInt(0),yB=BigInt(10),yZ=yD(yz,0),yq=e=>{if(void 0===e.normalized){if(e.value===yz)e.normalized=yZ;else{let t=`${e.value}`,s=0;for(let e=t.length-1;e>=0;e--)if("0"===t[e])s++;else break;0===s&&(e.normalized=e);let n=BigInt(t.substring(0,t.length-s)),i=e.scale-s;e.normalized=yD(n,i)}}return e.normalized},yK=(e,t)=>t>e.scale?yU(e.value*yB**BigInt(t-e.scale),t):t<e.scale?yU(e.value/yB**BigInt(e.scale-t),t):e,yJ=tS((e,t)=>e.scale>t.scale?yK(t,e.scale).value===e.value:e.scale<t.scale?yK(e,t.scale).value===t.value:e.value===t.value),yV=I(2,(e,t)=>yJ(e,t)),yG=e=>{let t,s;let n=e.value<yz,i=n?`${e.value}`.substring(1):`${e.value}`;if(e.scale>=i.length)t="0",s="0".repeat(e.scale-i.length)+i;else{let n=i.length-e.scale;if(n>i.length){let e=n-i.length;t=`${i}${"0".repeat(e)}`,s=""}else s=i.slice(n),t=i.slice(0,n)}let r=""===s?t:`${t}.${s}`;return n?`-${r}`:r},yW=Symbol.for("effect/Encoding/errors/Decode"),yH=(e,t)=>{let s={_tag:"DecodeException",[yW]:yW,input:e};return D(t)&&(s.message=t),s};function yY(e){if(e>=yX.length)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=yX[e];if(255===t)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}let yQ=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],yX=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],y0="effect/Secret",y1=Symbol.for(y0),y2={[y1]:y1,[ef](){return F(eg(y0),ex(eO(this.raw)),eE(this))},[eT](e){return y5(e)&&this.raw.length===e.raw.length&&this.raw.every((t,s)=>eR(t,e.raw[s]))}},y5=e=>Q(e,y1),y3=Symbol.for("@effect/schema/ArbitraryHookId"),y4=(e,t,s,n)=>(n.isSuspend?e.oneof({depthSize:1},e.constant([]),e.array(e.tuple(t,s),{minLength:1,maxLength:2})):e.array(e.tuple(t,s))).map(e=>{let t={};for(let[s,n]of e)t[s]=n;return t}),y6=(e,t)=>{let s=vi(t.constraints,vn(e));return y9(e.from,s?{...t,constraints:s}:t)},y9=(e,t)=>{let s=(null)(e);if(Option.isSome(s))switch(e._tag){case"Declaration":return s.value(...e.typeParameters.map(e=>y9(e,t)));case"Refinement":return s.value(y6(e,t));default:return s.value()}switch(e._tag){case"Declaration":throw Error(errors_.getArbitraryErrorMessage(`a declaration without annotations (${e})`));case"Literal":return t=>t.constant(e.literal);case"UniqueSymbol":return t=>t.constant(e.symbol);case"UndefinedKeyword":case"VoidKeyword":return e=>e.constant(void 0);case"NeverKeyword":return()=>{throw Error(errors_.getArbitraryErrorMessage("`never`"))};case"UnknownKeyword":case"AnyKeyword":return e=>e.anything();case"StringKeyword":return e=>t.constraints&&"StringConstraints"===t.constraints._tag?e.string(t.constraints.constraints):e.string();case"NumberKeyword":return e=>{if(t.constraints)switch(t.constraints._tag){case"NumberConstraints":return e.float(t.constraints.constraints);case"IntegerConstraints":return e.integer(t.constraints.constraints)}return e.float()};case"BooleanKeyword":return e=>e.boolean();case"BigIntKeyword":return e=>t.constraints&&"BigIntConstraints"===t.constraints._tag?e.bigInt(t.constraints.constraints):e.bigInt();case"SymbolKeyword":return e=>e.string().map(e=>Symbol.for(e));case"ObjectKeyword":return e=>e.oneof(e.object(),e.array(e.anything()));case"TemplateLiteral":return t=>{let s=t.string({maxLength:5}),n=t.float({noDefaultInfinity:!0}).filter(e=>!Number.isNaN(e)),i=[t.constant(e.head)];for(let r of e.spans)AST.isStringKeyword(r.type)?i.push(s):i.push(n),i.push(t.constant(r.literal));return t.tuple(...i).map(e=>e.join(""))};case"TupleType":{let s=[],n=!1;for(let i of e.elements)s.push(y9(i.type,t)),i.isOptional&&(n=!0);let i=e.rest.map(e=>y9(e,t));return r=>{let a=r.tuple(...s.map(e=>e(r)));if(n){let t=r.tuple(...e.elements.map(e=>e.isOptional?r.boolean():r.constant(!0)));a=a.chain(e=>t.map(t=>{for(let[s,n]of t.reverse().entries())n||e.splice(t.length-s,1);return e}))}if(Arr.isNonEmptyReadonlyArray(i)){let[e,...s]=i,n=e(r),o=t.constraints;a=a.chain(e=>{let s=r.array(n);return t.isSuspend?s=r.oneof({depthSize:1},r.constant([]),r.array(n,{minLength:1,maxLength:2})):o&&"ArrayConstraints"===o._tag&&(s=r.array(n,o.constraints)),s.map(t=>[...e,...t])});for(let e=0;e<s.length;e++)a=a.chain(t=>s[e](r).map(e=>[...t,e]))}return a}}case"TypeLiteral":{let s=e.propertySignatures.map(e=>y9(e.type,t)),n=e.indexSignatures.map(e=>[y9(e.parameter,t),y9(e.type,t)]);return i=>{let r={},a=[];for(let t=0;t<s.length;t++){let n=e.propertySignatures[t],o=n.name;n.isOptional||a.push(o),r[o]=s[t](i)}let o=i.record(r,{requiredKeys:a});for(let e=0;e<n.length;e++){let s=n[e][0](i),r=n[e][1](i);o=o.chain(e=>y4(i,s,r,t).map(t=>({...t,...e})))}return o}}case"Union":{let s=e.types.map(e=>y9(e,t));return e=>e.oneof({depthSize:1},...s.map(t=>t(e)))}case"Enums":if(0===e.enums.length)throw Error(errors_.getArbitraryErrorMessage("an empty enum"));return t=>t.oneof(...e.enums.map(([e,s])=>t.constant(s)));case"Refinement":{let s=y6(e,t);return t=>s(t).filter(t=>Option.isNone(e.filter(t,AST.defaultParseOption,e)))}case"Suspend":{let s=util_.memoizeThunk(()=>y9(e.f(),{...t,isSuspend:!0}));return e=>e.constant(null).chain(()=>s()(e))}case"Transformation":return y9(e.to,t)}};class y8{_tag="NumberConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=Math.fround(e.min)),Predicate.isNumber(e.max)&&(this.constraints.max=Math.fround(e.max)),Predicate.isBoolean(e.noNaN)&&(this.constraints.noNaN=e.noNaN),Predicate.isBoolean(e.noDefaultInfinity)&&(this.constraints.noDefaultInfinity=e.noDefaultInfinity)}}class y7{_tag="StringConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class ve{_tag="IntegerConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=e.min),Predicate.isNumber(e.max)&&(this.constraints.max=e.max)}}class vt{_tag="ArrayConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class vs{_tag="BigIntConstraints";constraints;constructor(e){this.constraints={},Predicate.isBigInt(e.min)&&(this.constraints.min=e.min),Predicate.isBigInt(e.max)&&(this.constraints.max=e.max)}}let vn=e=>{let t=e.annotations[AST.TypeAnnotationId],s=e.annotations[AST.JSONSchemaAnnotationId];switch(t){case filters_.IntTypeId:return new ve({});case filters_.GreaterThanTypeId:case filters_.GreaterThanOrEqualToTypeId:case filters_.LessThanTypeId:case filters_.LessThanOrEqualToTypeId:case filters_.BetweenTypeId:return new y8({min:s.exclusiveMinimum??s.minimum,max:s.exclusiveMaximum??s.maximum});case filters_.GreaterThanBigintTypeId:case filters_.GreaterThanOrEqualToBigIntTypeId:case filters_.LessThanBigIntTypeId:case filters_.LessThanOrEqualToBigIntTypeId:case filters_.BetweenBigintTypeId:return new vs(e.annotations[t]);case filters_.MinLengthTypeId:case filters_.MaxLengthTypeId:case filters_.LengthTypeId:return new y7(s);case filters_.MinItemsTypeId:case filters_.MaxItemsTypeId:case filters_.ItemsCountTypeId:return new vt({minLength:s.minItems,maxLength:s.maxItems})}},vi=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;switch(e._tag){case"ArrayConstraints":if("ArrayConstraints"===t._tag)return new vt({minLength:va(e.constraints.minLength,t.constraints.minLength),maxLength:vo(e.constraints.maxLength,t.constraints.maxLength)});break;case"NumberConstraints":switch(t._tag){case"NumberConstraints":return new y8({min:va(e.constraints.min,t.constraints.min),max:vo(e.constraints.max,t.constraints.max),noNaN:vr(e.constraints.noNaN,t.constraints.noNaN),noDefaultInfinity:vr(e.constraints.noDefaultInfinity,t.constraints.noDefaultInfinity)});case"IntegerConstraints":return new ve({min:va(e.constraints.min,t.constraints.min),max:vo(e.constraints.max,t.constraints.max)})}break;case"BigIntConstraints":if("BigIntConstraints"===t._tag)return new vs({min:va(e.constraints.min,t.constraints.min),max:vo(e.constraints.max,t.constraints.max)});break;case"StringConstraints":if("StringConstraints"===t._tag)return new y7({minLength:va(e.constraints.minLength,t.constraints.minLength),maxLength:vo(e.constraints.maxLength,t.constraints.maxLength)});break;case"IntegerConstraints":switch(t._tag){case"NumberConstraints":case"IntegerConstraints":return new ve({min:va(e.constraints.min,t.constraints.min),max:vo(e.constraints.max,t.constraints.max)})}}},vr=(e,t)=>void 0===e?t:void 0===t?e:e||t;function va(e,t){return void 0===e?t:void 0===t?e:e<=t?t:e}function vo(e,t){return void 0===e?t:void 0===t?e:e<=t?e:t}let vl=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return vl(e,t.from)}},vc=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),vu=e=>{let t,s=!1;return()=>(s||(t=e(),s=!0),t)},vp=e=>{if(D(e))return JSON.stringify(e);if(z(e)||null==e||B(e)||q(e)||es(e))return String(e);if(Z(e))return String(e)+"n";if(!Array.isArray(e)&&Q(e,"toString")&&K(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{if(JSON.stringify(e),Array.isArray(e))return`[${e.map(vp).join(",")}]`;return`{${vc(e).map(t=>`${D(t)?JSON.stringify(t):String(t)}:${vp(e[t])}`).join(",")}}`}catch(t){return String(e)}},vd=e=>`Duplicate property signature ${vp(e)}`,vm=e=>`Duplicate index signature for type \`${e}\``,vh=e=>`Duplicate property signature transformation ${vp(e)}`,vf=(e,t)=>`${e}: ${t}`,vg=Symbol.for("@effect/schema/annotation/Type"),vb=Symbol.for("@effect/schema/annotation/Message"),vx=Symbol.for("@effect/schema/annotation/Identifier"),vy=Symbol.for("@effect/schema/annotation/Title"),vv=Symbol.for("@effect/schema/annotation/Description"),v_=Symbol.for("@effect/schema/annotation/Examples"),vw=Symbol.for("@effect/schema/annotation/Default"),vS=Symbol.for("@effect/schema/annotation/JSONSchema"),vk=Symbol.for("@effect/schema/annotation/Documentation"),vO=Symbol.for("@effect/schema/annotation/Concurrency"),vE=Symbol.for("@effect/schema/annotation/Batching"),vT=Symbol.for("@effect/schema/annotation/Surrogate"),vR=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),vI=I(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?ti(e.annotations[t]):tL()),vN=vI(vb),vj=vI(vy),vA=vI(vx),vC=vI(vv),vM=vI(vO),vF=vI(vE),vL=vI(vR),vP=vI(vT),v$=Symbol.for("@effect/schema/annotation/JSONIdentifier"),vU=vI(v$);class vD{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,t,s,n={}){this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=s,this.annotations=n}toString(e=!1){return t$(_G(this,e),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:_D(this.annotations)}}}let vz=e=>t=>t._tag===e;class vB{literal;annotations;_tag="Literal";constructor(e,t={}){this.literal=e,this.annotations=t}toString(e=!1){return t$(_G(this,e),()=>vp(this.literal))}toJSON(){return{_tag:this._tag,literal:Z(this.literal)?String(this.literal):this.literal,annotations:_D(this.annotations)}}}let vZ=vz("Literal"),vq=new vB(null,{[vx]:"null"});class vK{symbol;annotations;_tag="UniqueSymbol";constructor(e,t={}){this.symbol=e,this.annotations=t}toString(e=!1){return t$(_G(this,e),()=>vp(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:_D(this.annotations)}}}class vJ{annotations;_tag="UndefinedKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _V(this,e)}toJSON(){return{_tag:this._tag,annotations:_D(this.annotations)}}}let vV=new vJ({[vy]:"undefined"});class vG{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _V(this,e)}toJSON(){return{_tag:this._tag,annotations:_D(this.annotations)}}}let vW=new vG({[vy]:"never"});class vH{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _V(this,e)}toJSON(){return{_tag:this._tag,annotations:_D(this.annotations)}}}let vY=new vH({[vy]:"unknown"});class vQ{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _V(this,e)}toJSON(){return{_tag:this._tag,annotations:_D(this.annotations)}}}let vX=new vQ({[vy]:"any"});class v0{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _V(this,e)}toJSON(){return{_tag:this._tag,annotations:_D(this.annotations)}}}let v1=new v0({[vy]:"string",[vv]:"a string"}),v2=vz("StringKeyword");class v5{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _V(this,e)}toJSON(){return{_tag:this._tag,annotations:_D(this.annotations)}}}let v3=new v5({[vy]:"number",[vv]:"a number"}),v4=vz("NumberKeyword");class v6{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _V(this,e)}toJSON(){return{_tag:this._tag,annotations:_D(this.annotations)}}}let v9=new v6({[vy]:"boolean",[vv]:"a boolean"});class v8{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _V(this,e)}toJSON(){return{_tag:this._tag,annotations:_D(this.annotations)}}}let v7=vz("SymbolKeyword");class _e{type;isOptional;constructor(e,t){this.type=e,this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional}}toString(){return String(this.type)+(this.isOptional?"?":"")}}class _t{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,t,s,n={}){this.elements=e,this.rest=t,this.isReadonly=s,this.annotations=n;let i=!1,r=!1;for(let t of e)if(t.isOptional)i=!0;else if(i){r=!0;break}if(r||i&&t.length>1)throw Error("A required element cannot follow an optional element. ts(1257)")}toString(e=!1){return t$(_G(this,e),()=>_s(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:_D(this.annotations)}}}let _s=e=>{let t=e.elements.map(String).join(", ");return t4(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(s,n)=>{let i=String(s),r=i.includes(" | ")?`(${i})`:i;if(n.length>0){let s=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${r}[], ${s}]`:`readonly [...${r}[], ${s}]`}return e.elements.length>0?`readonly [${t}, ...${r}[]]`:`ReadonlyArray<${i}>`}})};class _n{name;type;isOptional;isReadonly;annotations;constructor(e,t,s,n,i={}){this.name=e,this.type=t,this.isOptional=s,this.isReadonly=n,this.annotations=i}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:_D(this.annotations)}}}let _i=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return _i(e.from)}return!1};class _r{type;isReadonly;parameter;constructor(e,t,s){if(this.type=t,this.isReadonly=s,_i(e))this.parameter=e;else throw Error("An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types")}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class _a{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,t,s={}){this.annotations=s;let n={};for(let t=0;t<e.length;t++){let s=e[t].name;if(Object.prototype.hasOwnProperty.call(n,s))throw Error(vd(s));n[s]=null}let i={string:!1,symbol:!1};for(let e=0;e<t.length;e++){let s=_J(t[e].parameter);if(v2(s)){if(i.string)throw Error(vm("string"));i.string=!0}else if(v7(s)){if(i.symbol)throw Error(vm("symbol"));i.symbol=!0}}this.propertySignatures=_B(e),this.indexSignatures=_Z(t)}toString(e=!1){return t$(_G(this,e),()=>_o(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:_D(this.annotations)}}}let _o=e=>{let t=e.propertySignatures.map(e=>String(e.name)+(e.isOptional?"?":"")+": "+e.type).join("; ");if(e.indexSignatures.length>0){let s=e.indexSignatures.map(e=>`[x: ${_J(e.parameter)}]: ${e.type}`).join("; ");return e.propertySignatures.length>0?`{ ${t}; ${s} }`:`{ ${s} }`}return e.propertySignatures.length>0?`{ ${t} }`:"{}"},_l=vz("TypeLiteral"),_c=e=>e.filter(e=>e!==vW),_u=sf(t0(tX,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),_p={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},_d=e=>sT(e,e=>_b(e)?_d(e.types):[e]),_m=e=>{let t=_u(e),s=[],n={},i=[];for(let e of t)switch(e._tag){case"NeverKeyword":break;case"AnyKeyword":return[vX];case"UnknownKeyword":return[vY];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":n[e._tag]||(n[e._tag]=e,s.push(e));break;case"Literal":{let t=typeof e.literal;switch(t){case"string":case"number":case"bigint":case"boolean":n[_p[t]]||i.includes(e.literal)||(i.push(e.literal),s.push(e));break;case"object":i.includes(e.literal)||(i.push(e.literal),s.push(e))}break}case"UniqueSymbol":n.SymbolKeyword||i.includes(e.symbol)||(i.push(e.symbol),s.push(e));break;case"TupleType":n.ObjectKeyword||s.push(e);break;case"TypeLiteral":0===e.propertySignatures.length&&0===e.indexSignatures.length?n["{}"]||(n["{}"]=e,s.push(e)):n.ObjectKeyword||s.push(e);break;default:s.push(e)}return s};class _h{types;annotations;static make=(e,t)=>{let s=[],n=new Set;for(let t=0;t<e.length;t++){let i=e[t];i===vW||n.has(i)||(n.add(i),s.push(i))}return _h.union(s,t)};static members=(e,t)=>_h.union(_c(e),t);static unify=(e,t)=>_h.union(_m(_d(e)),t);static union=(e,t)=>_g(e)?new _h(e,t):1===e.length?e[0]:vW;_tag="Union";constructor(e,t={}){this.types=e,this.annotations=t}toString(e=!1){return t$(_G(this,e),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:_D(this.annotations)}}}let _f=(e,t)=>e.map(t),_g=e=>e.length>1,_b=vz("Union"),_x=U(Symbol.for("@effect/schema/AST/toJSONMemoMap"),()=>new WeakMap);class _y{f;annotations;_tag="Suspend";constructor(e,t={}){this.f=e,this.annotations=t,this.f=vu(e)}toString(e=!1){return _G(this,e).pipe(tU(()=>tJ(tZ(this.f)(),t=>_G(t,e))),t$(()=>"<suspended schema>"))}toJSON(){let e=this.f(),t=_x.get(e);return t||(_x.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:_D(this.annotations)},_x.set(e,t)),t}}class _v{from;filter;annotations;_tag="Refinement";constructor(e,t,s={}){this.from=e,this.filter=t,this.annotations=s}toString(e=!1){return t$(_G(this,e),()=>"<refinement schema>")}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:_D(this.annotations)}}}let __=vz("Refinement"),_w={};class _S{from;to;transformation;annotations;_tag="Transformation";constructor(e,t,s,n={}){this.from=e,this.to=t,this.transformation=s,this.annotations=n}toString(e=!1){return t$(_G(this,e),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:_D(this.annotations)}}}let _k=vz("Transformation");class _O{decode;encode;_tag="FinalTransformation";constructor(e,t){this.decode=e,this.encode=t}}class _E{_tag="ComposeTransformation"}class _T{from;to;decode;encode;constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}}class _R{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;let t={},s={};for(let n of e){let e=n.from;if(t[e])throw Error(vh(e));t[e]=!0;let i=n.to;if(s[i])throw Error(vh(i));s[i]=!0}}}let _I=(d="TypeLiteralTransformation",e=>e._tag===d),_N=(e,t)=>{let s=Object.getOwnPropertyDescriptors(e);return s.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),s)},_j=e=>{let t=`^${ub(e.head)}`;for(let s of e.spans)v2(s.type)?t+=".*":v4(s.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=ub(s.literal);return new RegExp(t+="$")},_A=e=>{switch(e._tag){case"TupleType":{let t=!1,s=[];for(let n of e.elements)n.isOptional&&(t=!0),s.push(n.type);return t&&s.push(vV),s=s.concat(e.rest),_h.make(s)}case"Refinement":return _A(e.from);case"Union":return _h.make(e.types.map(_A));case"Suspend":return _A(e.f())}throw Error(errors_.getAPIErrorMessage("NumberIndexedAccess",`unsupported schema (${e})`))},_C=(e,t)=>{let s=[],n=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new _r(e,t,!0));break;case"Literal":if(D(e.literal)||z(e.literal))s.push(new _n(e.literal,t,!1,!0));else throw Error(vf("Record",`unsupported literal (${vp(e.literal)})`));break;case"UniqueSymbol":s.push(new _n(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw Error(vf("Record",`unsupported key schema (${e})`))}};return i(e),{propertySignatures:s,indexSignatures:n}},_M=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new _t(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{let t=_$(e.propertySignatures,e=>!1===e.isReadonly?e:new _n(e.name,e.type,e.isOptional,!1,e.annotations)),s=_$(e.indexSignatures,e=>!1===e.isReadonly?e:new _r(e.parameter,e.type,!1));return t===e.propertySignatures&&s===e.indexSignatures?e:new _a(t,s,e.annotations)}case"Union":{let t=_$(e.types,_M);return t===e.types?e:_h.make(t,e.annotations)}case"Suspend":return new _y(()=>_M(e.f()),e.annotations);case"Refinement":{let t=_M(e.from);return t===e.from?e:new _v(t,e.filter,e.annotations)}case"Transformation":{let t=_M(e.from),s=_M(e.to);return t===e.from&&s===e.to?e:new _S(t,s,e.transformation,e.annotations)}}return e},_F=e=>{switch(e._tag){case"Declaration":{let t=_$(e.typeParameters,_F);return t===e.typeParameters?e:new vD(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=_$(e.elements,e=>{let t=_F(e.type);return t===e.type?e:new _e(t,e.isOptional)}),s=_$(e.rest,_F);return t===e.elements&&s===e.rest?e:new _t(t,s,e.isReadonly,e.annotations)}case"TypeLiteral":{let t=_$(e.propertySignatures,e=>{let t=_F(e.type);return t===e.type?e:new _n(e.name,t,e.isOptional,e.isReadonly)}),s=_$(e.indexSignatures,e=>{let t=_F(e.type);return t===e.type?e:new _r(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&s===e.indexSignatures?e:new _a(t,s,e.annotations)}case"Union":{let t=_$(e.types,_F);return t===e.types?e:_h.make(t,e.annotations)}case"Suspend":return new _y(()=>_F(e.f()),e.annotations);case"Refinement":{let t=_F(e.from);return t===e.from?e:new _v(t,e.filter,e.annotations)}case"Transformation":return _F(e.to)}return e},_L=e=>tU(vU(e),()=>vA(e)),_P=e=>tP(_L(e),{onNone:()=>void 0,onSome:e=>({[v$]:e})});function _$(e,t){let s=!1,n=t5(e.length);for(let i=0;i<e.length;i++){let r=e[i],a=t(r);a!==r&&(s=!0),n[i]=a}return s?n:e}let _U=e=>{switch(e._tag){case"Declaration":{let t=_$(e.typeParameters,_U);return t===e.typeParameters?e:new vD(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=_$(e.elements,e=>{let t=_U(e.type);return t===e.type?e:new _e(t,e.isOptional)}),s=_$(e.rest,_U);return t===e.elements&&s===e.rest?e:new _t(t,s,e.isReadonly,_P(e))}case"TypeLiteral":{let t=_$(e.propertySignatures,e=>{let t=_U(e.type);return t===e.type?e:new _n(e.name,t,e.isOptional,e.isReadonly)}),s=_$(e.indexSignatures,e=>{let t=_U(e.type);return t===e.type?e:new _r(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&s===e.indexSignatures?e:new _a(t,s,_P(e))}case"Union":{let t=_$(e.types,_U);return t===e.types?e:_h.make(t,_P(e))}case"Suspend":return new _y(()=>_U(e.f()),_P(e));case"Refinement":case"Transformation":return _U(e.from)}return e},_D=e=>{let t={};for(let s of Object.getOwnPropertySymbols(e))t[String(s)]=e[s];return t},_z=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},_B=sf(t0(tX,e=>_z(e.type))),_Z=sf(t0(tX,e=>{switch(_J(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}})),_q=e=>e.reduce(null,null),_K=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{let t=e.propertySignatures.length,s=e.indexSignatures.length;return t+s===0?[-4,0,0]:[4,t,s]}case"Declaration":{let t=vP(e);if(Option.isSome(t)){let[e,s,n]=_K(t.value);return[6,s,n]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return _q(e.types.map(_K));case"Refinement":{let[t,s,n]=_K(e.from);return[t+1,s,n]}case"Transformation":return _K(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return null}},_J=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return _J(e.from)}},_V=(e,t=!1)=>t$(_G(e,t),()=>e._tag),_G=(e,t)=>{if(!t)return vA(e).pipe(tU(()=>vj(e)),tU(()=>vC(e)));{let t=vC(e).pipe(tU(()=>vj(e)));return tP(vA(e),{onNone:()=>t,onSome:e=>tP(t,{onNone:()=>ti(e),onSome:t=>ti(`${e} (${t})`)})})}},_W=Symbol.for("@effect/schema/EquivalenceHookId"),_H=e=>{let t=(null)(e);if(Option.isSome(t))switch(e._tag){case"Declaration":return t.value(...e.typeParameters.map(_H));case"Refinement":return t.value(_H(e.from));default:return t.value()}switch(e._tag){case"NeverKeyword":throw Error(errors_.getEquivalenceErrorMessage("`never`"));case"Transformation":return _H(e.to);case"Declaration":case"Literal":case"StringKeyword":case"TemplateLiteral":case"UniqueSymbol":case"SymbolKeyword":case"UnknownKeyword":case"AnyKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"VoidKeyword":case"Enums":case"ObjectKeyword":return Equal.equals;case"Refinement":return _H(e.from);case"Suspend":{let t=util_.memoizeThunk(()=>_H(e.f()));return(e,s)=>t()(e,s)}case"TupleType":{let t=e.elements.map(e=>_H(e.type)),s=e.rest.map(_H);return Equivalence.make((n,i)=>{let r=n.length;if(r!==i.length)return!1;let a=0;for(;a<Math.min(r,e.elements.length);a++)if(!t[a](n[a],i[a]))return!1;if(Arr.isNonEmptyReadonlyArray(s)){let[e,...t]=s;for(;a<r-t.length;a++)if(!e(n[a],i[a]))return!1;for(let e=0;e<t.length;e++)if(a+=e,!t[e](n[a],i[a]))return!1}return!0})}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return Equal.equals;let t=e.propertySignatures.map(e=>_H(e.type)),s=e.indexSignatures.map(e=>_H(e.type));return Equivalence.make((n,i)=>{let r,a;let o=Object.keys(n),l=Object.getOwnPropertySymbols(n);for(let s=0;s<t.length;s++){let r=e.propertySignatures[s],a=r.name,o=Object.prototype.hasOwnProperty.call(n,a),l=Object.prototype.hasOwnProperty.call(i,a);if(r.isOptional&&o!==l||o&&l&&!t[s](n[a],i[a]))return!1}for(let t=0;t<s.length;t++){let c=e.indexSignatures[t],u=AST.getParameterBase(c.parameter),p=AST.isSymbolKeyword(u);if(p){if(r=r||Object.getOwnPropertySymbols(i),l.length!==r.length)return!1}else if(a=a||Object.keys(i),o.length!==a.length)return!1;let d=p?l:o;for(let e=0;e<d.length;e++){let r=d[e];if(!Object.prototype.hasOwnProperty.call(i,r)||!s[t](n[r],i[r]))return!1}}return!0})}case"Union":{let t=ParseResult.getSearchTree(e.types,!0),s=util_.ownKeys(t.keys),n=s.length;return Equivalence.make((e,i)=>{let r=[];if(n>0&&Predicate.isRecord(e))for(let i=0;i<n;i++){let n=s[i],a=t.keys[n].buckets;if(Object.prototype.hasOwnProperty.call(e,n)){let t=String(e[n]);Object.prototype.hasOwnProperty.call(a,t)&&(r=r.concat(a[t]))}}t.otherwise.length>0&&(r=r.concat(t.otherwise));let a=r.map(e=>[_H(e),ParseResult.is({ast:e})]);for(let t=0;t<a.length;t++){let[s,n]=a[t];if(n(e)&&n(i)&&s(e,i))return!0}return!1})}}},_Y=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),_Q=Symbol.for("@effect/schema/TypeId/Int"),_X=(e,t=[])=>({value:e,forest:t}),_0=e=>oW(wi(e),e=>_2(e)),_1=e=>bG(_0(e)),_2=e=>e.value+_5("\n",e.forest),_5=(e,t)=>{let s,n="",i=t.length;for(let r=0;r<i;r++){s=t[r];let a=r===i-1;n+=e+(a?"└":"├")+"─ "+s.value+_5(e+(i>1&&!a?"│  ":"   "),s.forest)}return n},_3=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},_4=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},_6=e=>{switch(e._tag){case"Refinement":if("From"===e.kind)return _8(e.error);break;case"Transformation":return _8(e.error)}return tL()},_9=e=>vN(e.ast).pipe(oP(t=>{let s=t(e);return D(s)?o3(s):s})),_8=e=>ow(_6(e),()=>_9(e)),_7=e=>tV(vL(e.ast),t=>tz(t(e))),we=e=>_8(e).pipe(o0(()=>_7(e)),o0(()=>e.message),ow(()=>o3(`Expected ${e.ast.toString(!0)}, actual ${vp(e.actual)}`))),wt=e=>t$(_7(e),()=>String(e.ast)),ws=e=>t$(e.message,()=>"is forbidden"),wn=(e,t)=>oZ(_8(e),{onFailure:t,onSuccess:e=>o3(_X(e))}),wi=e=>{switch(e._tag){case"Type":return oW(we(e),_X);case"Forbidden":return o3(_X(wt(e),[_X(ws(e))]));case"Unexpected":return o3(_X(`is unexpected, expected ${e.ast.toString(!0)}`));case"Missing":return o3(_X("is missing"));case"Union":return wn(e,()=>oW(fZ(e.errors,e=>"Member"===e._tag?oW(wi(e.error),e=>_X("Union member",[e])):wi(e)),t=>_X(wt(e),t)));case"TupleType":return wn(e,()=>oW(fZ(e.errors,e=>oW(wi(e.error),t=>_X(`[${e.index}]`,[t]))),t=>_X(wt(e),t)));case"TypeLiteral":return wn(e,()=>oW(fZ(e.errors,e=>oW(wi(e.error),t=>_X(`[${vp(e.key)}]`,[t]))),t=>_X(wt(e),t)));case"Transformation":return wn(e,()=>oW(wi(e.error),t=>_X(wt(e),[_X(_3(e.kind),[t])])));case"Refinement":return wn(e,()=>oW(wi(e.error),t=>_X(wt(e),[_X(_4(e.kind),[t])])));case"Declaration":return wn(e,()=>{let t=e.error;return"Type"===t._tag&&t.ast===e.ast?wi(t):oW(wi(t),t=>_X(wt(e),[t]))})}};class wr{ast;actual;error;_tag="Declaration";constructor(e,t,s){this.ast=e,this.actual=t,this.error=s}}class wa{ast;actual;kind;error;_tag="Refinement";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.error=n}}class wo{ast;actual;errors;output;_tag="TupleType";constructor(e,t,s,n=[]){this.ast=e,this.actual=t,this.errors=s,this.output=n}}class wl{index;error;_tag="Index";constructor(e,t){this.index=e,this.error=t}}class wc{ast;actual;errors;output;_tag="TypeLiteral";constructor(e,t,s,n={}){this.ast=e,this.actual=t,this.errors=s,this.output=n}}class wu{key;error;_tag="Key";constructor(e,t){this.key=e,this.error=t}}class wp{ast;_tag="Unexpected";constructor(e){this.ast=e}}class wd{ast;actual;kind;error;_tag="Transformation";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.error=n}}class wm{ast;actual;_tag="Type";message;constructor(e,t,s){this.ast=e,this.actual=t,this.message=tz(s)}}class wh{ast;actual;_tag="Forbidden";message;constructor(e,t,s){this.ast=e,this.actual=t,this.message=tz(s)}}class wf{_tag="Missing"}let wg=new wf;class wb{ast;error;_tag="Member";constructor(e,t){this.ast=e,this.error=t}}class wx{ast;actual;errors;_tag="Union";constructor(e,t,s){this.ast=e,this.actual=t,this.errors=s}}class wy extends yi("ParseError"){get message(){return this.toString()}toString(){return _1(this.error)}toJSON(){return{_id:"ParseError",message:this.toString()}}[eA](){return this.toJSON()}}let wv=e=>new wy({error:e}),w_=I(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t(e.right):oP(e,t)),ww=I(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?tF(t(e.right)):oW(e,t)),wS=I(2,(e,t)=>"Left"===e._tag?tM(t(e.left)):"Right"===e._tag?e:oY(e,t)),wk=e=>{if("Left"===e._tag||"Right"===e._tag)return e},wO=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;let s={};return s.errors=t.errors??e.errors,s.onExcessProperty=t.onExcessProperty??e.onExcessProperty,s},wE=(e,t,s)=>{let n=wj(e,t);return(e,t)=>n(e,{...wO(s,t),isEffectAllowed:!0})},wT=(e,t)=>wE(e.ast,!0,t),wR=(e,t)=>wE(e.ast,!1,t),wI=U(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),wN=U(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),wj=(e,t)=>{let s=t?wI:wN,n=s.get(e);if(n)return n;let i=wM(e,t);return s.set(e,i),i},wA=e=>tB(vM(e)),wC=e=>tB(vF(e)),wM=(e,t)=>{switch(e._tag){case"Refinement":if(t){let t=wj(e.from,!0);return(s,n)=>wU(w_(wS(t(s,n),t=>new wa(e,s,"From",t)),t=>tP(e.filter(t,n??_w,e),{onNone:()=>tF(t),onSome:t=>tM(new wa(e,s,"Predicate",t))})),e,s,n)}{let t=wj(_F(e),!0),s=wj(w$(e.from),!1);return(n,i)=>wU(w_(t(n,i),e=>s(e,i)),e,n,i)}case"Transformation":{let s=wz(e.transformation,t),n=t?wj(e.from,!0):wj(e.to,!1),i=t?wj(e.to,!0):wj(e.from,!1);return(r,a)=>wU(w_(wS(n(r,a),s=>new wd(e,r,t?"Encoded":"Type",s)),n=>w_(wS(s(n,a??_w,e),t=>new wd(e,r,"Transformation",t)),s=>wS(i(s,a),s=>new wd(e,r,t?"Type":"Encoded",s)))),e,r,a)}case"Declaration":{let s=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,n)=>wU(wS(s(t,n??_w,e),s=>new wr(e,t,s)),e,t,n)}case"Literal":return wF(e,t=>t===e.literal);case"UniqueSymbol":return wF(e,t=>t===e.symbol);case"UndefinedKeyword":case"VoidKeyword":return wF(e,J);case"NeverKeyword":return wF(e,W);case"UnknownKeyword":case"AnyKeyword":return tF;case"StringKeyword":return wF(e,D);case"NumberKeyword":return wF(e,z);case"BooleanKeyword":return wF(e,B);case"BigIntKeyword":return wF(e,Z);case"SymbolKeyword":return wF(e,q);case"ObjectKeyword":return wF(e,Y);case"Enums":return wF(e,t=>e.enums.some(([e,s])=>s===t));case"TemplateLiteral":{let t=_j(e);return wF(e,e=>D(e)&&t.test(e))}case"TupleType":{let s=e.elements.map(e=>wj(e.type,t)),n=e.rest.map(e=>wj(e,t)),i=e.elements.filter(e=>!e.isOptional).length;e.rest.length>0&&(i+=e.rest.length-1);let r=_h.make(e.elements.map((e,t)=>new vB(t))),a=wA(e),o=wC(e);return(t,l)=>{let c;if(!t7(t))return tM(new wm(e,t));let u=l?.errors==="all",p=[],d=0,m=t.length;for(let s=m;s<=i-1;s++){let n=new wl(s,wg);if(!u)return tM(new wo(e,t,[n]));p.push([d++,n])}if(0===e.rest.length)for(let s=e.elements.length;s<=m-1;s++){let n=new wl(s,new wp(r));if(!u)return tM(new wo(e,t,[n]));p.push([d++,n])}let h=[],f=0;for(;f<s.length;f++)if(m<f+1){if(e.elements[f].isOptional)continue}else{let n=(0,s[f])(t[f],l),i=wk(n);if(i){if(tA(i)){let s=new wl(f,i.left);if(!u)return tM(new wo(e,t,[s],wD(h)));p.push([d++,s]);continue}h.push([d++,i.right])}else{let s=d++,i=f;c||(c=[]),c.push(({es:r,output:a})=>oP(oI(n),n=>{if(tA(n)){let o=new wl(i,n.left);return u?(r.push([s,o]),ls):tM(new wo(e,t,[o],wD(a)))}return a.push([s,n.right]),ls}))}}if(st(n)){let[s,...i]=n;for(;f<m-i.length;f++){let n=s(t[f],l),i=wk(n);if(i){if(tA(i)){let s=new wl(f,i.left);if(!u)return tM(new wo(e,t,[s],wD(h)));p.push([d++,s]);continue}h.push([d++,i.right])}else{let s=d++,i=f;c||(c=[]),c.push(({es:r,output:a})=>oP(oI(n),n=>{if(!tA(n))return a.push([s,n.right]),ls;{let o=new wl(i,n.left);return u?(r.push([s,o]),ls):tM(new wo(e,t,[o],wD(a)))}}))}}for(let s=0;s<i.length;s++)if(!(m<(f+=s)+1)){let n=i[s](t[f],l),r=wk(n);if(r){if(tA(r)){let s=new wl(f,r.left);if(!u)return tM(new wo(e,t,[s],wD(h)));p.push([d++,s]);continue}h.push([d++,r.right])}else{let s=d++,i=f;c||(c=[]),c.push(({es:r,output:a})=>oP(oI(n),n=>{if(tA(n)){let o=new wl(i,n.left);return u?(r.push([s,o]),ls):tM(new wo(e,t,[o],wD(a)))}return a.push([s,n.right]),ls}))}}}let g=({es:s,output:n})=>tE(s)?tM(new wo(e,t,wD(s),wD(n))):tF(wD(n));if(c&&c.length>0){let e=c;return o4(()=>{let t={es:s_(p),output:s_(h)};return oP(fZ(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>g(t))})}return g({output:h,es:p})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return wF(e,et);let s=[],n={};for(let i of e.propertySignatures)s.push([wj(i.type,t),i]),n[i.name]=null;let i=e.indexSignatures.map(e=>[wj(e.parameter,t),wj(e.type,t),e.parameter]),r=_h.make(e.indexSignatures.map(e=>e.parameter).concat(vc(n).map(e=>q(e)?new vK(e):new vB(e)))),a=wj(r,t),o=wA(e),l=wC(e);return(t,c)=>{let u;if(!ei(t))return tM(new wm(e,t));let p=c?.errors==="all",d=[],m=0,h=c?.onExcessProperty==="error",f=c?.onExcessProperty==="preserve",g={};if(h||f){for(let s of vc(t))if(tA(wk(a(s,c)))){if(h){let n=new wu(s,new wp(r));if(!p)return tM(new wc(e,t,[n],g));d.push([m++,n]);continue}g[s]=t[s]}}let b=c?.isExact===!0;for(let n=0;n<s.length;n++){let i=s[n][1],r=i.name,a=Object.prototype.hasOwnProperty.call(t,r);if(!a){if(i.isOptional)continue;if(b){let s=new wu(r,wg);if(!p)return tM(new wc(e,t,[s],g));d.push([m++,s]);continue}}let o=(0,s[n][0])(t[r],c),l=wk(o);if(l){if(tA(l)){let s=new wu(r,a?l.left:wg);if(!p)return tM(new wc(e,t,[s],g));d.push([m++,s]);continue}g[r]=l.right}else{let s=m++;u||(u=[]),u.push(({es:n,output:i})=>oP(oI(o),o=>{if(tA(o)){let l=new wu(r,a?o.left:wg);return p?(n.push([s,l]),ls):tM(new wc(e,t,[l],i))}return i[r]=o.right,ls}))}}for(let s=0;s<i.length;s++){let r=i[s],a=r[0],o=r[1];for(let s of vl(t,r[2])){let i=wk(a(s,c));if(i&&tC(i)){let i=o(t[s],c),r=wk(i);if(r){if(tA(r)){let n=new wu(s,r.left);if(!p)return tM(new wc(e,t,[n],g));d.push([m++,n]);continue}Object.prototype.hasOwnProperty.call(n,s)||(g[s]=r.right)}else{let r=m++,a=s;u||(u=[]),u.push(({es:o,output:l})=>oP(oI(i),i=>{if(!tA(i))return Object.prototype.hasOwnProperty.call(n,s)||(l[s]=i.right),ls;{let s=new wu(a,i.left);return p?(o.push([r,s]),ls):tM(new wc(e,t,[s],l))}}))}}}}let x=({es:s,output:n})=>tE(s)?tM(new wc(e,t,wD(s),n)):tF(n);if(u&&u.length>0){let e=u;return o4(()=>{let t={es:s_(d),output:Object.assign({},g)};return oP(fZ(e,e=>e(t),{concurrency:o,batching:l,discard:!0}),()=>x(t))})}return x({es:d,output:g})}}case"Union":{let s=wP(e.types,t),n=vc(s.keys),i=n.length,r=new Map;for(let s=0;s<e.types.length;s++)r.set(e.types[s],wj(e.types[s],t));let a=wA(e)??1,o=wC(e);return(t,l)=>{let c;let u=[],p=0,d=[];if(i>0){if(ei(t))for(let e=0;e<i;e++){let i=n[e],r=s.keys[i].buckets;if(Object.prototype.hasOwnProperty.call(t,i)){let e=String(t[i]);if(Object.prototype.hasOwnProperty.call(r,e))d=d.concat(r[e]);else{let e=_h.make(s.keys[i].literals);u.push([p++,new wc(new _a([new _n(i,e,!1,!0)],[]),t,[new wu(i,new wm(e,t[i]))])])}}else{let e=_h.make(s.keys[i].literals);u.push([p++,new wc(new _a([new _n(i,e,!1,!0)],[]),t,[new wu(i,wg)])])}}else u.push([p++,new wm(e,t)])}s.otherwise.length>0&&(d=d.concat(s.otherwise));for(let e=0;e<d.length;e++){let s=d[e],n=r.get(s)(t,l),i=c&&0!==c.length?void 0:wk(n);if(i){if(tC(i))return tF(i.right);u.push([p++,new wb(s,i.left)])}else{let e=p++;c||(c=[]),c.push(t=>o4(()=>"finalResult"in t?ls:oP(oI(n),n=>(tC(n)?t.finalResult=tF(n.right):t.es.push([e,new wb(s,n.left)]),ls))))}}let m=s=>tE(s)?1===s.length&&"Type"===s[0][1]._tag?tM(s[0][1]):tM(new wx(e,t,wD(s))):tM(new wm(vW,t));if(c&&c.length>0){let e=c;return o4(()=>{let t={es:s_(u)};return oP(fZ(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>"finalResult"in t?t.finalResult:m(t.es))})}return m(u)}}case"Suspend":{let s=vu(()=>wj(_N(e.f(),e.annotations),t));return(e,t)=>s()(e,t)}}},wF=(e,t)=>s=>t(s)?tF(s):tM(new wm(e,s)),wL=(e,t)=>{switch(e._tag){case"Declaration":{let s=vP(e);if(ts(s))return wL(s.value,t);break}case"TypeLiteral":{let s=[];for(let n=0;n<e.propertySignatures.length;n++){let i=e.propertySignatures[n],r=t?_U(i.type):_F(i.type);vZ(r)&&!i.isOptional&&s.push([i.name,r])}return s}case"Refinement":return wL(e.from,t);case"Suspend":return wL(e.f(),t);case"Transformation":return wL(t?e.from:e.to,t)}return[]},wP=(e,t)=>{let s={},n=[];for(let i=0;i<e.length;i++){let r=e[i],a=wL(r,t);if(a.length>0)for(let e=0;e<a.length;e++){let[t,n]=a[e],i=String(n.literal);s[t]=s[t]||{buckets:{},literals:[]};let o=s[t].buckets;if(Object.prototype.hasOwnProperty.call(o,i)){if(e<a.length-1)continue;o[i].push(r),s[t].literals.push(n)}else{o[i]=[r],s[t].literals.push(n);break}}else n.push(r)}return{keys:s,otherwise:n}},w$=e=>__(e)?w$(e.from):e,wU=(e,t,s,n)=>{let i=wk(e);if(i)return i;if(n?.isEffectAllowed===!0)return e;try{return bG(oI(e))}catch(e){return tM(new wh(t,s,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}};function wD(e){return e.sort(([e],[t])=>e>t?1:e<t?-1:0).map(([e,t])=>t)}let wz=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return tF;case"TypeLiteralTransformation":return s=>{let n=tF(s);for(let s of e.propertySignatureTransformations){let[e,i]=t?[s.from,s.to]:[s.to,s.from],r=t?s.decode:s.encode;n=ww(n,t=>{let s=r(Object.prototype.hasOwnProperty.call(t,e)?ti(t[e]):tL());return delete t[e],ts(s)&&(t[i]=s.value),t})}return n}}},wB=Symbol.for("@effect/schema/PrettyHookId"),wZ=vI(wB),wq=Symbol.for("@effect/schema/Schema"),wK={_A:e=>e,_I:e=>e,_R:e=>e},wJ=e=>{if(!e)return{};let t={};for(let s of Object.getOwnPropertySymbols(e))t[s]=e[s];if(void 0!==e.typeId){let s=e.typeId;"object"==typeof s?(t[vg]=s.id,t[s.id]=s.annotation):t[vg]=s}let s=(s,n)=>{void 0!==e[s]&&(t[n]=e[s])};return s("message",vb),s("identifier",vx),s("title",vy),s("description",vv),s("examples",v_),s("default",vw),s("documentation",vk),s("jsonSchema",vS),s("arbitrary",y3),s("pretty",wB),s("equivalence",_W),s("concurrency",vO),s("batching",vE),s("parseIssueTitle",vR),t};class wV{ast;[wq]=wK;constructor(e){this.ast=e}pipe(){return eP(this,arguments)}annotations(e){return new wV(_N(this.ast,wJ(e)))}toString(){return String(this.ast)}}let wG=e=>String(e.ast),wW=e=>wQ(_F(e.ast)),wH=(e,t)=>{let s=wT(e,t);return(e,t)=>wS(s(e,t),wv)},wY=e=>Q(e,wq)&&Y(e[wq]),wQ=e=>new wV(e);class wX extends wV{static ast=e=>_g(e)?_h.make(_f(e,e=>new vB(e))):new vB(e[0]);literals;constructor(e,t=wX.ast(e)){super(t),this.literals=[...e]}annotations(e){return new wX(this.literals,_N(this.ast,wJ(e)))}}function w0(...e){return st(e)?new wX(e):w9}let w1=e=>{switch(e._tag){case"Literal":return[e];case"NumberKeyword":case"StringKeyword":return[AST.TemplateLiteral.make("",[new AST.TemplateLiteralSpan(e,"")])];case"Union":return array_.flatMap(e.types,w1);default:throw Error(`unsupported template literal span (${e})`)}},w2=(e,t,s)=>wQ(new vD(e.map(e=>e.ast),(...e)=>t.decode(...e.map(wQ)),(...e)=>t.encode(...e.map(wQ)),wJ(s))),w5=(e,t)=>{let s=()=>(t,s,n)=>e(t)?tF(t):tM(new wm(n,t));return wQ(new vD([],s,s,wJ(t)))},w3=function(){if(Array.isArray(arguments[0])){let e=arguments[0],t=arguments[1],s=arguments[2];return w2(e,t,s)}let e=arguments[0],t=arguments[1];return w5(e,t)},w4=wQ(vV),w6=wQ(vq),w9=wQ(vW),w8=wQ(vY),w7=wQ(v1),Se=wQ(v3),St=wQ(v9);class Ss extends wV{static ast=e=>_h.members(e.map(e=>e.ast));members;constructor(e,t=Ss.ast(e)){super(t),this.members=[...e]}annotations(e){return new Ss(this.members,_N(this.ast,wJ(e)))}}function Sn(...e){return _g(e)?new Ss(e):st(e)?e[0]:w9}let Si=e=>Sn(e,w6),Sr=e=>Sn(e,w4),Sa=e=>Sn(e,w6,w4);class So extends wV{elements;rest;static ast=(e,t)=>new _t(e.map(e=>wY(e)?new _e(e.ast,!1):new _e(e.optionalElement.ast,!0)),t.map(e=>e.ast),!0);constructor(e,t,s=So.ast(e,t)){super(s),this.elements=e,this.rest=t}annotations(e){return new So(this.elements,this.rest,_N(this.ast,wJ(e)))}}class Sl extends So{value;constructor(e,t){super([],[e],t),this.value=e}annotations(e){return new Sl(this.value,_N(this.ast,wJ(e)))}}let Sc=e=>new Sl(e),Su=e=>e?'"?:"':'":"';class Sp{type;isOptional;isReadonly;annotations;_tag="PropertySignatureDeclaration";constructor(e,t,s,n){this.type=e,this.isOptional=t,this.isReadonly=s,this.annotations=n}toString(){let e=Su(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class Sd{type;isOptional;isReadonly;annotations;fromKey;constructor(e,t,s,n,i){this.type=e,this.isOptional=t,this.isReadonly=s,this.annotations=n,this.fromKey=i}}class Sm{type;isOptional;isReadonly;annotations;constructor(e,t,s,n){this.type=e,this.isOptional=t,this.isReadonly=s,this.annotations=n}}let Sh=e=>void 0===e?"never":D(e)?JSON.stringify(e):String(e);class Sf{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}toString(){return`PropertySignature<${Su(this.to.isOptional)}, ${this.to.type}, ${Sh(this.from.fromKey)}, ${Su(this.from.isOptional)}, ${this.from.type}>`}}let Sg=Symbol.for("@effect/schema/PropertySignature"),Sb=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new Sp(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t});case"PropertySignatureTransformation":return new Sf(new Sd(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new Sm(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t}),e.decode,e.encode)}};class Sx{ast;[wq];[Sg]=null;_Key;_EncodedToken;_TypeToken;constructor(e){this.ast=e}pipe(){return eP(this,arguments)}annotations(e){return new Sx(Sb(this.ast,wJ(e)))}toString(){return String(this.ast)}}let Sy=(e,t,s)=>new Sx(new Sf(new Sd(e.ast,!0,!0,{},void 0),new Sm(t.ast,!1,!0,{}),e=>ti(s.decode(e)),tJ(s.encode))),Sv=(e,t,s)=>new Sx(new Sf(new Sd(e.ast,!0,!0,{},void 0),new Sm(t.ast,!0,!0,{}),s.decode,s.encode)),S_=I(e=>wY(e[0]),(e,t)=>{let s=t?.exact,n=t?.default,i=t?.nullable,r=t?.as=="Option";return s?n?i?Sy(Si(e),wW(e),{decode:tP({onNone:n,onSome:e=>null===e?n():e}),encode:ti}):Sy(e,wW(e),{decode:tP({onNone:n,onSome:N}),encode:ti}):r?i?Sy(Si(e),Sq(wW(e)),{decode:tG(G),encode:N}):Sy(e,Sq(wW(e)),{decode:N,encode:N}):i?Sv(Si(e),wW(e),{decode:tG(G),encode:N}):new Sx(new Sp(e.ast,!0,!0,{})):n?i?Sy(Sa(e),wW(e),{decode:tP({onNone:n,onSome:e=>null==e?n():e}),encode:ti}):Sy(Sr(e),wW(e),{decode:tP({onNone:n,onSome:e=>void 0===e?n():e}),encode:ti}):r?i?Sy(Sa(e),Sq(wW(e)),{decode:tG(e=>null!=e),encode:N}):Sy(Sr(e),Sq(wW(e)),{decode:tG(V),encode:N}):i?Sv(Sa(e),Sr(wW(e)),{decode:tG(G),encode:N}):new Sx(new Sp(Sr(e).ast,!0,!0,{}))}),Sw=e=>Q(e,Sg);class SS extends wV{static ast=(e,t)=>{let s=vc(e),n=[];if(s.length>0){let i=[],r=[],a=[];for(let t=0;t<s.length;t++){let o=s[t],l=e[o];if(Sw(l)){let e=l.ast;switch(e._tag){case"PropertySignatureDeclaration":{let t=e.type,s=e.isOptional,a=e.annotations;i.push(new _n(o,t,s,!0)),r.push(new _n(o,_F(t),s,!0,a)),n.push(new _n(o,t,s,!0,a));break}case"PropertySignatureTransformation":{let t=e.from.fromKey??o;i.push(new _n(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),r.push(new _n(o,e.to.type,e.to.isOptional,!0,e.to.annotations)),a.push(new _T(t,o,e.decode,e.encode))}}}else i.push(new _n(o,l.ast,!1,!0)),r.push(new _n(o,_F(l.ast),!1,!0)),n.push(new _n(o,l.ast,!1,!0))}if(st(a)){let e=[],s=[];for(let n of t){let{indexSignatures:t,propertySignatures:a}=_C(n.key.ast,n.value.ast);a.forEach(e=>{i.push(e),r.push(new _n(e.name,_F(e.type),e.isOptional,e.isReadonly,e.annotations))}),t.forEach(t=>{e.push(t),s.push(new _r(t.parameter,_F(t.type),t.isReadonly))})}return new _S(new _a(i,e,{[vy]:"Struct (Encoded side)"}),new _a(r,s,{[vy]:"Struct (Type side)"}),new _R(a))}}let i=[];for(let e of t){let{indexSignatures:t,propertySignatures:s}=_C(e.key.ast,e.value.ast);s.forEach(e=>n.push(e)),t.forEach(e=>i.push(e))}return new _a(n,i)};fields;records;constructor(e,t,s=SS.ast(e,t)){super(s),this.fields={...e},this.records=[...t]}annotations(e){return new SS(this.fields,this.records,_N(this.ast,wJ(e)))}}function Sk(e,...t){return new SS(e,t)}class SO extends SS{key;value;constructor(e,t,s){super({},[{key:e,value:t}],s),this.key=e,this.value=t}annotations(e){return new SO(this.key,this.value,_N(this.ast,wJ(e)))}}let SE=(e,t)=>new SO(e,t),ST=(e,t,s)=>vf("Extend",`cannot extend \`${e}\` with \`${t}\` (path [${s?.join(", ")}])`),SR=(e,t,s)=>{if(_l(e)&&_l(t)){let n=[...e.propertySignatures];for(let e of t.propertySignatures){let t=e.name,i=n.findIndex(e=>e.name===t);if(-1===i)n.push(e);else{let{isOptional:r,type:a}=n[i];s=[...s,vp(t)],n[i]=new _n(t,SI(a,e.type,s),r,!0)}}return new _a(n,e.indexSignatures.concat(t.indexSignatures))}throw Error(ST(e,t,s))},SI=(e,t,s)=>_h.make(SN([e],[t],s)),SN=(e,t,s)=>sT(e,e=>sT(t,t=>{if(_b(e))return SN(e.types,_b(t)?t.types:[t],s);if(_b(t))return SN([e],t.types,s);if(_l(e)){if(_l(t))return[SR(e,t,s)];if(_k(t)&&_I(t.transformation))return[new _S(SR(e,t.from,s),SR(_F(e),t.to,s),new _R(t.transformation.propertySignatureTransformations))]}else if(_k(e)&&_I(e.transformation)){if(_l(t))return[new _S(SR(e.from,t,s),SR(e.to,_F(t),s),new _R(e.transformation.propertySignatureTransformations))];if(_k(t)&&_I(t.transformation))return[new _S(SR(e.from,t.from,s),SR(e.to,t.to,s),new _R(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}throw Error(ST(e,t,s))})),Sj=I(2,(e,t)=>wQ(SI(e.ast,t.ast,[]))),SA=e=>wQ(new _y(()=>e().ast));function SC(e,t){return s=>wQ(new _v(s.ast,(t,s,n)=>{let i=e(t,s,n);return B(i)?i?tL():ti(new wm(n,t)):i},wJ(t)))}class SM extends wV{from;to;constructor(e,t,s){super(s),this.from=e,this.to=t}annotations(e){return new SM(this.from,this.to,_N(this.ast,wJ(e)))}}let SF=I(e=>wY(e[0])&&wY(e[1]),(e,t,s)=>new SM(e,t,new _S(e.ast,t.ast,new _O(s.decode,s.encode)))),SL=(e=>wY(e[0])&&wY(e[1]),Symbol.for("@effect/schema/TypeId/Trimmed")),SP=Symbol.for("@effect/schema/TypeId/Lowercased");m={identifier:"Lowercased",title:"Lowercased"},e=>e.pipe(SC(e=>e===e.toLowerCase(),{typeId:SP,description:"a lowercase string",...m}));let S$=Symbol.for("@effect/schema/TypeId/Uppercased");h={identifier:"Uppercased",title:"Uppercased"},f={identifier:"Trimmed",title:"Trimmed"},e=>e.pipe(SC(e=>e===e.trim(),{typeId:SL,description:"a string with no leading or trailing whitespace",...f}));let SU=Se.pipe((g={identifier:"Int",title:"Int"},e=>e.pipe(SC(e=>Number.isSafeInteger(e),{typeId:_Q,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...g}))));b={identifier:"NonNegative",title:"NonNegative"},e=>e.pipe(SC(e=>e>=0,{typeId:_Y,description:"a non-negative number",jsonSchema:{minimum:0},...b}));let SD=e=>"None"===e._tag?tL():ti(e.value),Sz=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(SD),SB=e=>tP({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),SZ=e=>(t,s,n)=>te(t)?tt(t)?tF(tL()):ww(e(t.value,s),ti):tM(new wm(n,t)),Sq=e=>w3([e],{decode:e=>SZ(wT(e)),encode:e=>SZ(wR(e))},{description:`Option<${wG(e)}>`,pretty:SB,arbitrary:Sz,equivalence:tW}),SK=Sn(Sk({_tag:w0("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Sk({_tag:w0("Runtime"),id:SU.annotations({title:"id",description:"id"}),startTimeMillis:SU.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),Sk({_tag:w0("Composite"),left:SA(()=>SK),right:SA(()=>SK)}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),SJ={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},SV={silent:{level:-1},fatal:{level:SJ.fatal},error:{level:SJ.error},warn:{level:SJ.warn},log:{level:SJ.log},info:{level:SJ.info},success:{level:SJ.success},fail:{level:SJ.fail},ready:{level:SJ.info},start:{level:SJ.info},box:{level:SJ.info},debug:{level:SJ.debug},trace:{level:SJ.trace},verbose:{level:SJ.verbose}};function SG(e){return null!==e&&"object"==typeof e}let SW=(...e)=>e.reduce((e,t)=>(function e(t,s,n=".",i){if(!SG(s))return e(t,{},n,i);let r=Object.assign({},s);for(let s in t){if("__proto__"===s||"constructor"===s)continue;let a=t[s];null==a||i&&i(r,s,a,n)||(Array.isArray(a)&&Array.isArray(r[s])?r[s]=[...a,...r[s]]:SG(a)&&SG(r[s])?r[s]=e(a,r[s],(n?`${n}.`:"")+s.toString(),i):r[s]=a)}return r})(e,t,"",void 0),{}),SH=!1,SY=[];class SQ{constructor(e={}){let t=e.types||SV;for(let s in this.options=SW({...e,defaults:{...e.defaults},level:SX(e.level,t),reporters:[...e.reporters||[]]},{types:SV,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),t){let e={type:s,...this.options.defaults,...t[s]};this[s]=this._wrapLogFn(e),this[s].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=SX(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){let t=new SQ({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){let t=this.options.reporters.indexOf(e);if(t>=0)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(let e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){SH=!0}resumeLogs(){for(let e of(SH=!1,SY.splice(0)))e[0]._logFn(e[1],e[2])}mockTypes(e){let t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(let e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...s)=>{if(SH){SY.push([this,e,s,t]);return}return this._logFn(e,s,t)}}_logFn(e,t,s){var n,i;if((e.level||0)>this.level)return!1;let r={date:new Date,args:[],...e,level:SX(e.level,this.options.types)};s||1!==t.length||((i=n=t[0],"[object Object]"===Object.prototype.toString.call(i)&&(n.message||n.args)&&!n.stack)?0:1)?r.args=[...t]:Object.assign(r,t[0]),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";let a=(e=!1)=>{let t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){let e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);let o=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,o<this.options.throttle)try{let e=JSON.stringify([r.type,r.tag,r.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(a,this.options.throttle);return}}catch{}a(!0)}_log(e){for(let t of this.options.reporters)t.log(e,{options:this.options})}}function SX(e,t={},s=3){return void 0===e?s:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:s}SQ.prototype.add=SQ.prototype.addReporter,SQ.prototype.remove=SQ.prototype.removeReporter,SQ.prototype.clear=SQ.prototype.removeReporter,SQ.prototype.withScope=SQ.prototype.withTag,SQ.prototype.mock=SQ.prototype.mockTypes,SQ.prototype.pause=SQ.prototype.pauseLogs,SQ.prototype.resume=SQ.prototype.resumeLogs;let S0=I(2,(e,t)=>lR(fA,t)(e)),S1=e=>xn(gs(fL,nW(e))),S2=e=>xn(gs(fL,nH(e))),S5=I(2,(e,t)=>b9(S2(e),()=>S1(t))),S3=Symbol("uploadthing-custom-id-symbol"),S4=["upload","failure","multipart-complete"],S6=e=>"string"==typeof e&&S4.includes(e),S9=["callback"],S8=e=>"string"==typeof e&&S9.includes(e);var S7="6.10.4";let ke=w0("inline","attachment");w0("public-read","private");let kt=Sk({name:w7,size:Se,type:w7}),ks=Sj(kt,Sk({customId:Si(w7)})),kn=Sj(ks,Sk({key:w7,url:w7})),ki=Sk({key:w7,fileName:w7,fileType:w7,fileUrl:w7,pollingJwt:w7,pollingUrl:w7,contentDisposition:ke,customId:Si(w7)}),kr=Sj(ki,Sk({urls:Sc(w7),uploadId:w7,chunkSize:Se,chunkCount:Se})),ka=Sc(Sn(Sj(ki,Sk({url:w7,fields:SE(w7,w7)})),kr)),ko=Sk({status:w7,fileData:S_(Sk({fileKey:Si(w7),fileName:w7,fileSize:Se,fileType:w7,metadata:Si(w7),customId:Si(w7),callbackUrl:S_(w7),callbackSlug:S_(w7)}))}),kl=Sk({success:St,message:S_(w7)}),kc=Sk({status:w7}),ku=Sk({files:Sc(kt),input:w8}),kp=Sk({fileKey:w7,uploadId:Si(w7),storageProviderError:S_(w7),fileName:w7}),kd=Sk({fileKey:w7,uploadId:w7,etags:Sc(Sk({tag:w7,partNumber:Se}))}),km=e=>!!(e.ok&&!(e.status>=400)&&e.headers.has("x-uploadthing-version")),kh=(e,t)=>xz(function*(){let s=yield*yR(yb(`/api/pollUpload/${e}`)).pipe(o$(yI),o$(wH(ko)),o$(e=>"done"===e.status?o3(e.fileData):oj(new yu)),bh({while:e=>e instanceof yu,schedule:yj}),dC("RetryError",e=>oT(e)));if(void 0===s)return yield*dZ(`Failed to simulate callback for file ${e}`),yield*new yE({code:"UPLOAD_FAILED",message:"File took too long to upload"});let n=s.callbackUrl+`?slug=${s.callbackSlug}`;n.startsWith("http")||(n="http://"+n),yield*dz("SIMULATING FILE UPLOAD WEBHOOK CALLBACK",n);let i=JSON.stringify({status:"uploaded",metadata:JSON.parse(s.metadata??"{}"),file:{url:`https://utfs.io/f/${encodeURIComponent(e)}`,key:e,name:s.fileName,size:s.fileSize,customId:s.customId,type:s.fileType}}),r=yield*dY({try:()=>yM(i,t),catch:e=>new yE({code:"INTERNAL_SERVER_ERROR",message:"Failed to sign payload",cause:e})});return km((yield*yR(n,{method:"POST",body:i,headers:{"Content-Type":"application/json","uploadthing-hook":"callback","x-uploadthing-signature":r}}).pipe(dC("FetchError",()=>o3(new Response(null,{status:500}))))))?yield*dz("Successfully simulated callback for file",e):yield*dZ(`
Failed to simulate callback for file '${s.fileKey}'. Is your webhook configured correctly?
  - Make sure the URL '${n}' is accessible without any authentication. You can verify this by running 'curl -X POST ${n}' in your terminal
  - Still facing issues? Read https://docs.uploadthing.com/faq for common issues
`.trim()),s}),kf=(e,t)=>{switch(t){case"error":case"fatal":return`\x1b[41m\x1b[30m${e}\x1b[0m`;case"warn":return`\x1b[43m\x1b[30m${e}\x1b[0m`;case"info":case"log":return`\x1b[44m\x1b[30m${e}\x1b[0m`;case"debug":case"trace":return`\x1b[47m\x1b[30m${e}\x1b[0m`;case"success":return`\x1b[42m\x1b[30m${e}\x1b[0m`;default:return e}},kg={fatal:"⨯",error:"⨯",warn:"⚠️",info:"ℹ",log:"ℹ",debug:"⚙",trace:"→",success:"✓"},kb=function(e={}){return new SQ(e)}({reporters:[{log:e=>{let{type:t,tag:s,date:n,args:i}=e,r=kg[t],a=kf(` ${r} ${s} ${n.toLocaleTimeString()} `,t);console.log(i.map(e=>yw(e)&&"string"==typeof e.stack?e.message+"\n"+function(e){let t="cwd"in x2&&"function"==typeof x2.cwd?x2.cwd():"__UnknownCWD__";return"  "+e.split("\n").splice(1).map(e=>e.trim().replace("file://","").replace(t+"/","")).join("\n  ")}(e.stack):e).map(e=>"string"==typeof e?e:JSON.stringify(e,null,4)).join(" ").split("\n").map(e=>a+" "+e).join("\n"))}}],defaults:{tag:"UPLOADTHING"}}),kx={All:"verbose",Fatal:"error",Error:"error",Info:"info",Debug:"debug",Trace:"trace",Warning:"warn",None:"silent"},ky=(e="info")=>S0({silent:lb,error:pB,warn:pZ,info:lf,debug:lg,trace:pq,verbose:lh}[e]),kv=S5(fM,mb(({logLevel:e,message:t})=>{kb[kx[e._tag]](t)})),k_=(e,t)=>yR(yb("/api/completeMultipart"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId,etags:t}),headers:{"Content-Type":"application/json"}}).pipe(o$(yI),o$(wH(Sk({success:St,message:S_(w7)}))),d3("completeMultipartUpload",{attributes:{etags:t,presigned:e}})),kw=e=>yR(yb("/api/failureCallback"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId}),headers:{"Content-Type":"application/json"}}).pipe(o$(yI),o$(wH(kl)),d3("abortMultipartUpload",{attributes:{presigned:e}})),kS=e=>e||(x2.env.UPLOADTHING_SECRET?x2.env.UPLOADTHING_SECRET:void 0);class kk extends yi("FileSizeMismatch"){constructor(e,t,s){super({reason:`You uploaded a ${e} file that was ${yv(s)}, but the limit for that type is ${t}`})}}class kO extends yi("FileCountMismatch"){constructor(e,t,s,n){super({reason:`You uploaded ${n} file(s) of type '${e}', but the ${t} for that type is ${s}`})}}let kE=(e,t)=>xz(function*(){let s={};for(let n of e){let e=yield*yg(n.name,y_(t));s[e]=(s[e]??0)+1;let i=t[e]?.maxFileSize;if(!i)return yield*new yr(e,"maxFileSize");let r=yield*yy(i);if(n.size>r)return yield*new kk(e,i,n.size)}for(let e in s){let n=t[e];if(!n)return yield*new yr(e);let i=s[e],r=n.minFileCount,a=n.maxFileCount;if(r>a)return yield*new yE({code:"BAD_REQUEST",message:"Invalid config during file count - minFileCount > maxFileCount",cause:`minFileCount must be less than maxFileCount for key ${e}. got: ${r} > ${a}`});if(i<r)return yield*new kO(e,"minimum",r,i);if(i>a)return yield*new kO(e,"maximum",a,i)}return null});class kT extends tw("uploadthing/RequestInput")(){}let kR=(e,t,s)=>xz(function*(){let n=yield*oh(e.req)?e.req:o3(e.req),i=new URL(n.url),r=n.headers,a=i.searchParams,o=a.get("actionType"),l=a.get("slug"),c=r.get("uploadthing-hook"),u=r.get("x-uploadthing-package")??"unknown",p=r.get("x-uploadthing-version"),d=kS(t.config?.uploadthingSecret);if(null!=p&&p!==S7)return yield*dZ(`Client version mismatch. Server version: ${S7}, Client version: ${p}`),yield*new yE({code:"BAD_REQUEST",message:"Client version mismatch",cause:`Server version: ${S7}, Client version: ${p}`});if(!l)return yield*dZ("No slug provided in params:",a),yield*new yE({code:"BAD_REQUEST",message:"No slug provided in params"});if(l&&"string"!=typeof l){let e=`Expected slug to be of type 'string', got '${typeof l}'`;return yield*dZ(e),yield*new yE({code:"BAD_REQUEST",message:"`slug` must be a string",cause:e})}if(!d){let e="No secret provided, please set UPLOADTHING_SECRET in your env file or in the config";return yield*dZ(e),yield*new yE({code:"MISSING_ENV",message:"No secret provided",cause:e})}if(!d.startsWith("sk_")){let e="Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'";return yield*dZ(e),yield*new yE({code:"MISSING_ENV",message:"Invalid API key. API keys must start with 'sk_'.",cause:e})}if(u&&"string"!=typeof u){let e=`Expected x-uploadthing-package to be of type 'string', got '${typeof u}'`;return yield*dZ(e),yield*new yE({code:"BAD_REQUEST",message:"`x-uploadthing-package` must be a string. eg. '@uploadthing/react'",cause:e})}let m=t.router[l];if(!m){let e=`No file route found for slug ${l}`;return yield*dZ(e),yield*new yE({code:"NOT_FOUND",message:e})}if(o&&!S6(o)){let e=`Expected ${S4.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${o}"`;return yield*dZ("Invalid action type",e),yield*new yE({code:"BAD_REQUEST",cause:`Invalid action type ${o}`,message:e})}if(c&&!S8(c)){let e=`Expected ${S9.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${c}"`;return yield*dZ("Invalid uploadthing hook",e),yield*new yE({code:"BAD_REQUEST",cause:`Invalid uploadthing hook ${c}`,message:e})}if(!o&&!c||o&&c){let e="Exactly one of 'actionType' or 'uploadthing-hook' must be provided";return yield*dZ(e),yield*new yE({code:"BAD_REQUEST",message:e})}yield*dD("✔︎ All request input is valid");let h=yield*yT;h.baseHeaders["x-uploadthing-api-key"]=d,h.baseHeaders["x-uploadthing-fe-package"]=u,h.baseHeaders["x-uploadthing-be-adapter"]=s;let{isDev:f=xY}=t.config??{};f&&(yield*dz("UploadThing dev server is now running!"));let g={req:n,config:t.config??{},middlewareArgs:e.middlewareArgs,isDev:f,apiKey:d,slug:l,uploadable:m,hook:null,action:null};return o?{...g,action:o}:{...g,hook:c}}),kI=xz(function*(){let{config:e,req:t,isDev:s}=yield*kT,n=new URL(t.url);if(e?.callbackUrl?n=yield*yk(e.callbackUrl):x2.env.UPLOADTHING_URL&&(n=yield*yk(x2.env.UPLOADTHING_URL)),s||!n.host.includes("localhost"))return n;let i=t.headers.get("origin")??t.headers.get("referer")??t.headers.get("host")??t.headers.get("x-forwarded-host");return(i&&!i.includes("http")&&(i=(t.headers.get("x-forwarded-proto")??"https")+"://"+i),!i||i.includes("localhost"))?(dB("You are using a localhost callback url in production which is not supported.","Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production"),n):yield*yk(i)}),kN=(e,t,s)=>e(t).pipe(ky(s?.logLevel),xo(kv),dV(yT,{fetch:s?.fetch??globalThis.fetch,baseHeaders:{"x-uploadthing-version":S7,"x-uploadthing-api-key":void 0,"x-uploadthing-be-adapter":void 0,"x-uploadthing-fe-package":void 0}}),kj,bV),kj=e=>ow(e,e=>o3({success:!1,error:e})),kA=kT.pipe(o$(({action:e,hook:t})=>{if("callback"===t)return kM;switch(e){case"upload":return kL;case"multipart-complete":return kP;case"failure":return k$}}),oW(e=>({success:!0,...e}))),kC=(e,t)=>s=>kA.pipe(dG(kT,kR(s,e,t)),dM({InvalidJsonError:e=>new yE({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e}),BadRequestError:e=>oj(new yE({code:"INTERNAL_SERVER_ERROR",message:e.getMessage(),cause:e,data:e.json})),FetchError:e=>new yE({code:"INTERNAL_SERVER_ERROR",message:"string"==typeof e.error?e.error:e.message,cause:e,data:e.error}),ParseError:e=>new yE({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e})}),dH(e=>dZ(e.message))),kM=xz(function*(){let{req:e,uploadable:t,apiKey:s}=yield*kT,n=yield*dY({try:async()=>yF(await e.clone().text(),e.headers.get("x-uploadthing-signature"),s),catch:()=>new yE({code:"BAD_REQUEST",message:"Invalid signature"})});if(yield*dD("Signature verified:",n),!n)return yield*dZ("Invalid signature"),yield*new yE({code:"BAD_REQUEST",message:"Invalid signature"});let i=yield*oP(yN(e),wH(Sk({status:w7,file:kn,metadata:SE(w7,w8)})));yield*dD("Handling callback request with input:",i);let r=yield*dY({try:async()=>t.resolver({file:i.file,metadata:i.metadata}),catch:e=>new yE({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadComplete",cause:e})}).pipe(dH(e=>dZ("Failed to run onUploadComplete. You probably shouldn't be throwing errors here.",e))),a={fileKey:i.file.key,callbackData:r??null};return yield*dD("'onUploadComplete' callback finished. Sending response to UploadThing:",a),yield*yR(yb("/api/serverCallback"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).pipe(o$(yI),o$(wH(kc))),{body:null}}),kF=e=>xz(function*(){let{uploadable:t,middlewareArgs:s}=yield*kT,{files:n,input:i}=e;yield*dD("Running middleware");let r=yield*dY({try:async()=>t._def.middleware({...s,input:i,files:n}),catch:e=>e instanceof yE?e:new yE({code:"INTERNAL_SERVER_ERROR",message:"Failed to run middleware",cause:e})}).pipe(dH(e=>dZ("An error occured in your middleware function",e)));if(r[S3]&&r[S3].length!==n.length){let e=`Expected files override to have the same length as original files, got ${r[S3].length} but expected ${n.length}`;return yield*dZ(e),yield*new yE({code:"BAD_REQUEST",message:"Files override must have the same length as files",cause:e})}let a=yield*fZ(n,(e,t)=>xz(function*(){let s=r[S3]?.[t];return s&&s.size!==e.size&&(yield*dB("File size mismatch. Reverting to original size")),{name:s?.name??e.name,size:e.size,customId:s?.customId}}));return{metadata:r,filesWithCustomIds:a}}),kL=xz(function*(){let e;let t=yield*kT,{files:s,input:n}=yield*oP(yN(t.req),wH(ku));yield*dD("Handling upload request with input:",{files:s,input:n}),yield*dD("Parsing user input");let i=t.uploadable._def.inputParser,r=yield*dY({try:async()=>(function(e){if("function"==typeof e.parse)return e.parse;throw Error("Invalid parser")})(i)(n),catch:e=>new yE({code:"BAD_REQUEST",message:"Invalid input",cause:e})}).pipe(dH(e=>dZ("An error occured trying to parse input",e)));yield*dD("Input parsed successfully",r);let{metadata:a,filesWithCustomIds:o}=yield*kF({input:r,files:s});yield*dD("Parsing route config",t.uploadable._def.routerConfig);let l=yield*yf(t.uploadable._def.routerConfig).pipe(dC("InvalidRouteConfig",e=>new yE({code:"BAD_REQUEST",message:"Invalid config",cause:e})));yield*dD("Route config parsed successfully",l),yield*dD("Validating files meet the config requirements",s),yield*kE(s,l).pipe(ow(e=>new yE({code:"BAD_REQUEST",message:`Invalid config: ${e._tag}`,cause:"reason"in e?e.reason:e.message})));let c=yield*kI.pipe(dH(e=>dZ("Failed to resolve callback URL",e)),dC("InvalidURL",e=>new yE({code:"INTERNAL_SERVER_ERROR",message:e.message})));yield*dD("Retrieving presigned URLs from UploadThing. Callback URL is:",c.href);let u=yield*yR(yb("/api/prepareUpload"),{method:"POST",body:JSON.stringify({files:o,routeConfig:l,metadata:a,callbackUrl:c.origin+c.pathname,callbackSlug:t.slug}),headers:{"Content-Type":"application/json"}}).pipe(o$(yI),o$(wH(ka)));if(yield*dD("UploadThing responded with:",u),yield*dD("Sending presigned URLs to client"),t.isDev){let s=yield*yT;e=fZ(u,e=>kh(e.key,t.apiKey),{concurrency:10}).pipe(xo(kv),dV(yT,s),bV)}return{body:u,cleanup:e}}),kP=xz(function*(){let e=yield*kT,t=yield*oP(yN(e.req),wH(kd));yield*dD("Handling multipart-complete request with input:",t),yield*dD("Notifying UploadThing that multipart upload is complete");let s=yield*k_({key:t.fileKey,uploadId:t.uploadId},t.etags);return yield*dD("UploadThing responded with:",s),{body:null}}),k$=xz(function*(){let{req:e,uploadable:t}=yield*kT,{fileKey:s,uploadId:n}=yield*oP(yN(e),wH(kp));yield*dD("Handling failure request with input:",{fileKey:s,uploadId:n}),yield*dD("Notifying UploadThing that upload failed");let i=yield*kw({key:s,uploadId:n});return yield*dD("UploadThing responded with:",i),yield*dD("Running 'onUploadError' callback"),yield*dA({try:()=>{t._def.onUploadError({error:new yE({code:"UPLOAD_FAILED",message:`Upload failed for ${s}`}),fileKey:s})},catch:e=>new yE({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadError",cause:e})}).pipe(dH(e=>dZ("Failed to run onUploadError. You probably shouldn't be throwing errors here.",e))),{body:null}}),kU=e=>()=>y_(e.router).map(t=>{let s=bG(yf(e.router[t]._def.routerConfig));return{slug:t,config:s}}),kD=(e,t)=>{!function(){let e,t;if(void 0===x2)return;let s=x2.versions?.node?.split(".");s&&([e,t]=s.map(e=>parseInt(e,10)));let n=x2.env?.NODE;if(!e&&n){let s=/v(\d+)\.(\d+)\.(\d+)/.exec(n)?.[0];s&&([e,t]=s.substring(1).split(".").map(e=>parseInt(e,10)))}e&&t&&!(e>18)&&(18===e&&t>=13||(bG(dZ(`YOU ARE USING A LEGACY (${e}.${t}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`)),x2.exit?.(1)))}();let s=kC(e,t),n=kU(e);return{GET:e=>Response.json(n(),{headers:{"x-uploadthing-version":S7}}),POST:async t=>{let n=t instanceof Request?t:t.request,i=await kN(s,{req:n,middlewareArgs:{req:n,event:void 0,res:void 0}},e.config);if(!1===i.success)return Response.json(function(e,t){return(t[Object.keys(t)[0]]?._def.errorFormatter??function(e){return{message:e.message}})(e)}(i.error,e.router),{status:yO[i.error.code]??500,headers:{"x-uploadthing-version":S7}});let r=Response.json(i.body,{headers:{"x-uploadthing-version":S7}});return r.cleanup=i.cleanup,r}}};function kz(e){return{message:e.message}}(function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let s of e)t[s]=s;return t},e.getValidEnumValues=t=>{let s=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of s)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t},e.find=(e,t)=>{for(let s of e)if(t(s))return s},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(y||(y={})),(v||(v={})).mergeShapes=(e,t)=>({...e,...t});let kB=y.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),kZ=e=>{switch(typeof e){case"undefined":return kB.undefined;case"string":return kB.string;case"number":return isNaN(e)?kB.nan:kB.number;case"boolean":return kB.boolean;case"function":return kB.function;case"bigint":return kB.bigint;case"symbol":return kB.symbol;case"object":if(Array.isArray(e))return kB.array;if(null===e)return kB.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return kB.promise;if("undefined"!=typeof Map&&e instanceof Map)return kB.map;if("undefined"!=typeof Set&&e instanceof Set)return kB.set;if("undefined"!=typeof Date&&e instanceof Date)return kB.date;return kB.object;default:return kB.unknown}},kq=y.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class kK extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},s={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)s._errors.push(t(i));else{let e=s,n=0;for(;n<i.path.length;){let s=i.path[n];n===i.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(t(i))):e[s]=e[s]||{_errors:[]},e=e[s],n++}}};return n(this),s}static assert(e){if(!(e instanceof kK))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,y.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},s=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}kK.create=e=>new kK(e);let kJ=(e,t)=>{let s;switch(e.code){case kq.invalid_type:s=e.received===kB.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case kq.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,y.jsonStringifyReplacer)}`;break;case kq.unrecognized_keys:s=`Unrecognized key(s) in object: ${y.joinValues(e.keys,", ")}`;break;case kq.invalid_union:s="Invalid input";break;case kq.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${y.joinValues(e.options)}`;break;case kq.invalid_enum_value:s=`Invalid enum value. Expected ${y.joinValues(e.options)}, received '${e.received}'`;break;case kq.invalid_arguments:s="Invalid function arguments";break;case kq.invalid_return_type:s="Invalid function return type";break;case kq.invalid_date:s="Invalid date";break;case kq.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:y.assertNever(e.validation):s="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case kq.too_small:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case kq.too_big:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case kq.custom:s="Invalid input";break;case kq.invalid_intersection_types:s="Intersection results could not be merged";break;case kq.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case kq.not_finite:s="Number must be finite";break;default:s=t.defaultError,y.assertNever(e)}return{message:s}},kV=kJ;function kG(){return kV}let kW=e=>{let{data:t,path:s,errorMaps:n,issueData:i}=e,r=[...s,...i.path||[]],a={...i,path:r};if(void 0!==i.message)return{...i,path:r,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...i,path:r,message:o}};function kH(e,t){let s=kG(),n=kW({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===kJ?void 0:kJ].filter(e=>!!e)});e.common.issues.push(n)}class kY{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let n of t){if("aborted"===n.status)return kQ;"dirty"===n.status&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let e of t){let t=await e.key,n=await e.value;s.push({key:t,value:n})}return kY.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return kQ;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(s[t.value]=i.value)}return{status:e.value,value:s}}}let kQ=Object.freeze({status:"aborted"}),kX=e=>({status:"dirty",value:e}),k0=e=>({status:"valid",value:e}),k1=e=>"aborted"===e.status,k2=e=>"dirty"===e.status,k5=e=>"valid"===e.status,k3=e=>"undefined"!=typeof Promise&&e instanceof Promise;function k4(e,t,s,n){if("a"===s&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)}function k6(e,t,s,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(_||(_={}));class k9{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let k8=(e,t)=>{if(k5(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new kK(e.common.issues);return this._error=t,this._error}}};function k7(e){if(!e)return{};let{errorMap:t,invalid_type_error:s,required_error:n,description:i}=e;if(t&&(s||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var r,a;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:i.defaultError}:void 0===i.data?{message:null!==(r=null!=o?o:n)&&void 0!==r?r:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(a=null!=o?o:s)&&void 0!==a?a:i.defaultError}},description:i}}class Oe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return kZ(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:kZ(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new kY,ctx:{common:e.parent.common,data:e.data,parsedType:kZ(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(k3(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;let n={common:{issues:[],async:null!==(s=null==t?void 0:t.async)&&void 0!==s&&s,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kZ(e)},i=this._parseSync({data:e,path:n.path,parent:n});return k8(n,i)}async parseAsync(e,t){let s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){let s={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kZ(e)},n=this._parse({data:e,path:s.path,parent:s});return k8(s,await (k3(n)?n:Promise.resolve(n)))}refine(e,t){let s=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),r=()=>n.addIssue({code:kq.custom,...s(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(r(),!1)):!!i||(r(),!1)})}refinement(e,t){return this._refinement((s,n)=>!!e(s)||(n.addIssue("function"==typeof t?t(s,n):t),!1))}_refinement(e){return new Oq({schema:this,typeName:k.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return OK.create(this,this._def)}nullable(){return OJ.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return OT.create(this,this._def)}promise(){return OZ.create(this,this._def)}or(e){return OI.create([this,e],this._def)}and(e){return OA.create(this,e,this._def)}transform(e){return new Oq({...k7(this._def),schema:this,typeName:k.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new OV({...k7(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:k.ZodDefault})}brand(){return new OY({typeName:k.ZodBranded,type:this,...k7(this._def)})}catch(e){return new OG({...k7(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:k.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return OQ.create(this,e)}readonly(){return OX.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let Ot=/^c[^\s-]{8,}$/i,Os=/^[0-9a-z]+$/,On=/^[0-9A-HJKMNP-TV-Z]{26}$/,Oi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Or=/^[a-z0-9_-]{21}$/i,Oa=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Oo=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ol=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Oc=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Ou=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Op="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Od=RegExp(`^${Op}$`);function Om(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Oh(e){let t=`${Op}T${Om(e)}`,s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,RegExp(`^${t}$`)}class Of extends Oe{_parse(e){var t,s;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==kB.string){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.string,received:t.parsedType}),kQ}let r=new kY;for(let a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(kH(i=this._getOrReturnCtx(e,i),{code:kq.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("max"===a.kind)e.data.length>a.value&&(kH(i=this._getOrReturnCtx(e,i),{code:kq.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("length"===a.kind){let t=e.data.length>a.value,s=e.data.length<a.value;(t||s)&&(i=this._getOrReturnCtx(e,i),t?kH(i,{code:kq.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&kH(i,{code:kq.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if("email"===a.kind)Oo.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"email",code:kq.invalid_string,message:a.message}),r.dirty());else if("emoji"===a.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:kq.invalid_string,message:a.message}),r.dirty());else if("uuid"===a.kind)Oi.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:kq.invalid_string,message:a.message}),r.dirty());else if("nanoid"===a.kind)Or.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:kq.invalid_string,message:a.message}),r.dirty());else if("cuid"===a.kind)Ot.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:kq.invalid_string,message:a.message}),r.dirty());else if("cuid2"===a.kind)Os.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:kq.invalid_string,message:a.message}),r.dirty());else if("ulid"===a.kind)On.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:kq.invalid_string,message:a.message}),r.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(t){kH(i=this._getOrReturnCtx(e,i),{validation:"url",code:kq.invalid_string,message:a.message}),r.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"regex",code:kq.invalid_string,message:a.message}),r.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(kH(i=this._getOrReturnCtx(e,i),{code:kq.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(kH(i=this._getOrReturnCtx(e,i),{code:kq.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(kH(i=this._getOrReturnCtx(e,i),{code:kq.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):"datetime"===a.kind?Oh(a).test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{code:kq.invalid_string,validation:"datetime",message:a.message}),r.dirty()):"date"===a.kind?Od.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{code:kq.invalid_string,validation:"date",message:a.message}),r.dirty()):"time"===a.kind?RegExp(`^${Om(a)}$`).test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{code:kq.invalid_string,validation:"time",message:a.message}),r.dirty()):"duration"===a.kind?Oa.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"duration",code:kq.invalid_string,message:a.message}),r.dirty()):"ip"===a.kind?(t=e.data,("v4"===(s=a.version)||!s)&&Ol.test(t)||("v6"===s||!s)&&Oc.test(t)||(kH(i=this._getOrReturnCtx(e,i),{validation:"ip",code:kq.invalid_string,message:a.message}),r.dirty())):"base64"===a.kind?Ou.test(e.data)||(kH(i=this._getOrReturnCtx(e,i),{validation:"base64",code:kq.invalid_string,message:a.message}),r.dirty()):y.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,s){return this.refinement(t=>e.test(t),{validation:t,code:kq.invalid_string,..._.errToObj(s)})}_addCheck(e){return new Of({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}datetime(e){var t,s;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(s=null==e?void 0:e.local)&&void 0!==s&&s,..._.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,..._.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,..._.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,..._.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,..._.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,..._.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,..._.errToObj(t)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new Of({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Of({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Of({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Of.create=e=>{var t;return new Of({checks:[],typeName:k.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...k7(e)})};class Og extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==kB.number){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.number,received:t.parsedType}),kQ}let s=new kY;for(let n of this._def.checks)"int"===n.kind?y.isInteger(e.data)||(kH(t=this._getOrReturnCtx(e,t),{code:kq.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(kH(t=this._getOrReturnCtx(e,t),{code:kq.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(kH(t=this._getOrReturnCtx(e,t),{code:kq.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):"multipleOf"===n.kind?0!==function(e,t){let s=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=s>n?s:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}(e.data,n.value)&&(kH(t=this._getOrReturnCtx(e,t),{code:kq.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(kH(t=this._getOrReturnCtx(e,t),{code:kq.not_finite,message:n.message}),s.dirty()):y.assertNever(n);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,_.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_.toString(t))}setLimit(e,t,s,n){return new Og({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:_.toString(n)}]})}_addCheck(e){return new Og({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&y.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if("finite"===s.kind||"int"===s.kind||"multipleOf"===s.kind)return!0;"min"===s.kind?(null===t||s.value>t)&&(t=s.value):"max"===s.kind&&(null===e||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Og.create=e=>new Og({checks:[],typeName:k.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...k7(e)});class Ob extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==kB.bigint){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.bigint,received:t.parsedType}),kQ}let s=new kY;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(kH(t=this._getOrReturnCtx(e,t),{code:kq.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(kH(t=this._getOrReturnCtx(e,t),{code:kq.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(kH(t=this._getOrReturnCtx(e,t),{code:kq.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):y.assertNever(n);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,_.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_.toString(t))}setLimit(e,t,s,n){return new Ob({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:_.toString(n)}]})}_addCheck(e){return new Ob({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Ob.create=e=>{var t;return new Ob({checks:[],typeName:k.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...k7(e)})};class Ox extends Oe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==kB.boolean){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.boolean,received:t.parsedType}),kQ}return k0(e.data)}}Ox.create=e=>new Ox({typeName:k.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...k7(e)});class Oy extends Oe{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==kB.date){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.date,received:t.parsedType}),kQ}if(isNaN(e.data.getTime()))return kH(this._getOrReturnCtx(e),{code:kq.invalid_date}),kQ;let s=new kY;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(kH(t=this._getOrReturnCtx(e,t),{code:kq.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(kH(t=this._getOrReturnCtx(e,t),{code:kq.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):y.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Oy({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Oy.create=e=>new Oy({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:k.ZodDate,...k7(e)});class Ov extends Oe{_parse(e){if(this._getType(e)!==kB.symbol){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.symbol,received:t.parsedType}),kQ}return k0(e.data)}}Ov.create=e=>new Ov({typeName:k.ZodSymbol,...k7(e)});class O_ extends Oe{_parse(e){if(this._getType(e)!==kB.undefined){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.undefined,received:t.parsedType}),kQ}return k0(e.data)}}O_.create=e=>new O_({typeName:k.ZodUndefined,...k7(e)});class Ow extends Oe{_parse(e){if(this._getType(e)!==kB.null){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.null,received:t.parsedType}),kQ}return k0(e.data)}}Ow.create=e=>new Ow({typeName:k.ZodNull,...k7(e)});class OS extends Oe{constructor(){super(...arguments),this._any=!0}_parse(e){return k0(e.data)}}OS.create=e=>new OS({typeName:k.ZodAny,...k7(e)});class Ok extends Oe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return k0(e.data)}}Ok.create=e=>new Ok({typeName:k.ZodUnknown,...k7(e)});class OO extends Oe{_parse(e){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.never,received:t.parsedType}),kQ}}OO.create=e=>new OO({typeName:k.ZodNever,...k7(e)});class OE extends Oe{_parse(e){if(this._getType(e)!==kB.undefined){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.void,received:t.parsedType}),kQ}return k0(e.data)}}OE.create=e=>new OE({typeName:k.ZodVoid,...k7(e)});class OT extends Oe{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==kB.array)return kH(t,{code:kq.invalid_type,expected:kB.array,received:t.parsedType}),kQ;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(kH(t,{code:e?kq.too_big:kq.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(kH(t,{code:kq.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(kH(t,{code:kq.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((e,s)=>n.type._parseAsync(new k9(t,e,t.path,s)))).then(e=>kY.mergeArray(s,e));let i=[...t.data].map((e,s)=>n.type._parseSync(new k9(t,e,t.path,s)));return kY.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new OT({...this._def,minLength:{value:e,message:_.toString(t)}})}max(e,t){return new OT({...this._def,maxLength:{value:e,message:_.toString(t)}})}length(e,t){return new OT({...this._def,exactLength:{value:e,message:_.toString(t)}})}nonempty(e){return this.min(1,e)}}OT.create=(e,t)=>new OT({type:e,minLength:null,maxLength:null,exactLength:null,typeName:k.ZodArray,...k7(t)});class OR extends Oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=y.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==kB.object){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.object,received:t.parsedType}),kQ}let{status:t,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof OO&&"strip"===this._def.unknownKeys))for(let e in s.data)i.includes(e)||r.push(e);let a=[];for(let e of i){let t=n[e],i=s.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new k9(s,i,s.path,e)),alwaysSet:e in s.data})}if(this._def.catchall instanceof OO){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of r)a.push({key:{status:"valid",value:e},value:{status:"valid",value:s.data[e]}});else if("strict"===e)r.length>0&&(kH(s,{code:kq.unrecognized_keys,keys:r}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of r){let n=s.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new k9(s,n,s.path,t)),alwaysSet:t in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let s=await t.key,n=await t.value;e.push({key:s,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>kY.mergeObjectSync(t,e)):kY.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new OR({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,s)=>{var n,i,r,a;let o=null!==(r=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,s).message)&&void 0!==r?r:s.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=_.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new OR({...this._def,unknownKeys:"strip"})}passthrough(){return new OR({...this._def,unknownKeys:"passthrough"})}extend(e){return new OR({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new OR({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:k.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new OR({...this._def,catchall:e})}pick(e){let t={};return y.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new OR({...this._def,shape:()=>t})}omit(e){let t={};return y.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new OR({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof OR){let s={};for(let n in t.shape){let i=t.shape[n];s[n]=OK.create(e(i))}return new OR({...t._def,shape:()=>s})}return t instanceof OT?new OT({...t._def,type:e(t.element)}):t instanceof OK?OK.create(e(t.unwrap())):t instanceof OJ?OJ.create(e(t.unwrap())):t instanceof OC?OC.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return y.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new OR({...this._def,shape:()=>t})}required(e){let t={};return y.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let e=this.shape[s];for(;e instanceof OK;)e=e._def.innerType;t[s]=e}}),new OR({...this._def,shape:()=>t})}keyof(){return OD(y.objectKeys(this.shape))}}OR.create=(e,t)=>new OR({shape:()=>e,unknownKeys:"strip",catchall:OO.create(),typeName:k.ZodObject,...k7(t)}),OR.strictCreate=(e,t)=>new OR({shape:()=>e,unknownKeys:"strict",catchall:OO.create(),typeName:k.ZodObject,...k7(t)}),OR.lazycreate=(e,t)=>new OR({shape:e,unknownKeys:"strip",catchall:OO.create(),typeName:k.ZodObject,...k7(t)});class OI extends Oe{_parse(e){let{ctx:t}=this._processInputParams(e),s=this._def.options;if(t.common.async)return Promise.all(s.map(async e=>{let s={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let s of e)if("dirty"===s.result.status)return t.common.issues.push(...s.ctx.common.issues),s.result;let s=e.map(e=>new kK(e.ctx.common.issues));return kH(t,{code:kq.invalid_union,unionErrors:s}),kQ});{let e;let n=[];for(let i of s){let s={...t,common:{...t.common,issues:[]},parent:null},r=i._parseSync({data:t.data,path:t.path,parent:s});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:s}),s.common.issues.length&&n.push(s.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new kK(e));return kH(t,{code:kq.invalid_union,unionErrors:i}),kQ}}get options(){return this._def.options}}OI.create=(e,t)=>new OI({options:e,typeName:k.ZodUnion,...k7(t)});let ON=e=>{if(e instanceof O$)return ON(e.schema);if(e instanceof Oq)return ON(e.innerType());if(e instanceof OU)return[e.value];if(e instanceof Oz)return e.options;if(e instanceof OB)return y.objectValues(e.enum);if(e instanceof OV)return ON(e._def.innerType);if(e instanceof O_)return[void 0];else if(e instanceof Ow)return[null];else if(e instanceof OK)return[void 0,...ON(e.unwrap())];else if(e instanceof OJ)return[null,...ON(e.unwrap())];else if(e instanceof OY)return ON(e.unwrap());else if(e instanceof OX)return ON(e.unwrap());else if(e instanceof OG)return ON(e._def.innerType);else return[]};class Oj extends Oe{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==kB.object)return kH(t,{code:kq.invalid_type,expected:kB.object,received:t.parsedType}),kQ;let s=this.discriminator,n=t.data[s],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(kH(t,{code:kq.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),kQ)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let n=new Map;for(let s of t){let t=ON(s.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,s)}}return new Oj({typeName:k.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...k7(s)})}}class OA extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e),n=(e,n)=>{if(k1(e)||k1(n))return kQ;let i=function e(t,s){let n=kZ(t),i=kZ(s);if(t===s)return{valid:!0,data:t};if(n===kB.object&&i===kB.object){let n=y.objectKeys(s),i=y.objectKeys(t).filter(e=>-1!==n.indexOf(e)),r={...t,...s};for(let n of i){let i=e(t[n],s[n]);if(!i.valid)return{valid:!1};r[n]=i.data}return{valid:!0,data:r}}if(n===kB.array&&i===kB.array){if(t.length!==s.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=e(t[i],s[i]);if(!r.valid)return{valid:!1};n.push(r.data)}return{valid:!0,data:n}}return n===kB.date&&i===kB.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}(e.value,n.value);return i.valid?((k2(e)||k2(n))&&t.dirty(),{status:t.value,value:i.data}):(kH(s,{code:kq.invalid_intersection_types}),kQ)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}OA.create=(e,t,s)=>new OA({left:e,right:t,typeName:k.ZodIntersection,...k7(s)});class OC extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==kB.array)return kH(s,{code:kq.invalid_type,expected:kB.array,received:s.parsedType}),kQ;if(s.data.length<this._def.items.length)return kH(s,{code:kq.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),kQ;!this._def.rest&&s.data.length>this._def.items.length&&(kH(s,{code:kq.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...s.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new k9(s,e,s.path,t)):null}).filter(e=>!!e);return s.common.async?Promise.all(n).then(e=>kY.mergeArray(t,e)):kY.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new OC({...this._def,rest:e})}}OC.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new OC({items:e,typeName:k.ZodTuple,rest:null,...k7(t)})};class OM extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==kB.object)return kH(s,{code:kq.invalid_type,expected:kB.object,received:s.parsedType}),kQ;let n=[],i=this._def.keyType,r=this._def.valueType;for(let e in s.data)n.push({key:i._parse(new k9(s,e,s.path,e)),value:r._parse(new k9(s,s.data[e],s.path,e)),alwaysSet:e in s.data});return s.common.async?kY.mergeObjectAsync(t,n):kY.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return new OM(t instanceof Oe?{keyType:e,valueType:t,typeName:k.ZodRecord,...k7(s)}:{keyType:Of.create(),valueType:e,typeName:k.ZodRecord,...k7(t)})}}class OF extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==kB.map)return kH(s,{code:kq.invalid_type,expected:kB.map,received:s.parsedType}),kQ;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([e,t],r)=>({key:n._parse(new k9(s,e,s.path,[r,"key"])),value:i._parse(new k9(s,t,s.path,[r,"value"]))}));if(s.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let s of r){let n=await s.key,i=await s.value;if("aborted"===n.status||"aborted"===i.status)return kQ;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let s of r){let n=s.key,i=s.value;if("aborted"===n.status||"aborted"===i.status)return kQ;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}OF.create=(e,t,s)=>new OF({valueType:t,keyType:e,typeName:k.ZodMap,...k7(s)});class OL extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==kB.set)return kH(s,{code:kq.invalid_type,expected:kB.set,received:s.parsedType}),kQ;let n=this._def;null!==n.minSize&&s.data.size<n.minSize.value&&(kH(s,{code:kq.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&s.data.size>n.maxSize.value&&(kH(s,{code:kq.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function r(e){let s=new Set;for(let n of e){if("aborted"===n.status)return kQ;"dirty"===n.status&&t.dirty(),s.add(n.value)}return{status:t.value,value:s}}let a=[...s.data.values()].map((e,t)=>i._parse(new k9(s,e,s.path,t)));return s.common.async?Promise.all(a).then(e=>r(e)):r(a)}min(e,t){return new OL({...this._def,minSize:{value:e,message:_.toString(t)}})}max(e,t){return new OL({...this._def,maxSize:{value:e,message:_.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}OL.create=(e,t)=>new OL({valueType:e,minSize:null,maxSize:null,typeName:k.ZodSet,...k7(t)});class OP extends Oe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==kB.function)return kH(t,{code:kq.invalid_type,expected:kB.function,received:t.parsedType}),kQ;function s(e,s){return kW({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,kG(),kJ].filter(e=>!!e),issueData:{code:kq.invalid_arguments,argumentsError:s}})}function n(e,s){return kW({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,kG(),kJ].filter(e=>!!e),issueData:{code:kq.invalid_return_type,returnTypeError:s}})}let i={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof OZ){let e=this;return k0(async function(...t){let a=new kK([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw a.addIssue(s(t,e)),a}),l=await Reflect.apply(r,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw a.addIssue(n(l,e)),a})})}{let e=this;return k0(function(...t){let a=e._def.args.safeParse(t,i);if(!a.success)throw new kK([s(t,a.error)]);let o=Reflect.apply(r,this,a.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new kK([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new OP({...this._def,args:OC.create(e).rest(Ok.create())})}returns(e){return new OP({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new OP({args:e||OC.create([]).rest(Ok.create()),returns:t||Ok.create(),typeName:k.ZodFunction,...k7(s)})}}class O$ extends Oe{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}O$.create=(e,t)=>new O$({getter:e,typeName:k.ZodLazy,...k7(t)});class OU extends Oe{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return kH(t,{received:t.data,code:kq.invalid_literal,expected:this._def.value}),kQ}return{status:"valid",value:e.data}}get value(){return this._def.value}}function OD(e,t){return new Oz({values:e,typeName:k.ZodEnum,...k7(t)})}OU.create=(e,t)=>new OU({value:e,typeName:k.ZodLiteral,...k7(t)});class Oz extends Oe{constructor(){super(...arguments),w.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),s=this._def.values;return kH(t,{expected:y.joinValues(s),received:t.parsedType,code:kq.invalid_type}),kQ}if(k4(this,w,"f")||k6(this,w,new Set(this._def.values),"f"),!k4(this,w,"f").has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return kH(t,{received:t.data,code:kq.invalid_enum_value,options:s}),kQ}return k0(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Oz.create(e,{...this._def,...t})}exclude(e,t=this._def){return Oz.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}w=new WeakMap,Oz.create=OD;class OB extends Oe{constructor(){super(...arguments),S.set(this,void 0)}_parse(e){let t=y.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==kB.string&&s.parsedType!==kB.number){let e=y.objectValues(t);return kH(s,{expected:y.joinValues(e),received:s.parsedType,code:kq.invalid_type}),kQ}if(k4(this,S,"f")||k6(this,S,new Set(y.getValidEnumValues(this._def.values)),"f"),!k4(this,S,"f").has(e.data)){let e=y.objectValues(t);return kH(s,{received:s.data,code:kq.invalid_enum_value,options:e}),kQ}return k0(e.data)}get enum(){return this._def.values}}S=new WeakMap,OB.create=(e,t)=>new OB({values:e,typeName:k.ZodNativeEnum,...k7(t)});class OZ extends Oe{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==kB.promise&&!1===t.common.async?(kH(t,{code:kq.invalid_type,expected:kB.promise,received:t.parsedType}),kQ):k0((t.parsedType===kB.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}OZ.create=(e,t)=>new OZ({type:e,typeName:k.ZodPromise,...k7(t)});class Oq extends Oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===k.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{kH(s,e),e.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(s.data,i);if(s.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return kQ;let n=await this._def.schema._parseAsync({data:e,path:s.path,parent:s});return"aborted"===n.status?kQ:"dirty"===n.status||"dirty"===t.value?kX(n.value):n});{if("aborted"===t.value)return kQ;let n=this._def.schema._parseSync({data:e,path:s.path,parent:s});return"aborted"===n.status?kQ:"dirty"===n.status||"dirty"===t.value?kX(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(s.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==s.common.async)return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(s=>"aborted"===s.status?kQ:("dirty"===s.status&&t.dirty(),e(s.value).then(()=>({status:t.value,value:s.value}))));{let n=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===n.status?kQ:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==s.common.async)return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(e=>k5(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!k5(e))return e;let r=n.transform(e.value,i);if(r instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}}y.assertNever(n)}}Oq.create=(e,t,s)=>new Oq({schema:e,typeName:k.ZodEffects,effect:t,...k7(s)}),Oq.createWithPreprocess=(e,t,s)=>new Oq({schema:t,effect:{type:"preprocess",transform:e},typeName:k.ZodEffects,...k7(s)});class OK extends Oe{_parse(e){return this._getType(e)===kB.undefined?k0(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}OK.create=(e,t)=>new OK({innerType:e,typeName:k.ZodOptional,...k7(t)});class OJ extends Oe{_parse(e){return this._getType(e)===kB.null?k0(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}OJ.create=(e,t)=>new OJ({innerType:e,typeName:k.ZodNullable,...k7(t)});class OV extends Oe{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return t.parsedType===kB.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}OV.create=(e,t)=>new OV({innerType:e,typeName:k.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...k7(t)});class OG extends Oe{_parse(e){let{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return k3(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new kK(s.common.issues)},input:s.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new kK(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}OG.create=(e,t)=>new OG({innerType:e,typeName:k.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...k7(t)});class OW extends Oe{_parse(e){if(this._getType(e)!==kB.nan){let t=this._getOrReturnCtx(e);return kH(t,{code:kq.invalid_type,expected:kB.nan,received:t.parsedType}),kQ}return{status:"valid",value:e.data}}}OW.create=e=>new OW({typeName:k.ZodNaN,...k7(e)});let OH=Symbol("zod_brand");class OY extends Oe{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class OQ extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?kQ:"dirty"===e.status?(t.dirty(),kX(e.value)):this._def.out._parseAsync({data:e.value,path:s.path,parent:s})})();{let e=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?kQ:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:s.path,parent:s})}}static create(e,t){return new OQ({in:e,out:t,typeName:k.ZodPipeline})}}class OX extends Oe{_parse(e){let t=this._def.innerType._parse(e),s=e=>(k5(e)&&(e.value=Object.freeze(e.value)),e);return k3(t)?t.then(e=>s(e)):s(t)}unwrap(){return this._def.innerType}}function O0(e,t={},s){return e?OS.create().superRefine((n,i)=>{var r,a;if(!e(n)){let e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,o=null===(a=null!==(r=e.fatal)&&void 0!==r?r:s)||void 0===a||a;i.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:o})}}):OS.create()}OX.create=(e,t)=>new OX({innerType:e,typeName:k.ZodReadonly,...k7(t)});let O1={object:OR.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(k||(k={}));let O2=Of.create,O5=Og.create,O3=OW.create,O4=Ob.create,O6=Ox.create,O9=Oy.create,O8=Ov.create,O7=O_.create,Ee=Ow.create,Et=OS.create,Es=Ok.create,En=OO.create,Ei=OE.create,Er=OT.create,Ea=OR.create,Eo=OR.strictCreate,El=OI.create,Ec=Oj.create,Eu=OA.create,Ep=OC.create,Ed=OM.create,Em=OF.create,Eh=OL.create,Ef=OP.create,Eg=O$.create,Eb=OU.create,Ex=Oz.create,Ey=OB.create,Ev=OZ.create,E_=Oq.create,Ew=OK.create,ES=OJ.create,Ek=Oq.createWithPreprocess,EO=OQ.create;var EE=Object.freeze({__proto__:null,defaultErrorMap:kJ,setErrorMap:function(e){kV=e},getErrorMap:kG,makeIssue:kW,EMPTY_PATH:[],addIssueToContext:kH,ParseStatus:kY,INVALID:kQ,DIRTY:kX,OK:k0,isAborted:k1,isDirty:k2,isValid:k5,isAsync:k3,get util(){return y},get objectUtil(){return v},ZodParsedType:kB,getParsedType:kZ,ZodType:Oe,datetimeRegex:Oh,ZodString:Of,ZodNumber:Og,ZodBigInt:Ob,ZodBoolean:Ox,ZodDate:Oy,ZodSymbol:Ov,ZodUndefined:O_,ZodNull:Ow,ZodAny:OS,ZodUnknown:Ok,ZodNever:OO,ZodVoid:OE,ZodArray:OT,ZodObject:OR,ZodUnion:OI,ZodDiscriminatedUnion:Oj,ZodIntersection:OA,ZodTuple:OC,ZodRecord:OM,ZodMap:OF,ZodSet:OL,ZodFunction:OP,ZodLazy:O$,ZodLiteral:OU,ZodEnum:Oz,ZodNativeEnum:OB,ZodPromise:OZ,ZodEffects:Oq,ZodTransformer:Oq,ZodOptional:OK,ZodNullable:OJ,ZodDefault:OV,ZodCatch:OG,ZodNaN:OW,BRAND:OH,ZodBranded:OY,ZodPipeline:OQ,ZodReadonly:OX,custom:O0,Schema:Oe,ZodSchema:Oe,late:O1,get ZodFirstPartyTypeKind(){return k},coerce:{string:e=>Of.create({...e,coerce:!0}),number:e=>Og.create({...e,coerce:!0}),boolean:e=>Ox.create({...e,coerce:!0}),bigint:e=>Ob.create({...e,coerce:!0}),date:e=>Oy.create({...e,coerce:!0})},any:Et,array:Er,bigint:O4,boolean:O6,date:O9,discriminatedUnion:Ec,effect:E_,enum:Ex,function:Ef,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>O0(t=>t instanceof e,t),intersection:Eu,lazy:Eg,literal:Eb,map:Em,nan:O3,nativeEnum:Ey,never:En,null:Ee,nullable:ES,number:O5,object:Ea,oboolean:()=>O6().optional(),onumber:()=>O5().optional(),optional:Ew,ostring:()=>O2().optional(),pipeline:EO,preprocess:Ek,promise:Ev,record:Ed,set:Eh,strictObject:Eo,string:O2,symbol:O8,transformer:E_,tuple:Ep,undefined:O7,union:El,unknown:Es,void:Ei,NEVER:kQ,ZodIssueCode:kq,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:kK});let ET=require("sharp");var ER=s.n(ET),EI=s(78346);let{GET:EN,POST:Ej}=(e=>{let t=kD(e,"nextjs-app");return{POST:e=>t.POST(e),GET:e=>t.GET(e)}})({router:{imageUploader:(function e(t={}){let s={routerConfig:{image:{maxFileSize:"4MB"}},inputParser:{parse:()=>void 0,_input:void 0,_output:void 0},middleware:()=>({}),onUploadError:()=>({}),errorFormatter:t.errorFormatter??kz,...t};return{input:t=>e({...s,inputParser:t}),middleware:t=>e({...s,middleware:t}),onUploadComplete:e=>({_def:s,resolver:e}),onUploadError:t=>e({...s,onUploadError:t})}})({routerConfig:{image:{maxFileSize:"4MB"}},...x}).input(EE.object({configId:EE.string().optional()})).middleware(async({input:e})=>({input:e})).onUploadComplete(async({metadata:e,file:t})=>{let{configId:s}=e.input,n=await fetch(t.url),i=await n.arrayBuffer(),{width:r,height:a}=await ER()(i).metadata();return s?{configId:(await EI.db.configuration.update({where:{id:s},data:{croppedImageUrl:t.url}})).id}:{configId:(await EI.db.configuration.create({data:{imageUrl:t.url,height:a||500,width:r||500}})).id}})}}),EA=new E.AppRouteRouteModule({definition:{kind:T.x.APP_ROUTE,page:"/api/uploadthing/route",pathname:"/api/uploadthing",filename:"route",bundlePath:"app/api/uploadthing/route"},resolvedPagePath:"/Users/dawiddebosz/Documents/casecobra/src/app/api/uploadthing/route.ts",nextConfigOutput:"",userland:O}),{requestAsyncStorage:EC,staticGenerationAsyncStorage:EM,serverHooks:EF}=EA,EL="/api/uploadthing/route";function EP(){return(0,R.patchFetch)({serverHooks:EF,staticGenerationAsyncStorage:EM})}},47006:(e,t,s)=>{e.exports=s(30517)},78346:(e,t,s)=>{s.d(t,{db:()=>n});let n=new(s(53524)).PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[715],()=>s(15833));module.exports=n})();