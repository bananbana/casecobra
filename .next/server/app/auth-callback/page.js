(()=>{var e={};e.id=689,e.ids=[689],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},37464:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>d,originalPathname:()=>h,pages:()=>l,routeModule:()=>p,tree:()=>o}),s(61577),s(32466),s(64691);var r=s(8956),i=s(18774),a=s(35251),n=s.n(a),c=s(87570),u={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>c[e]);s.d(t,u);let o=["",{children:["auth-callback",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,61577)),"/Users/dawiddebosz/Documents/casecobra/src/app/auth-callback/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,56697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,32466)),"/Users/dawiddebosz/Documents/casecobra/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,64691,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,56697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/dawiddebosz/Documents/casecobra/src/app/auth-callback/page.tsx"],h="/auth-callback/page",d={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/auth-callback/page",pathname:"/auth-callback",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},21671:(e,t,s)=>{let r={b2e67f9148546c5e089ec00c177e2e14153309bb:()=>Promise.resolve().then(s.bind(s,7853)).then(e=>e.getAuthStatus),d8dc055f017fd4a33f0fee2ed3254fc246e45b5c:()=>Promise.resolve().then(s.bind(s,7853)).then(e=>e.$$ACTION_0)};async function i(e,...t){return(await r[e]()).apply(null,t)}e.exports={b2e67f9148546c5e089ec00c177e2e14153309bb:i.bind(null,"b2e67f9148546c5e089ec00c177e2e14153309bb"),d8dc055f017fd4a33f0fee2ed3254fc246e45b5c:i.bind(null,"d8dc055f017fd4a33f0fee2ed3254fc246e45b5c")}},89788:(e,t,s)=>{Promise.resolve().then(s.bind(s,87288))},83441:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76434).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},87288:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(2896),i=s(85266),a=s(49406),n=s(44667),c=s(67214),u=s(14806),o=class extends c.l{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.bindMethods(),this.setOptions(t)}#e;#s=void 0;#r=void 0;#i=void 0;#a;#n;#t;#c;#u;#o;#l;#h;#d;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#s.addObserver(this),l(this.#s,this.options)?this.#f():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return h(this.#s,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return h(this.#s,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#m(),this.#s.removeObserver(this)}setOptions(e,t){let s=this.options,r=this.#s;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.#v(),this.#s.setOptions(this.options),s._defaulted&&!(0,i.VS)(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#s,observer:this});let a=this.hasListeners();a&&d(this.#s,r,this.options,s)&&this.#f(),this.updateResult(t),a&&(this.#s!==r||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.#R();let n=this.#g();a&&(this.#s!==r||this.options.enabled!==s.enabled||n!==this.#d)&&this.#x(n)}getOptimisticResult(e){let t=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(t,e);return(0,i.VS)(this.getCurrentResult(),s)||(this.#i=s,this.#n=this.options,this.#a=this.#s.state),s}getCurrentResult(){return this.#i}trackResult(e,t){let s={};return Object.keys(e).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t?.(r),e[r])})}),s}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#s}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#f(e){this.#v();let t=this.#s.fetch(this.options,e);return e?.throwOnError||(t=t.catch(i.ZT)),t}#R(){if(this.#y(),i.sk||this.#i.isStale||!(0,i.PN)(this.options.staleTime))return;let e=(0,i.Kp)(this.#i.dataUpdatedAt,this.options.staleTime);this.#l=setTimeout(()=>{this.#i.isStale||this.updateResult()},e+1)}#g(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#s):this.options.refetchInterval)??!1}#x(e){this.#m(),this.#d=e,!i.sk&&!1!==this.options.enabled&&(0,i.PN)(this.#d)&&0!==this.#d&&(this.#h=setInterval(()=>{(this.options.refetchIntervalInBackground||n.j.isFocused())&&this.#f()},this.#d))}#b(){this.#R(),this.#x(this.#g())}#y(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#m(){this.#h&&(clearInterval(this.#h),this.#h=void 0)}createResult(e,t){let s;let r=this.#s,a=this.options,n=this.#i,c=this.#a,o=this.#n,h=e!==r?e.state:this.#r,{state:f}=e,b={...f},y=!1;if(t._optimisticResults){let s=this.hasListeners(),i=!s&&l(e,t),n=s&&d(e,r,t,a);(i||n)&&(b={...b,...(0,u.z)(f.data,e.options)}),"isRestoring"===t._optimisticResults&&(b.fetchStatus="idle")}let{error:m,errorUpdatedAt:v,status:R}=b;if(t.select&&void 0!==b.data){if(n&&b.data===c?.data&&t.select===this.#c)s=this.#u;else try{this.#c=t.select,s=t.select(b.data),s=(0,i.oE)(n?.data,s,t),this.#u=s,this.#t=null}catch(e){this.#t=e}}else s=b.data;if(void 0!==t.placeholderData&&void 0===s&&"pending"===R){let e;if(n?.isPlaceholderData&&t.placeholderData===o?.placeholderData)e=n.data;else if(e="function"==typeof t.placeholderData?t.placeholderData(this.#o?.state.data,this.#o):t.placeholderData,t.select&&void 0!==e)try{e=t.select(e),this.#t=null}catch(e){this.#t=e}void 0!==e&&(R="success",s=(0,i.oE)(n?.data,e,t),y=!0)}this.#t&&(m=this.#t,s=this.#u,v=Date.now(),R="error");let g="fetching"===b.fetchStatus,x="pending"===R,S="error"===R,w=x&&g,Q=void 0!==s;return{status:R,fetchStatus:b.fetchStatus,isPending:x,isSuccess:"success"===R,isError:S,isInitialLoading:w,isLoading:w,data:s,dataUpdatedAt:b.dataUpdatedAt,error:m,errorUpdatedAt:v,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>h.dataUpdateCount||b.errorUpdateCount>h.errorUpdateCount,isFetching:g,isRefetching:g&&!x,isLoadingError:S&&!Q,isPaused:"paused"===b.fetchStatus,isPlaceholderData:y,isRefetchError:S&&Q,isStale:p(e,t),refetch:this.refetch}}updateResult(e){let t=this.#i,s=this.createResult(this.#s,this.options);if(this.#a=this.#s.state,this.#n=this.options,void 0!==this.#a.data&&(this.#o=this.#s),(0,i.VS)(s,t))return;this.#i=s;let r={};e?.listeners!==!1&&(()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!this.#p.size)return!0;let r=new Set(s??this.#p);return this.options.throwOnError&&r.add("error"),Object.keys(this.#i).some(e=>this.#i[e]!==t[e]&&r.has(e))})()&&(r.listeners=!0),this.#S({...r,...e})}#v(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#s)return;let t=this.#s;this.#s=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){a.V.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#s,type:"observerResultsUpdated"})})}};function l(e,t){return!1!==t.enabled&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)||void 0!==e.state.data&&h(e,t,t.refetchOnMount)}function h(e,t,s){if(!1!==t.enabled){let r="function"==typeof s?s(e):s;return"always"===r||!1!==r&&p(e,t)}return!1}function d(e,t,s,r){return(e!==t||!1===r.enabled)&&(!s.suspense||"error"!==e.state.status)&&p(e,s)}function p(e,t){return!1!==t.enabled&&e.isStaleByTime(t.staleTime)}var f=s(50950),b=f.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),y=()=>f.useContext(b),m=s(66159),v=f.createContext(!1),R=()=>f.useContext(v);v.Provider;var g=s(80594),x=(e,t)=>{(e.suspense||e.throwOnError)&&!t.isReset()&&(e.retryOnMount=!1)},S=e=>{f.useEffect(()=>{e.clearReset()},[e])},w=({result:e,errorResetBoundary:t,throwOnError:s,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(0,g.L)(s,[e.error,r]),Q=e=>{e.suspense&&"number"!=typeof e.staleTime&&(e.staleTime=1e3)},I=(e,t)=>e?.suspense&&t.isPending,O=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});s(32434);var C=(0,s(29643).$)("b2e67f9148546c5e089ec00c177e2e14153309bb"),P=s(52790),E=s(83441);let k=()=>{let[e,t]=(0,f.useState)(null),s=(0,P.useRouter)();(0,f.useEffect)(()=>{let e=localStorage.getItem("configurationId");e&&t(e)},[]);let{data:i}=function(e,t,s){let r=(0,m.NL)(s),i=R(),n=y(),c=r.defaultQueryOptions(e);c._optimisticResults=i?"isRestoring":"optimistic",Q(c),x(c,n),S(n);let[u]=f.useState(()=>new t(r,c)),o=u.getOptimisticResult(c);if(f.useSyncExternalStore(f.useCallback(e=>{let t=i?()=>void 0:u.subscribe(a.V.batchCalls(e));return u.updateResult(),t},[u,i]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),f.useEffect(()=>{u.setOptions(c,{listeners:!1})},[c,u]),I(c,o))throw O(c,u,n);if(w({result:o,errorResetBoundary:n,throwOnError:c.throwOnError,query:r.getQueryCache().get(c.queryHash)}))throw o.error;return c.notifyOnChangeProps?o:u.trackResult(o)}({queryKey:["auth-callback"],queryFn:async()=>await C(),retry:!0,retryDelay:500},o,void 0);return i?.success&&(e?(localStorage.removeItem("configurationId"),s.push(`/configure/preview?id=${e}`)):s.push("/")),r.jsx("div",{className:"w-full mt-24 flex justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(E.Z,{className:"h-8 w-8 animate-spin text-zinc-500"}),r.jsx("h3",{className:"font-semibold text-xl",children:"Logging you in"}),r.jsx("p",{children:"You will be redirected automatically."})]})})}},7853:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$ACTION_0:()=>u,getAuthStatus:()=>c});var r=s(93608);s(92612);var i=s(28709),a=s(53102),n=s(48163);let c=(0,r.registerServerReference)("d8dc055f017fd4a33f0fee2ed3254fc246e45b5c",u);async function u(){let{getUser:e}=(0,a.getKindeServerSession)(),t=await e();if(!t?.id||!t.email)throw Error("Invalid user data");return await i.db.user.findFirst({where:{id:t.id}})||await i.db.user.create({data:{id:t.id,email:t.email}}),{success:!0}}(0,n.ensureServerEntryExports)([c]),(0,r.registerServerReference)("b2e67f9148546c5e089ec00c177e2e14153309bb",c)},61577:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>c});var r=s(97236);let i=(0,r.createProxy)(String.raw`/Users/dawiddebosz/Documents/casecobra/src/app/auth-callback/page.tsx`),{__esModule:a,$$typeof:n}=i;i.default;let c=(0,r.createProxy)(String.raw`/Users/dawiddebosz/Documents/casecobra/src/app/auth-callback/page.tsx#default`)},28709:(e,t,s)=>{"use strict";s.d(t,{db:()=>r});let r=new(s(53524)).PrismaClient},56697:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(9);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[715,680,742,833,9,324,102,954],()=>s(37464));module.exports=r})();